"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[20673],{13063:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"skills/geospatial_data_pipeline/references/coordinate-systems","title":"Coordinate Systems & Transformations","description":"Complete guide to EPSG codes, coordinate systems, and transformations for geospatial data.","source":"@site/docs/skills/geospatial_data_pipeline/references/coordinate-systems.md","sourceDirName":"skills/geospatial_data_pipeline/references","slug":"/skills/geospatial_data_pipeline/references/coordinate-systems","permalink":"/docs/skills/geospatial_data_pipeline/references/coordinate-systems","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Coordinate Systems & Transformations","sidebar_label":"Coordinate Systems & Transf...","sidebar_position":1}}');var i=s(74848),o=s(28453);const t={title:"Coordinate Systems & Transformations",sidebar_label:"Coordinate Systems & Transf...",sidebar_position:1},a="Coordinate Systems & Transformations",l={},c=[{value:"The Problem",id:"the-problem",level:2},{value:"Common Coordinate Systems",id:"common-coordinate-systems",level:2},{value:"EPSG:4326 (WGS84)",id:"epsg4326-wgs84",level:3},{value:"EPSG:3857 (Web Mercator / Pseudo-Mercator)",id:"epsg3857-web-mercator--pseudo-mercator",level:3},{value:"UTM Zones (EPSG:326xx / 327xx)",id:"utm-zones-epsg326xx--327xx",level:3},{value:"Coordinate Order",id:"coordinate-order",level:2},{value:"Transformations",id:"transformations",level:2},{value:"PostGIS Transformations",id:"postgis-transformations",level:3},{value:"JavaScript Transformations (proj4js)",id:"javascript-transformations-proj4js",level:3},{value:"Finding the Right UTM Zone",id:"finding-the-right-utm-zone",level:2},{value:"Distance Calculations",id:"distance-calculations",level:2},{value:"Wrong: Euclidean Distance in WGS84",id:"wrong-euclidean-distance-in-wgs84",level:3},{value:"Correct: Haversine Formula",id:"correct-haversine-formula",level:3},{value:"Best: PostGIS with GEOGRAPHY",id:"best-postgis-with-geography",level:3},{value:"Common Scenarios",id:"common-scenarios",level:2},{value:"Scenario 1: Storing User Locations",id:"scenario-1-storing-user-locations",level:3},{value:"Scenario 2: Rendering Map Tiles",id:"scenario-2-rendering-map-tiles",level:3},{value:"Scenario 3: Engineering/Survey Data",id:"scenario-3-engineeringsurvey-data",level:3},{value:"Debugging Coordinate Issues",id:"debugging-coordinate-issues",level:2},{value:"Check SRID",id:"check-srid",level:3},{value:"Visualize Coordinates",id:"visualize-coordinates",level:3},{value:"Validate Bounds",id:"validate-bounds",level:3},{value:"Quick Reference",id:"quick-reference",level:2},{value:"Resources",id:"resources",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"coordinate-systems--transformations",children:"Coordinate Systems & Transformations"})}),"\n",(0,i.jsx)(e.p,{children:"Complete guide to EPSG codes, coordinate systems, and transformations for geospatial data."}),"\n",(0,i.jsx)(e.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Different coordinate systems measure the Earth differently."})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"WGS84 (EPSG:4326)"}),": Latitude/longitude on spherical Earth"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Web Mercator (EPSG:3857)"}),": Projected coordinates for web maps"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"UTM zones"}),": Localized projections with minimal distortion"]}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Mixing them causes"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Incorrect distances"}),"\n",(0,i.jsx)(e.li,{children:"Misaligned map features"}),"\n",(0,i.jsx)(e.li,{children:"Wrong spatial queries"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"common-coordinate-systems",children:"Common Coordinate Systems"}),"\n",(0,i.jsx)(e.h3,{id:"epsg4326-wgs84",children:"EPSG:4326 (WGS84)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it is"}),": Geographic coordinates (lat/lon) on an ellipsoid"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Units"}),": Degrees"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Longitude: -180\xb0 to 180\xb0"}),"\n",(0,i.jsx)(e.li,{children:"Latitude: -90\xb0 to 90\xb0"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Used for"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GPS coordinates"}),"\n",(0,i.jsx)(e.li,{children:"GeoJSON standard"}),"\n",(0,i.jsx)(e.li,{children:"Database storage"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Characteristics"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Spherical/ellipsoidal model of Earth"}),"\n",(0,i.jsx)(e.li,{children:"Not equal-area (distorts at poles)"}),"\n",(0,i.jsx)(e.li,{children:"Not conformal (distorts shapes)"}),"\n",(0,i.jsx)(e.li,{children:"Global coverage"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "type": "Point",\n  "coordinates": [-122.4194, 37.7749]  // [lon, lat] in degrees\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Distance calculation"}),": Use great circle distance (Haversine or Vincenty)"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"epsg3857-web-mercator--pseudo-mercator",children:"EPSG:3857 (Web Mercator / Pseudo-Mercator)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it is"}),": Projected coordinates for web mapping"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Units"}),": Meters (but not true meters - see note)"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"X (easting): -20,037,508 to 20,037,508"}),"\n",(0,i.jsx)(e.li,{children:"Y (northing): -20,037,508 to 20,037,508"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Used for"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Google Maps, Mapbox, OpenStreetMap"}),"\n",(0,i.jsx)(e.li,{children:"Map tiles (z/x/y scheme)"}),"\n",(0,i.jsx)(e.li,{children:"Web map rendering"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Characteristics"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Cylindrical projection"}),"\n",(0,i.jsx)(e.li,{children:"Conformal (preserves angles/shapes)"}),"\n",(0,i.jsx)(e.li,{children:"NOT equal-area (distorts at poles)"}),"\n",(0,i.jsx)(e.li,{children:"Cuts off at ~85\xb0N/S"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Example"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-json",children:'{\n  "type": "Point",\n  "coordinates": [-13634876, 4545684]  // [x, y] in meters (projected)\n}\n'})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Important"}),": Distances in Web Mercator are NOT accurate. Always transform to WGS84 for distance calculations."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"utm-zones-epsg326xx--327xx",children:"UTM Zones (EPSG:326xx / 327xx)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it is"}),": Universal Transverse Mercator - localized projections"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Coverage"}),": 60 zones, each 6\xb0 wide"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Northern Hemisphere: EPSG:32601-32660"}),"\n",(0,i.jsx)(e.li,{children:"Southern Hemisphere: EPSG:32701-32760"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Units"}),": Meters"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Used for"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Engineering projects"}),"\n",(0,i.jsx)(e.li,{children:"Survey data"}),"\n",(0,i.jsx)(e.li,{children:"High-accuracy local mapping"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Characteristics"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"Conformal (preserves shapes)"}),"\n",(0,i.jsx)(e.li,{children:"Minimal distortion within zone"}),"\n",(0,i.jsx)(e.li,{children:"Accurate distance calculations"}),"\n",(0,i.jsx)(e.li,{children:"Limited coverage (one zone at a time)"}),"\n"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Example"})," (San Francisco is in UTM Zone 10N):"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- Transform WGS84 to UTM 10N\nSELECT ST_Transform(\n  ST_SetSRID(ST_MakePoint(-122.4194, 37.7749), 4326),\n  32610  -- UTM 10N\n);\n-- Result: POINT(551420 4182976)\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"coordinate-order",children:"Coordinate Order"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"CRITICAL"}),": Different systems use different order!"]}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"System"}),(0,i.jsx)(e.th,{children:"Order"}),(0,i.jsx)(e.th,{children:"Example"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"GeoJSON"}),(0,i.jsx)(e.td,{children:"[lon, lat]"}),(0,i.jsx)(e.td,{children:"[-122.4194, 37.7749]"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"PostGIS (WGS84)"}),(0,i.jsx)(e.td,{children:"(lon, lat)"}),(0,i.jsx)(e.td,{children:"POINT(-122.4194 37.7749)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"PostGIS (traditional)"}),(0,i.jsx)(e.td,{children:"(lat, lon)"}),(0,i.jsx)(e.td,{children:(0,i.jsx)(e.strong,{children:"VARIES"})})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Mapbox/Leaflet"}),(0,i.jsx)(e.td,{children:"[lat, lon]"}),(0,i.jsx)(e.td,{children:"[37.7749, -122.4194]"})]})]})]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Rule of thumb"}),": GeoJSON and PostGIS use (X, Y) = (lon, lat)"]}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Common mistake"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:'// \u274c WRONG - swapped coordinates\nconst point = {\n  type: "Point",\n  coordinates: [37.7749, -122.4194]  // lat, lon (WRONG!)\n};\n\n// \u2705 CORRECT - GeoJSON is [lon, lat]\nconst point = {\n  type: "Point",\n  coordinates: [-122.4194, 37.7749]  // lon, lat \u2705\n};\n'})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"transformations",children:"Transformations"}),"\n",(0,i.jsx)(e.h3,{id:"postgis-transformations",children:"PostGIS Transformations"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Convert between coordinate systems"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- WGS84 \u2192 Web Mercator\nSELECT ST_Transform(\n  ST_SetSRID(ST_MakePoint(-122.4194, 37.7749), 4326),\n  3857\n);\n-- Result: POINT(-13634876 4545684)\n\n-- Web Mercator \u2192 WGS84\nSELECT ST_Transform(\n  ST_SetSRID(ST_MakePoint(-13634876, 4545684), 3857),\n  4326\n);\n-- Result: POINT(-122.4194 37.7749)\n\n-- WGS84 \u2192 UTM 10N\nSELECT ST_Transform(\n  ST_SetSRID(ST_MakePoint(-122.4194, 37.7749), 4326),\n  32610\n);\n-- Result: POINT(551420 4182976)\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Always specify SRID"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- \u274c WRONG - no SRID, PostGIS doesn't know what it is\nSELECT ST_Transform(ST_MakePoint(-122.4194, 37.7749), 3857);\n\n-- \u2705 CORRECT - explicit SRID\nSELECT ST_Transform(\n  ST_SetSRID(ST_MakePoint(-122.4194, 37.7749), 4326),\n  3857\n);\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"javascript-transformations-proj4js",children:"JavaScript Transformations (proj4js)"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Install"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"npm install proj4\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Usage"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"import proj4 from 'proj4';\n\n// Define projections (built-in for common ones)\nconst wgs84 = 'EPSG:4326';\nconst webMercator = 'EPSG:3857';\n\n// WGS84 \u2192 Web Mercator\nconst [x, y] = proj4(wgs84, webMercator, [-122.4194, 37.7749]);\nconsole.log(x, y);  // -13634876, 4545684\n\n// Web Mercator \u2192 WGS84\nconst [lon, lat] = proj4(webMercator, wgs84, [-13634876, 4545684]);\nconsole.log(lon, lat);  // -122.4194, 37.7749\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Custom projections"}),":"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// Define UTM 10N\nproj4.defs([\n  [\n    'EPSG:32610',\n    '+proj=utm +zone=10 +datum=WGS84 +units=m +no_defs'\n  ]\n]);\n\n// Transform\nconst [easting, northing] = proj4('EPSG:4326', 'EPSG:32610', [-122.4194, 37.7749]);\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"finding-the-right-utm-zone",children:"Finding the Right UTM Zone"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Formula"}),": ",(0,i.jsx)(e.code,{children:"Zone = floor((longitude + 180) / 6) + 1"})]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"function getUTMZone(lon: number, lat: number): number {\n  const zone = Math.floor((lon + 180) / 6) + 1;\n\n  // Northern hemisphere: 32600 + zone\n  // Southern hemisphere: 32700 + zone\n  const epsg = lat >= 0 ? 32600 + zone : 32700 + zone;\n\n  return epsg;\n}\n\n// San Francisco (-122.4194, 37.7749)\nconst zone = getUTMZone(-122.4194, 37.7749);\n// Returns: 32610 (UTM 10N)\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"distance-calculations",children:"Distance Calculations"}),"\n",(0,i.jsx)(e.h3,{id:"wrong-euclidean-distance-in-wgs84",children:"Wrong: Euclidean Distance in WGS84"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// \u274c WRONG - treats degrees as Cartesian units\nfunction badDistance(lon1, lat1, lon2, lat2) {\n  const dx = lon2 - lon1;\n  const dy = lat2 - lat1;\n  return Math.sqrt(dx * dx + dy * dy) * 111320;  // WRONG!\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"correct-haversine-formula",children:"Correct: Haversine Formula"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// \u2705 CORRECT - great circle distance\nfunction haversineDistance(lon1, lat1, lon2, lat2) {\n  const R = 6371000; // Earth radius in meters\n\n  const dLat = toRadians(lat2 - lat1);\n  const dLon = toRadians(lon2 - lon1);\n\n  const a =\n    Math.sin(dLat / 2) * Math.sin(dLat / 2) +\n    Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) *\n    Math.sin(dLon / 2) * Math.sin(dLon / 2);\n\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n  return R * c;\n}\n"})}),"\n",(0,i.jsx)(e.h3,{id:"best-postgis-with-geography",children:"Best: PostGIS with GEOGRAPHY"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- PostGIS handles everything\nSELECT ST_Distance(\n  ST_SetSRID(ST_MakePoint(-122.4194, 37.7749), 4326)::geography,\n  ST_SetSRID(ST_MakePoint(-74.0060, 40.7128), 4326)::geography\n) AS distance_meters;\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Note"}),": ",(0,i.jsx)(e.code,{children:"::geography"})," tells PostGIS to use spheroid model"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"common-scenarios",children:"Common Scenarios"}),"\n",(0,i.jsx)(e.h3,{id:"scenario-1-storing-user-locations",children:"Scenario 1: Storing User Locations"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Best practice"}),": Store in WGS84 (EPSG:4326)"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"CREATE TABLE user_locations (\n  id SERIAL PRIMARY KEY,\n  user_id INTEGER,\n  location GEOGRAPHY(POINT, 4326),  -- WGS84\n  created_at TIMESTAMP\n);\n\n-- Index for spatial queries\nCREATE INDEX idx_user_locations ON user_locations USING GIST(location);\n\n-- Insert (from GPS)\nINSERT INTO user_locations (user_id, location)\nVALUES (123, ST_SetSRID(ST_MakePoint(-122.4194, 37.7749), 4326));\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Why WGS84"}),":"]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsx)(e.li,{children:"GPS coordinates are in WGS84"}),"\n",(0,i.jsx)(e.li,{children:"Database can handle distance calculations"}),"\n",(0,i.jsx)(e.li,{children:"Global coverage"}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"scenario-2-rendering-map-tiles",children:"Scenario 2: Rendering Map Tiles"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Convert to Web Mercator"})," for rendering:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// Client-side: Transform WGS84 \u2192 Web Mercator for Mapbox\nconst features = await fetch('/api/features').then(r => r.json());\n\n// Mapbox expects WGS84, but tiles are in Web Mercator\nmap.addSource('features', {\n  type: 'geojson',\n  data: features  // GeoJSON in WGS84\n});\n\n// Mapbox handles transformation internally\n"})}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Server-side"}),": Generate tiles in Web Mercator"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- Tile query (Web Mercator)\nSELECT ST_AsMVT(q, 'layer', 4096, 'geom') AS mvt\nFROM (\n  SELECT\n    id,\n    name,\n    ST_AsMVTGeom(\n      ST_Transform(location, 3857),  -- Transform to Web Mercator\n      ST_TileEnvelope(:z, :x, :y),\n      4096,\n      256\n    ) AS geom\n  FROM locations\n  WHERE ST_Intersects(\n    location,\n    ST_Transform(ST_TileEnvelope(:z, :x, :y), 4326)\n  )\n) AS q;\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"scenario-3-engineeringsurvey-data",children:"Scenario 3: Engineering/Survey Data"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Use local UTM zone"})," for accuracy:"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"-- Survey points in UTM 10N (San Francisco area)\nCREATE TABLE survey_points (\n  id SERIAL PRIMARY KEY,\n  point_id VARCHAR(50),\n  location GEOMETRY(POINT, 32610),  -- UTM 10N\n  elevation FLOAT,\n  surveyed_at TIMESTAMP\n);\n\n-- Accurate distance calculation (within UTM zone)\nSELECT ST_Distance(\n  (SELECT location FROM survey_points WHERE point_id = 'A'),\n  (SELECT location FROM survey_points WHERE point_id = 'B')\n) AS distance_meters;\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"debugging-coordinate-issues",children:"Debugging Coordinate Issues"}),"\n",(0,i.jsx)(e.h3,{id:"check-srid",children:"Check SRID"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-sql",children:"SELECT ST_SRID(location) FROM locations LIMIT 1;\n-- Should return 4326 for WGS84\n"})}),"\n",(0,i.jsx)(e.h3,{id:"visualize-coordinates",children:"Visualize Coordinates"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// If coordinates look huge, probably Web Mercator\nconst coords = [-13634876, 4545684];  // Web Mercator\nconsole.log('Magnitude:', Math.abs(coords[0]));  // ~13 million = Web Mercator\n\n// If coordinates are small, probably WGS84\nconst coords2 = [-122.4194, 37.7749];  // WGS84\nconsole.log('Magnitude:', Math.abs(coords2[0]));  // ~122 = WGS84\n"})}),"\n",(0,i.jsx)(e.h3,{id:"validate-bounds",children:"Validate Bounds"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-javascript",children:"// WGS84 bounds\nconst isValidWGS84 = (lon, lat) => {\n  return lon >= -180 && lon <= 180 && lat >= -90 && lat <= 90;\n};\n\n// Web Mercator bounds\nconst isValidWebMercator = (x, y) => {\n  const limit = 20037508.34;\n  return Math.abs(x) <= limit && Math.abs(y) <= limit;\n};\n"})}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Task"}),(0,i.jsx)(e.th,{children:"Use This"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Store GPS coordinates"}),(0,i.jsx)(e.td,{children:"WGS84 (4326)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Render web maps"}),(0,i.jsx)(e.td,{children:"Web Mercator (3857)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Engineering/survey"}),(0,i.jsx)(e.td,{children:"Local UTM zone (326xx/327xx)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Distance calculations"}),(0,i.jsx)(e.td,{children:"WGS84 with GEOGRAPHY type"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Tile generation"}),(0,i.jsx)(e.td,{children:"Web Mercator (3857)"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Global analysis"}),(0,i.jsx)(e.td,{children:"Equal-area projection (e.g., Mollweide)"})]})]})]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"resources",children:"Resources"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://epsg.io/",children:"EPSG.io"})," - Search coordinate systems"]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.a,{href:"https://proj.org/",children:"Proj4"})," - Transformation library"]}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://postgis.net/docs/ST_Transform.html",children:"PostGIS Transformations"})}),"\n",(0,i.jsx)(e.li,{children:(0,i.jsx)(e.a,{href:"https://docs.mapbox.com/help/glossary/projection/",children:"Understanding Web Mercator"})}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},28453:(n,e,s)=>{s.d(e,{R:()=>t,x:()=>a});var r=s(96540);const i={},o=r.createContext(i);function t(n){const e=r.useContext(o);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:t(n.components),r.createElement(o.Provider,{value:e},n.children)}}}]);