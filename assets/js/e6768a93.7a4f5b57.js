"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[91072],{28453:(e,n,i)=>{i.d(n,{R:()=>c,x:()=>o});var s=i(96540);const t={},r=s.createContext(t);function c(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(r.Provider,{value:n},e.children)}},37273:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"skills/video_processing_editing/index","title":"Video Processing & Editing","description":"FFmpeg automation for cutting, trimming, concatenating videos. Audio mixing, timeline editing, transitions, effects. Export optimization for YouTube, social media. Subtitle handling, color grading, batch processing. Use for videogen projects, content creation, automated video production. Activate on \\"video editing\\", \\"FFmpeg\\", \\"trim video\\", \\"concatenate\\", \\"transitions\\", \\"export optimization\\". NOT for real-time video editing UI, 3D compositing, or motion graphics.","source":"@site/docs/skills/video_processing_editing/index.md","sourceDirName":"skills/video_processing_editing","slug":"/skills/video_processing_editing","permalink":"/docs/skills/video_processing_editing","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"name":"video-processing-editing","description":"FFmpeg automation for cutting, trimming, concatenating videos. Audio mixing, timeline editing, transitions, effects. Export optimization for YouTube, social media. Subtitle handling, color grading, batch processing. Use for videogen projects, content creation, automated video production. Activate on \\"video editing\\", \\"FFmpeg\\", \\"trim video\\", \\"concatenate\\", \\"transitions\\", \\"export optimization\\". NOT for real-time video editing UI, 3D compositing, or motion graphics.","allowed-tools":"Read,Write,Edit,Bash(ffmpeg*,ffprobe*,python*)","slug":"/skills/video_processing_editing"}}');var t=i(74848),r=i(28453);const c={name:"video-processing-editing",description:'FFmpeg automation for cutting, trimming, concatenating videos. Audio mixing, timeline editing, transitions, effects. Export optimization for YouTube, social media. Subtitle handling, color grading, batch processing. Use for videogen projects, content creation, automated video production. Activate on "video editing", "FFmpeg", "trim video", "concatenate", "transitions", "export optimization". NOT for real-time video editing UI, 3D compositing, or motion graphics.',"allowed-tools":"Read,Write,Edit,Bash(ffmpeg*,ffprobe*,python*)",slug:"/skills/video_processing_editing"},o="Video Processing & Editing",d={},l=[{value:"When to Use",id:"when-to-use",level:2},{value:"Technology Selection",id:"technology-selection",level:2},{value:"Video Editing Tools",id:"video-editing-tools",level:3},{value:"Common Anti-Patterns",id:"common-anti-patterns",level:2},{value:"Anti-Pattern 1: Not Using Keyframe-Aligned Cuts",id:"anti-pattern-1-not-using-keyframe-aligned-cuts",level:3},{value:"Anti-Pattern 2: Re-encoding Unnecessarily",id:"anti-pattern-2-re-encoding-unnecessarily",level:3},{value:"Anti-Pattern 3: Ignoring Color Space Conversions",id:"anti-pattern-3-ignoring-color-space-conversions",level:3},{value:"Anti-Pattern 4: Poor Audio Sync",id:"anti-pattern-4-poor-audio-sync",level:3},{value:"Anti-Pattern 5: Wrong Codec/Bitrate for Platform",id:"anti-pattern-5-wrong-codecbitrate-for-platform",level:3},{value:"Production Checklist",id:"production-checklist",level:2},{value:"When to Use vs Avoid",id:"when-to-use-vs-avoid",level:2},{value:"References",id:"references",level:2},{value:"Scripts",id:"scripts",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"video-processing--editing",children:"Video Processing & Editing"})}),"\n",(0,t.jsx)(n.p,{children:"Expert in FFmpeg-based video editing, processing automation, and export optimization for modern content creation workflows."}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Use for"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Automated video editing pipelines (script-to-video)"}),"\n",(0,t.jsx)(n.li,{children:"Cutting, trimming, concatenating clips"}),"\n",(0,t.jsx)(n.li,{children:"Adding transitions, effects, overlays"}),"\n",(0,t.jsx)(n.li,{children:"Audio mixing and normalization"}),"\n",(0,t.jsx)(n.li,{children:"Subtitle/caption handling"}),"\n",(0,t.jsx)(n.li,{children:"Export optimization for platforms"}),"\n",(0,t.jsx)(n.li,{children:"Batch video processing"}),"\n",(0,t.jsx)(n.li,{children:"Color grading and correction"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u274c ",(0,t.jsx)(n.strong,{children:"NOT for"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Real-time video editing UI (use DaVinci Resolve/Premiere)"}),"\n",(0,t.jsx)(n.li,{children:"3D compositing (use After Effects/Blender)"}),"\n",(0,t.jsx)(n.li,{children:"Motion graphics animation (use After Effects)"}),"\n",(0,t.jsx)(n.li,{children:"Basic screen recording (use OBS)"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"technology-selection",children:"Technology Selection"}),"\n",(0,t.jsx)(n.h3,{id:"video-editing-tools",children:"Video Editing Tools"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Tool"}),(0,t.jsx)(n.th,{children:"Speed"}),(0,t.jsx)(n.th,{children:"Features"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"FFmpeg"}),(0,t.jsx)(n.td,{children:"Very Fast"}),(0,t.jsx)(n.td,{children:"CLI automation"}),(0,t.jsx)(n.td,{children:"Production pipelines"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"MoviePy"}),(0,t.jsx)(n.td,{children:"Medium"}),(0,t.jsx)(n.td,{children:"Python API"}),(0,t.jsx)(n.td,{children:"Programmatic editing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PyAV"}),(0,t.jsx)(n.td,{children:"Fast"}),(0,t.jsx)(n.td,{children:"Low-level control"}),(0,t.jsx)(n.td,{children:"Custom processing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"DaVinci Resolve"}),(0,t.jsx)(n.td,{children:"Slow"}),(0,t.jsx)(n.td,{children:"Full NLE"}),(0,t.jsx)(n.td,{children:"Manual editing"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Decision tree"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Need automation? \u2192 FFmpeg\nNeed Python API? \u2192 MoviePy\nNeed frame-level control? \u2192 PyAV\nNeed manual editing? \u2192 DaVinci Resolve\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"common-anti-patterns",children:"Common Anti-Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"anti-pattern-1-not-using-keyframe-aligned-cuts",children:"Anti-Pattern 1: Not Using Keyframe-Aligned Cuts"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Novice thinking"}),': "Just cut the video at any timestamp"']}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Causes artifacts, black frames, and playback issues."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u274c Cut at arbitrary timestamp (not keyframe-aligned)\nffmpeg -i input.mp4 -ss 00:01:23.456 -to 00:02:45.678 -c copy output.mp4\n\n# Result: Black frames, artifacts, sync issues\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Video codecs use keyframes (I-frames) every 2-10 seconds"}),"\n",(0,t.jsx)(n.li,{children:"Non-keyframe cuts require re-encoding"}),"\n",(0,t.jsxs)(n.li,{children:["Using ",(0,t.jsx)(n.code,{children:"-c copy"})," (stream copy) without keyframe alignment breaks playback"]}),"\n",(0,t.jsx)(n.li,{children:"GOP (Group of Pictures) structure depends on keyframes"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 1"}),": Re-encode for precise cuts"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Re-encode for frame-accurate cutting\nffmpeg -i input.mp4 -ss 00:01:23.456 -to 00:02:45.678 \\\n  -c:v libx264 -crf 18 -preset medium \\\n  -c:a aac -b:a 192k \\\n  output.mp4\n\n# Frame-accurate, but slower (re-encoding)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 2"}),": Keyframe-aligned stream copy"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Fast cutting with keyframe alignment\n# Step 1: Find keyframes near cut points\nffprobe -select_streams v -show_frames -show_entries frame=pkt_pts_time,key_frame \\\n  -of csv input.mp4 | grep \",1$\" | awk -F',' '{print $2}'\n\n# Step 2: Cut at nearest keyframes (fast, no re-encoding)\nffmpeg -i input.mp4 -ss 00:01:22.000 -to 00:02:46.000 -c copy output.mp4\n\n# Blazing fast, no quality loss, but not frame-accurate\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 3"}),": Two-pass for best of both worlds"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Fast seek + precise cut\nffmpeg -ss 00:01:20.000 -i input.mp4 \\\n  -ss 00:00:03.456 -to 00:01:25.678 \\\n  -c:v libx264 -crf 18 -preset medium \\\n  -c:a aac -b:a 192k \\\n  output.mp4\n\n# -ss BEFORE -i: Fast seek to keyframe (no decode)\n# -ss AFTER -i: Precise trim (only decode needed portion)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Performance comparison"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:"Time (1-hour video)"}),(0,t.jsx)(n.th,{children:"Accuracy"}),(0,t.jsx)(n.th,{children:"Quality"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Stream copy (arbitrary)"}),(0,t.jsx)(n.td,{children:"2s"}),(0,t.jsx)(n.td,{children:"\u274c Broken"}),(0,t.jsx)(n.td,{children:"\u274c Artifacts"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Stream copy (keyframe)"}),(0,t.jsx)(n.td,{children:"2s"}),(0,t.jsx)(n.td,{children:"\xb12s"}),(0,t.jsx)(n.td,{children:"\u2705 Perfect"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Re-encode (simple)"}),(0,t.jsx)(n.td,{children:"15min"}),(0,t.jsx)(n.td,{children:"\u2705 Frame"}),(0,t.jsx)(n.td,{children:"\u26a0\ufe0f Quality loss"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Two-pass (optimal)"}),(0,t.jsx)(n.td,{children:"3min"}),(0,t.jsx)(n.td,{children:"\u2705 Frame"}),(0,t.jsx)(n.td,{children:"\u2705 Perfect"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Timeline context"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"2010: FFmpeg required full re-encoding for cuts"}),"\n",(0,t.jsxs)(n.li,{children:["2015: ",(0,t.jsx)(n.code,{children:"-c copy"})," added for stream copying"]}),"\n",(0,t.jsx)(n.li,{children:"2020: Two-pass cutting became best practice"}),"\n",(0,t.jsx)(n.li,{children:"2024: Hardware acceleration (NVENC) makes re-encoding viable"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"anti-pattern-2-re-encoding-unnecessarily",children:"Anti-Pattern 2: Re-encoding Unnecessarily"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Novice thinking"}),': "Apply all edits in one FFmpeg command"']}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Multiple re-encodings cause cumulative quality loss."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u274c Re-encode for each operation (quality degradation)\n# Operation 1: Trim\nffmpeg -i input.mp4 -ss 00:01:00 -to 00:05:00 \\\n  -c:v libx264 -crf 23 temp1.mp4\n\n# Operation 2: Add audio\nffmpeg -i temp1.mp4 -i audio.mp3 -c:v libx264 -crf 23 \\\n  -map 0:v -map 1:a temp2.mp4\n\n# Operation 3: Add subtitles\nffmpeg -i temp2.mp4 -vf subtitles=subs.srt \\\n  -c:v libx264 -crf 23 output.mp4\n\n# Result: 3x re-encoding = significant quality loss\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Each re-encode is lossy (even with high CRF)"}),"\n",(0,t.jsx)(n.li,{children:"Cumulative quality loss (generation loss)"}),"\n",(0,t.jsx)(n.li,{children:"3x encoding time"}),"\n",(0,t.jsx)(n.li,{children:"Wasted disk I/O"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 1"}),": Chain operations in single command"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# \u2705 Single-pass encoding with all operations\nffmpeg -ss 00:01:00 -i input.mp4 -i audio.mp3 \\\n  -to 00:04:00 \\\n  -vf "subtitles=subs.srt" \\\n  -map 0:v -map 1:a \\\n  -c:v libx264 -crf 18 -preset medium \\\n  -c:a aac -b:a 192k \\\n  output.mp4\n\n# Single re-encode, all operations applied at once\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 2"}),": Use stream copy when possible"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Lossless operations with stream copy\n# Trim (stream copy)\nffmpeg -i input.mp4 -ss 00:01:00 -to 00:05:00 -c copy temp.mp4\n\n# Add audio (stream copy video, encode audio)\nffmpeg -i temp.mp4 -i audio.mp3 \\\n  -map 0:v -map 1:a \\\n  -c:v copy -c:a aac -b:a 192k \\\n  temp2.mp4\n\n# Burn subtitles (must re-encode video)\nffmpeg -i temp2.mp4 -vf subtitles=subs.srt \\\n  -c:v libx264 -crf 18 -preset medium \\\n  -c:a copy \\\n  output.mp4\n\n# Only 1 video re-encode (for subtitles)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Quality comparison"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Method"}),(0,t.jsx)(n.th,{children:"Encoding Passes"}),(0,t.jsx)(n.th,{children:"Quality (VMAF)"}),(0,t.jsx)(n.th,{children:"Time"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"3x re-encode (CRF 23)"}),(0,t.jsx)(n.td,{children:"3"}),(0,t.jsx)(n.td,{children:"82/100"}),(0,t.jsx)(n.td,{children:"45min"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Single pass (CRF 23)"}),(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"91/100"}),(0,t.jsx)(n.td,{children:"15min"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Stream copy + 1 encode"}),(0,t.jsx)(n.td,{children:"1"}),(0,t.jsx)(n.td,{children:"95/100"}),(0,t.jsx)(n.td,{children:"18min"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"All stream copy"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"100/100"}),(0,t.jsx)(n.td,{children:"30s"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"anti-pattern-3-ignoring-color-space-conversions",children:"Anti-Pattern 3: Ignoring Color Space Conversions"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Novice thinking"}),': "Just concatenate videos together"']}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Color shifts, mismatched brightness, broken playback."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u274c Concatenate videos with different color spaces\n# clip1.mp4: BT.709 (HD), yuv420p\n# clip2.mp4: BT.601 (SD), yuvj420p (full range)\n# clip3.mp4: BT.2020 (HDR), yuv420p10le\n\n# Create concat list\necho \"file 'clip1.mp4'\" > list.txt\necho \"file 'clip2.mp4'\" >> list.txt\necho \"file 'clip3.mp4'\" >> list.txt\n\n# Concatenate without color normalization\nffmpeg -f concat -safe 0 -i list.txt -c copy output.mp4\n\n# Result: Color shifts between clips, broken HDR metadata\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Different color spaces (BT.601 vs BT.709 vs BT.2020)"}),"\n",(0,t.jsx)(n.li,{children:"Different pixel formats (yuv420p vs yuvj420p)"}),"\n",(0,t.jsx)(n.li,{children:"Different color ranges (limited vs full)"}),"\n",(0,t.jsx)(n.li,{children:"Metadata conflicts"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# \u2705 Normalize color space before concatenation\n\n# Step 1: Analyze color space of each clip\nffprobe -v error -select_streams v:0 \\\n  -show_entries stream=color_space,color_transfer,color_primaries,pix_fmt \\\n  -of default=noprint_wrappers=1 clip1.mp4\n\n# Step 2: Normalize all clips to common color space\n# Target: BT.709 (HD), yuv420p, limited range\n\n# Normalize clip1 (already BT.709)\nffmpeg -i clip1.mp4 -c copy clip1_normalized.mp4\n\n# Normalize clip2 (BT.601 SD \u2192 BT.709 HD)\nffmpeg -i clip2.mp4 \\\n  -vf "scale=in_range=full:out_range=limited,colorspace=bt709:iall=bt601:fast=1" \\\n  -color_primaries bt709 \\\n  -color_trc bt709 \\\n  -colorspace bt709 \\\n  -c:v libx264 -crf 18 -preset medium \\\n  -c:a copy \\\n  clip2_normalized.mp4\n\n# Normalize clip3 (BT.2020 HDR \u2192 BT.709 SDR)\nffmpeg -i clip3.mp4 \\\n  -vf "zscale=t=linear:npl=100,format=gbrpf32le,zscale=p=bt709,tonemap=hable:desat=0,zscale=t=bt709:m=bt709:r=limited,format=yuv420p" \\\n  -color_primaries bt709 \\\n  -color_trc bt709 \\\n  -colorspace bt709 \\\n  -c:v libx264 -crf 18 -preset medium \\\n  -c:a copy \\\n  clip3_normalized.mp4\n\n# Step 3: Concatenate normalized clips\necho "file \'clip1_normalized.mp4\'" > list.txt\necho "file \'clip2_normalized.mp4\'" >> list.txt\necho "file \'clip3_normalized.mp4\'" >> list.txt\n\nffmpeg -f concat -safe 0 -i list.txt -c copy output.mp4\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Color space guide"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Standard"}),(0,t.jsx)(n.th,{children:"Color Space"}),(0,t.jsx)(n.th,{children:"Transfer"}),(0,t.jsx)(n.th,{children:"Primaries"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BT.601"}),(0,t.jsx)(n.td,{children:"SD"}),(0,t.jsx)(n.td,{children:"bt470bg"}),(0,t.jsx)(n.td,{children:"bt470bg"}),(0,t.jsx)(n.td,{children:"Old SD content"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BT.709"}),(0,t.jsx)(n.td,{children:"HD"}),(0,t.jsx)(n.td,{children:"bt709"}),(0,t.jsx)(n.td,{children:"bt709"}),(0,t.jsx)(n.td,{children:"Modern HD/FHD"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BT.2020"}),(0,t.jsx)(n.td,{children:"UHD/HDR"}),(0,t.jsx)(n.td,{children:"smpte2084"}),(0,t.jsx)(n.td,{children:"bt2020"}),(0,t.jsx)(n.td,{children:"4K HDR"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"sRGB"}),(0,t.jsx)(n.td,{children:"Web"}),(0,t.jsx)(n.td,{children:"iec61966-2-1"}),(0,t.jsx)(n.td,{children:"bt709"}),(0,t.jsx)(n.td,{children:"Web delivery"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"anti-pattern-4-poor-audio-sync",children:"Anti-Pattern 4: Poor Audio Sync"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Novice thinking"}),': "Video and audio are separate, just overlay them"']}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Lip sync issues, audio drift, broken playback."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u274c Replace audio without sync consideration\nffmpeg -i video.mp4 -i audio.mp3 \\\n  -map 0:v -map 1:a \\\n  -c:v copy -c:a copy \\\n  output.mp4\n\n# Problems:\n# - Audio duration \u2260 video duration\n# - No audio stretching/compression\n# - Drift over time\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Audio and video have different durations"}),"\n",(0,t.jsx)(n.li,{children:"No timebase synchronization"}),"\n",(0,t.jsx)(n.li,{children:"No drift correction"}),"\n",(0,t.jsx)(n.li,{children:"Ignores original audio sync"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 1"}),": Stretch/compress audio to match video"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# \u2705 Adjust audio speed to match video duration\n\n# Get durations\nVIDEO_DUR=$(ffprobe -v error -show_entries format=duration \\\n  -of default=noprint_wrappers=1:nokey=1 video.mp4)\nAUDIO_DUR=$(ffprobe -v error -show_entries format=duration \\\n  -of default=noprint_wrappers=1:nokey=1 audio.mp3)\n\n# Calculate speed ratio\nRATIO=$(echo "$VIDEO_DUR / $AUDIO_DUR" | bc -l)\n\n# Stretch audio to match video (with pitch correction)\nffmpeg -i video.mp4 -i audio.mp3 \\\n  -filter_complex "[1:a]atempo=${RATIO}[a]" \\\n  -map 0:v -map "[a]" \\\n  -c:v copy -c:a aac -b:a 192k \\\n  output.mp4\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 2"}),": Precise offset and trim"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Sync audio with offset and trim\n\n# Audio starts 0.5s late, trim to match video\nffmpeg -i video.mp4 -itsoffset 0.5 -i audio.mp3 \\\n  -map 0:v -map 1:a \\\n  -shortest \\\n  -c:v copy -c:a aac -b:a 192k \\\n  output.mp4\n\n# -itsoffset: Delay audio by 0.5s\n# -shortest: Trim to shortest stream\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach 3"}),": Mix multiple audio tracks with sync"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# \u2705 Mix dialogue, music, effects with precise timing\n\nffmpeg -i video.mp4 -i dialogue.wav -i music.mp3 -i sfx.wav \\\n  -filter_complex "\n    [1:a]adelay=0|0[dlg];\n    [2:a]volume=0.3,adelay=500|500[mus];\n    [3:a]adelay=1200|1200[sfx];\n    [dlg][mus][sfx]amix=inputs=3:duration=first[a]\n  " \\\n  -map 0:v -map "[a]" \\\n  -c:v copy -c:a aac -b:a 256k \\\n  output.mp4\n\n# adelay: Precise millisecond timing\n# amix: Mix multiple audio streams\n# volume: Normalize levels\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Audio sync checklist"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u25a1 Verify video and audio durations match\n\u25a1 Use -shortest to prevent excess audio\n\u25a1 Apply adelay for precise timing offsets\n\u25a1 Use atempo for speed adjustment (maintains pitch)\n\u25a1 Set audio bitrate appropriately (128k-256k)\n\u25a1 Test lip sync at beginning, middle, end\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"anti-pattern-5-wrong-codecbitrate-for-platform",children:"Anti-Pattern 5: Wrong Codec/Bitrate for Platform"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Novice thinking"}),': "One export settings for everything"']}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Problem"}),": Wasted bandwidth, poor quality, rejected uploads, compatibility issues."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u274c Export everything at 4K 50 Mbps\nffmpeg -i input.mp4 \\\n  -c:v libx264 -b:v 50M -s 3840x2160 \\\n  -c:a aac -b:a 320k \\\n  output.mp4\n\n# For Instagram story: 2 GB file, rejected (max 100 MB)\n# For YouTube: Could use 10 Mbps and look identical\n# For Twitter: Exceeds bitrate limits\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Platform-specific size/bitrate limits"}),"\n",(0,t.jsx)(n.li,{children:"Over-encoding wastes bandwidth"}),"\n",(0,t.jsx)(n.li,{children:"Wrong resolution for platform"}),"\n",(0,t.jsx)(n.li,{children:"Incompatible codecs"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Correct approach"}),": Platform-optimized exports"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"YouTube (recommended settings)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 YouTube 1080p upload\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset slow -crf 18 \\\n  -s 1920x1080 -r 30 \\\n  -pix_fmt yuv420p \\\n  -color_primaries bt709 -color_trc bt709 -colorspace bt709 \\\n  -movflags +faststart \\\n  -c:a aac -b:a 192k -ar 48000 \\\n  youtube_1080p.mp4\n\n# YouTube 4K upload\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset slow -crf 18 \\\n  -s 3840x2160 -r 60 \\\n  -pix_fmt yuv420p \\\n  -movflags +faststart \\\n  -c:a aac -b:a 256k -ar 48000 \\\n  youtube_4k.mp4\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Instagram (Stories, Reels, Feed)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Instagram Story (9:16, max 100 MB, 15s)\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset medium -crf 23 \\\n  -s 1080x1920 -r 30 -t 15 \\\n  -pix_fmt yuv420p \\\n  -movflags +faststart \\\n  -c:a aac -b:a 128k \\\n  instagram_story.mp4\n\n# \u2705 Instagram Reel (9:16, max 90s)\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset medium -crf 23 \\\n  -s 1080x1920 -r 30 -t 90 \\\n  -pix_fmt yuv420p \\\n  -movflags +faststart \\\n  -c:a aac -b:a 128k \\\n  instagram_reel.mp4\n\n# \u2705 Instagram Feed (1:1 or 4:5)\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset medium -crf 23 \\\n  -s 1080x1080 -r 30 \\\n  -pix_fmt yuv420p \\\n  -movflags +faststart \\\n  -c:a aac -b:a 128k \\\n  instagram_feed.mp4\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Twitter/X"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Twitter video (max 512 MB, 2:20)\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset medium -crf 23 \\\n  -s 1280x720 -r 30 -t 140 \\\n  -maxrate 5000k -bufsize 10000k \\\n  -pix_fmt yuv420p \\\n  -movflags +faststart \\\n  -c:a aac -b:a 128k \\\n  twitter.mp4\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"TikTok"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 TikTok (9:16, max 287 MB, 10 min)\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset medium -crf 23 \\\n  -s 1080x1920 -r 30 -t 600 \\\n  -pix_fmt yuv420p \\\n  -movflags +faststart \\\n  -c:a aac -b:a 128k \\\n  tiktok.mp4\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Web (HTML5 video)"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# \u2705 Web optimized (fast load, broad compatibility)\nffmpeg -i input.mp4 \\\n  -c:v libx264 -preset medium -crf 23 \\\n  -s 1920x1080 -r 30 \\\n  -pix_fmt yuv420p \\\n  -profile:v baseline -level 3.0 \\\n  -movflags +faststart \\\n  -c:a aac -b:a 128k -ar 48000 \\\n  web.mp4\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Platform specs table"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Platform"}),(0,t.jsx)(n.th,{children:"Max Size"}),(0,t.jsx)(n.th,{children:"Max Duration"}),(0,t.jsx)(n.th,{children:"Resolution"}),(0,t.jsx)(n.th,{children:"FPS"}),(0,t.jsx)(n.th,{children:"Bitrate"}),(0,t.jsx)(n.th,{children:"Codec"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"YouTube"}),(0,t.jsx)(n.td,{children:"Unlimited"}),(0,t.jsx)(n.td,{children:"Unlimited"}),(0,t.jsx)(n.td,{children:"8K"}),(0,t.jsx)(n.td,{children:"60"}),(0,t.jsx)(n.td,{children:"Auto"}),(0,t.jsx)(n.td,{children:"H.264/VP9"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instagram Story"}),(0,t.jsx)(n.td,{children:"100 MB"}),(0,t.jsx)(n.td,{children:"15s"}),(0,t.jsx)(n.td,{children:"1080x1920"}),(0,t.jsx)(n.td,{children:"30"}),(0,t.jsx)(n.td,{children:"~5 Mbps"}),(0,t.jsx)(n.td,{children:"H.264"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Instagram Reel"}),(0,t.jsx)(n.td,{children:"1 GB"}),(0,t.jsx)(n.td,{children:"90s"}),(0,t.jsx)(n.td,{children:"1080x1920"}),(0,t.jsx)(n.td,{children:"30"}),(0,t.jsx)(n.td,{children:"~8 Mbps"}),(0,t.jsx)(n.td,{children:"H.264"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Twitter"}),(0,t.jsx)(n.td,{children:"512 MB"}),(0,t.jsx)(n.td,{children:"2:20"}),(0,t.jsx)(n.td,{children:"1920x1080"}),(0,t.jsx)(n.td,{children:"60"}),(0,t.jsx)(n.td,{children:"5 Mbps"}),(0,t.jsx)(n.td,{children:"H.264"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"TikTok"}),(0,t.jsx)(n.td,{children:"287 MB"}),(0,t.jsx)(n.td,{children:"10min"}),(0,t.jsx)(n.td,{children:"1080x1920"}),(0,t.jsx)(n.td,{children:"30"}),(0,t.jsx)(n.td,{children:"~4 Mbps"}),(0,t.jsx)(n.td,{children:"H.264"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"LinkedIn"}),(0,t.jsx)(n.td,{children:"5 GB"}),(0,t.jsx)(n.td,{children:"10min"}),(0,t.jsx)(n.td,{children:"1920x1080"}),(0,t.jsx)(n.td,{children:"30"}),(0,t.jsx)(n.td,{children:"5 Mbps"}),(0,t.jsx)(n.td,{children:"H.264"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Web"}),(0,t.jsx)(n.td,{children:"Varies"}),(0,t.jsx)(n.td,{children:"Varies"}),(0,t.jsx)(n.td,{children:"1920x1080"}),(0,t.jsx)(n.td,{children:"30"}),(0,t.jsx)(n.td,{children:"2-5 Mbps"}),(0,t.jsx)(n.td,{children:"H.264"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Export optimization checklist"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u25a1 Use -movflags +faststart for web (progressive download)\n\u25a1 Use -pix_fmt yuv420p for broad compatibility\n\u25a1 Set -r 30 for most platforms (avoid variable framerate)\n\u25a1 Use -preset slow for final exports (better quality)\n\u25a1 Use -preset ultrafast for drafts\n\u25a1 Apply -maxrate and -bufsize for streaming\n\u25a1 Test playback on target platform before bulk export\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"production-checklist",children:"Production Checklist"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"\u25a1 Align cuts to keyframes (or two-pass seek)\n\u25a1 Chain operations in single FFmpeg command\n\u25a1 Normalize color spaces before concatenating\n\u25a1 Verify audio/video sync (test at multiple points)\n\u25a1 Use platform-specific export presets\n\u25a1 Apply -movflags +faststart for web delivery\n\u25a1 Set proper color metadata (bt709 for HD)\n\u25a1 Test output file on target platform\n\u25a1 Keep lossless intermediate files (ProRes, FFV1)\n\u25a1 Use hardware acceleration for batch jobs (NVENC, VideoToolbox)\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use-vs-avoid",children:"When to Use vs Avoid"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Scenario"}),(0,t.jsx)(n.th,{children:"Appropriate?"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Automated video pipeline (script \u2192 video)"}),(0,t.jsx)(n.td,{children:"\u2705 Yes - FFmpeg automation"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Batch process 100 videos"}),(0,t.jsx)(n.td,{children:"\u2705 Yes - parallel FFmpeg jobs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Trim/cut clips programmatically"}),(0,t.jsx)(n.td,{children:"\u2705 Yes - precise cutting"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Add subtitles to videos"}),(0,t.jsx)(n.td,{children:"\u2705 Yes - burn or soft subs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Color grade footage"}),(0,t.jsx)(n.td,{children:"\u26a0\ufe0f Limited - basic only"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Multi-cam editing"}),(0,t.jsx)(n.td,{children:"\u274c No - use DaVinci Resolve"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Motion graphics"}),(0,t.jsx)(n.td,{children:"\u274c No - use After Effects"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Real-time preview editing"}),(0,t.jsx)(n.td,{children:"\u274c No - use Premiere/Resolve"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/references/ffmpeg-guide.md"})," - Complete FFmpeg command reference"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/references/timeline-editing.md"})," - Timeline concepts, multi-track editing"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"/references/export-optimization.md"})," - Platform-specific export settings"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scripts/video_editor.py"})," - Cut, trim, concatenate, transitions, effects"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"scripts/batch_processor.py"})," - Parallel batch video processing"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"This skill guides"}),": Video editing | FFmpeg | Timeline editing | Transitions | Export optimization | Audio mixing | Color grading | Automated video production"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);