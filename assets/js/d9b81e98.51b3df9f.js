"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[58677],{28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>c});var t=r(96540);const i={},s=t.createContext(i);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:n},e.children)}},77815:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"skills/mcp_creator/index","title":"\ud83d\ude80 Mcp Creator","description":"Expert MCP (Model Context Protocol) server developer creating safe, performant, production-ready servers with proper security, error handling, and developer experience. Activate on \'create MCP\', \'MCP server\', \'build MCP\', \'custom tool server\', \'MCP development\', \'Model Context Protocol\'. NOT for using existing MCPs (just invoke them), general API development (use backend-architect), or skills/agents without external state (use skill-coach/agent-creator).","source":"@site/docs/skills/mcp_creator/index.md","sourceDirName":"skills/mcp_creator","slug":"/skills/mcp_creator/","permalink":"/docs/skills/mcp_creator/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Mcp Creator","sidebar_position":1}}');var i=r(74848),s=r(28453);const o={sidebar_label:"Mcp Creator",sidebar_position:1},c="\ud83d\ude80 Mcp Creator",l={},a=[{value:"Allowed Tools",id:"allowed-tools",level:2},{value:"Tags",id:"tags",level:2},{value:"\ud83e\udd1d Pairs Great With",id:"-pairs-great-with",level:2},{value:"References",id:"references",level:2},{value:"When to Use This Skill",id:"when-to-use-this-skill",level:2},{value:"Quick Start",id:"quick-start",level:2},{value:"MCP Architecture Overview",id:"mcp-architecture-overview",level:2},{value:"Core MCP Server Template",id:"core-mcp-server-template",level:2},{value:"Tool Design Principles",id:"tool-design-principles",level:2},{value:"1. Clear Naming",id:"1-clear-naming",level:3},{value:"2. Precise Input Schemas",id:"2-precise-input-schemas",level:3},{value:"3. Structured Outputs",id:"3-structured-outputs",level:3},{value:"Security Hardening (CRITICAL)",id:"security-hardening-critical",level:2},{value:"Input Validation",id:"input-validation",level:3},{value:"Secret Management",id:"secret-management",level:3},{value:"Rate Limiting",id:"rate-limiting",level:3},{value:"Authentication Boundaries",id:"authentication-boundaries",level:3},{value:"Error Handling Patterns",id:"error-handling-patterns",level:2},{value:"Structured Error Responses",id:"structured-error-responses",level:3},{value:"Graceful Degradation",id:"graceful-degradation",level:3},{value:"Performance Optimization",id:"performance-optimization",level:2},{value:"Connection Pooling",id:"connection-pooling",level:3},{value:"Caching Layer",id:"caching-layer",level:3},{value:"Anti-Patterns",id:"anti-patterns",level:2},{value:"Anti-Pattern: No Input Validation",id:"anti-pattern-no-input-validation",level:3},{value:"Anti-Pattern: Secrets in Code",id:"anti-pattern-secrets-in-code",level:3},{value:"Anti-Pattern: No Rate Limiting",id:"anti-pattern-no-rate-limiting",level:3},{value:"Anti-Pattern: Synchronous Blocking",id:"anti-pattern-synchronous-blocking",level:3},{value:"Anti-Pattern: Silent Failures",id:"anti-pattern-silent-failures",level:3},{value:"Anti-Pattern: No Timeouts",id:"anti-pattern-no-timeouts",level:3},{value:"Testing Your MCP",id:"testing-your-mcp",level:2},{value:"Using MCP Inspector",id:"using-mcp-inspector",level:3},{value:"Unit Testing",id:"unit-testing",level:3},{value:"Decision Tree: When to Add to MCP",id:"decision-tree-when-to-add-to-mcp",level:2},{value:"Success Metrics",id:"success-metrics",level:2},{value:"Reference Files",id:"reference-files",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"-mcp-creator",children:"\ud83d\ude80 Mcp Creator"})}),"\n",(0,i.jsx)(n.p,{children:"Expert MCP (Model Context Protocol) server developer creating safe, performant, production-ready servers with proper security, error handling, and developer experience. Activate on 'create MCP', 'MCP server', 'build MCP', 'custom tool server', 'MCP development', 'Model Context Protocol'. NOT for using existing MCPs (just invoke them), general API development (use backend-architect), or skills/agents without external state (use skill-coach/agent-creator)."}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"allowed-tools",children:"Allowed Tools"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Read, Write, Edit, Bash, Grep, Glob, WebSearch, WebFetch\n"})}),"\n",(0,i.jsx)(n.h2,{id:"tags",children:"Tags"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"mcp"})," ",(0,i.jsx)(n.code,{children:"model-context-protocol"})," ",(0,i.jsx)(n.code,{children:"tools"})," ",(0,i.jsx)(n.code,{children:"integration"})," ",(0,i.jsx)(n.code,{children:"servers"})]}),"\n",(0,i.jsx)(n.h2,{id:"-pairs-great-with",children:"\ud83e\udd1d Pairs Great With"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/skills/agent_creator",children:"Agent Creator"})}),": Skills that use the MCP tools"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.a,{href:"/docs/skills/security_auditor",children:"Security Auditor"})}),": Secure MCP server development"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./references/architecture-patterns",children:"MCP Architecture Patterns"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./references/security-hardening",children:"MCP Security Hardening Guide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./references/testing-debugging",children:"MCP Testing and Debugging Guide"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"./references/tool-design",children:"MCP Tool Design Patterns"})}),"\n"]}),"\n",(0,i.jsx)(n.h1,{id:"mcp-creator",children:"MCP Creator"}),"\n",(0,i.jsx)(n.p,{children:"Expert in building production-ready Model Context Protocol servers. Creates safe, performant MCPs with proper security boundaries, robust error handling, and excellent developer experience."}),"\n",(0,i.jsx)(n.h2,{id:"when-to-use-this-skill",children:"When to Use This Skill"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Use MCP when you need:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"External API integration with authentication"}),"\n",(0,i.jsx)(n.li,{children:"Stateful connections (databases, WebSockets, sessions)"}),"\n",(0,i.jsx)(n.li,{children:"Multiple related tools sharing configuration"}),"\n",(0,i.jsx)(n.li,{children:"Security boundaries between Claude and external services"}),"\n",(0,i.jsx)(n.li,{children:"Connection pooling and resource management"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Do NOT use MCP for:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Pure domain expertise (use Skill)"}),"\n",(0,i.jsx)(n.li,{children:"Multi-step orchestration (use Agent)"}),"\n",(0,i.jsx)(n.li,{children:"Local stateless operations (use Script)"}),"\n",(0,i.jsx)(n.li,{children:"Simple file processing (use Claude's built-in tools)"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Scaffold new MCP server\nnpx @modelcontextprotocol/create-server my-mcp-server\n\n# Install SDK\nnpm install @modelcontextprotocol/sdk\n\n# Test with inspector\nnpx @modelcontextprotocol/inspector\n"})}),"\n",(0,i.jsx)(n.h2,{id:"mcp-architecture-overview",children:"MCP Architecture Overview"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        Claude                               \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2502 MCP Protocol (JSON-RPC)\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    MCP Server                               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502   Tools     \u2502  \u2502  Resources  \u2502  \u2502     Prompts         \u2502 \u2502\n\u2502  \u2502 (actions)   \u2502  \u2502 (read-only) \u2502  \u2502 (templates)         \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                          \u2502                                  \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502           Auth / Rate Limiting / Caching              \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                           \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    External Services                         \u2502\n\u2502         APIs \u2502 Databases \u2502 File Systems \u2502 WebSockets         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.h2,{id:"core-mcp-server-template",children:"Core MCP Server Template"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { Server } from "@modelcontextprotocol/sdk/server/index.js";\nimport { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";\nimport {\n  CallToolRequestSchema,\n  ListToolsRequestSchema,\n  ErrorCode,\n  McpError,\n} from "@modelcontextprotocol/sdk/types.js";\n\nconst server = new Server(\n  { name: "my-mcp-server", version: "1.0.0" },\n  { capabilities: { tools: {} } }\n);\n\n// Tool definitions\nserver.setRequestHandler(ListToolsRequestSchema, async () => ({\n  tools: [\n    {\n      name: "my_tool",\n      description: "Clear description of what this tool does",\n      inputSchema: {\n        type: "object",\n        properties: {\n          input: { type: "string", description: "Input description" },\n        },\n        required: ["input"],\n      },\n    },\n  ],\n}));\n\n// Tool implementation\nserver.setRequestHandler(CallToolRequestSchema, async (request) => {\n  const { name, arguments: args } = request.params;\n\n  if (name === "my_tool") {\n    try {\n      const result = await processInput(args.input);\n      return { content: [{ type: "text", text: JSON.stringify(result) }] };\n    } catch (error) {\n      throw new McpError(ErrorCode.InternalError, error.message);\n    }\n  }\n\n  throw new McpError(ErrorCode.MethodNotFound, `Unknown tool: ${name}`);\n});\n\n// Start server\nconst transport = new StdioServerTransport();\nawait server.connect(transport);\n'})}),"\n",(0,i.jsx)(n.h2,{id:"tool-design-principles",children:"Tool Design Principles"}),"\n",(0,i.jsx)(n.h3,{id:"1-clear-naming",children:"1. Clear Naming"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// \u2705 Good: Action-oriented, specific\n"get_user_profile"\n"create_issue"\n"analyze_sentiment"\n\n// \u274c Bad: Vague, generic\n"process"\n"do_thing"\n"handle"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"2-precise-input-schemas",children:"2. Precise Input Schemas"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// \u2705 Good: Typed, constrained, documented\n{\n  type: "object",\n  properties: {\n    userId: { type: "string", pattern: "^[a-f0-9]{24}$" },\n    action: { type: "string", enum: ["read", "write", "delete"] },\n    limit: { type: "integer", minimum: 1, maximum: 100, default: 10 }\n  },\n  required: ["userId", "action"],\n  additionalProperties: false\n}\n\n// \u274c Bad: Untyped, unconstrained\n{ type: "object" }\n'})}),"\n",(0,i.jsx)(n.h3,{id:"3-structured-outputs",children:"3. Structured Outputs"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// \u2705 Good: Consistent structure\nreturn {\n  content: [{\n    type: "text",\n    text: JSON.stringify({\n      success: true,\n      data: result,\n      metadata: { requestId, timestamp }\n    }, null, 2)\n  }]\n};\n\n// \u274c Bad: Inconsistent, unstructured\nreturn { content: [{ type: "text", text: "done" }] };\n'})}),"\n",(0,i.jsx)(n.h2,{id:"security-hardening-critical",children:"Security Hardening (CRITICAL)"}),"\n",(0,i.jsx)(n.h3,{id:"input-validation",children:"Input Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { z } from "zod";\n\nconst UserInputSchema = z.object({\n  userId: z.string().regex(/^[a-f0-9]{24}$/),\n  email: z.string().email(),\n  query: z.string().max(1000).refine(\n    (q) => !q.includes("--") && !q.includes(";"),\n    { message: "Invalid characters in query" }\n  ),\n});\n\nasync function handleTool(args: unknown) {\n  const validated = UserInputSchema.parse(args); // Throws on invalid\n  // Safe to use validated data\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"secret-management",children:"Secret Management"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// \u2705 Good: Environment variables\nconst API_KEY = process.env.SERVICE_API_KEY;\nif (!API_KEY) throw new Error("SERVICE_API_KEY required");\n\n// \u2705 Good: Secret manager integration\nconst secret = await secretManager.getSecret("service-api-key");\n\n// \u274c NEVER: Hardcoded secrets\nconst API_KEY = "sk-abc123..."; // SECURITY VULNERABILITY\n'})}),"\n",(0,i.jsx)(n.h3,{id:"rate-limiting",children:"Rate Limiting"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'class RateLimiter {\n  private requests: Map<string, number[]> = new Map();\n\n  canProceed(key: string, limit: number, windowMs: number): boolean {\n    const now = Date.now();\n    const timestamps = this.requests.get(key) || [];\n    const recent = timestamps.filter(t => now - t < windowMs);\n\n    if (recent.length >= limit) return false;\n\n    recent.push(now);\n    this.requests.set(key, recent);\n    return true;\n  }\n}\n\nconst limiter = new RateLimiter();\n\n// In tool handler\nif (!limiter.canProceed(userId, 100, 60000)) {\n  throw new McpError(ErrorCode.InvalidRequest, "Rate limit exceeded");\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"authentication-boundaries",children:"Authentication Boundaries"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// Validate credentials before any operation\nasync function withAuth<T>(\n  credentials: Credentials,\n  operation: () => Promise<T>\n): Promise<T> {\n  if (!await validateCredentials(credentials)) {\n    throw new McpError(ErrorCode.InvalidRequest, "Invalid credentials");\n  }\n  return operation();\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"error-handling-patterns",children:"Error Handling Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"structured-error-responses",children:"Structured Error Responses"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// Define error types\nenum ServiceError {\n  NOT_FOUND = "NOT_FOUND",\n  UNAUTHORIZED = "UNAUTHORIZED",\n  RATE_LIMITED = "RATE_LIMITED",\n  VALIDATION_ERROR = "VALIDATION_ERROR",\n  EXTERNAL_SERVICE_ERROR = "EXTERNAL_SERVICE_ERROR",\n}\n\n// Map to MCP errors\nfunction toMcpError(error: unknown): McpError {\n  if (error instanceof z.ZodError) {\n    return new McpError(\n      ErrorCode.InvalidParams,\n      `Validation error: ${error.errors.map(e => e.message).join(", ")}`\n    );\n  }\n\n  if (error instanceof ServiceError) {\n    return new McpError(ErrorCode.InternalError, error.message);\n  }\n\n  return new McpError(ErrorCode.InternalError, "Unknown error occurred");\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"graceful-degradation",children:"Graceful Degradation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'async function fetchWithFallback<T>(\n  primary: () => Promise<T>,\n  fallback: () => Promise<T>,\n  options: { retries?: number; timeout?: number } = {}\n): Promise<T> {\n  const { retries = 3, timeout = 5000 } = options;\n\n  for (let i = 0; i < retries; i++) {\n    try {\n      return await Promise.race([\n        primary(),\n        new Promise<never>((_, reject) =>\n          setTimeout(() => reject(new Error("Timeout")), timeout)\n        ),\n      ]);\n    } catch (error) {\n      if (i === retries - 1) {\n        console.error("Primary failed, trying fallback:", error);\n        return fallback();\n      }\n      await new Promise(r => setTimeout(r, 1000 * (i + 1))); // Backoff\n    }\n  }\n  throw new Error("All retries exhausted");\n}\n'})}),"\n",(0,i.jsx)(n.h2,{id:"performance-optimization",children:"Performance Optimization"}),"\n",(0,i.jsx)(n.h3,{id:"connection-pooling",children:"Connection Pooling"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'// PostgreSQL pool\nimport { Pool } from "pg";\n\nconst pool = new Pool({\n  connectionString: process.env.DATABASE_URL,\n  max: 20,\n  idleTimeoutMillis: 30000,\n  connectionTimeoutMillis: 2000,\n});\n\n// Reuse connections\nasync function query(sql: string, params: unknown[]) {\n  const client = await pool.connect();\n  try {\n    return await client.query(sql, params);\n  } finally {\n    client.release();\n  }\n}\n'})}),"\n",(0,i.jsx)(n.h3,{id:"caching-layer",children:"Caching Layer"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"class Cache<T> {\n  private store: Map<string, { value: T; expires: number }> = new Map();\n\n  get(key: string): T | undefined {\n    const entry = this.store.get(key);\n    if (!entry) return undefined;\n    if (Date.now() > entry.expires) {\n      this.store.delete(key);\n      return undefined;\n    }\n    return entry.value;\n  }\n\n  set(key: string, value: T, ttlMs: number): void {\n    this.store.set(key, { value, expires: Date.now() + ttlMs });\n  }\n}\n\nconst cache = new Cache<ApiResponse>();\n\nasync function fetchWithCache(url: string): Promise<ApiResponse> {\n  const cached = cache.get(url);\n  if (cached) return cached;\n\n  const response = await fetch(url);\n  const data = await response.json();\n  cache.set(url, data, 300000); // 5 min TTL\n  return data;\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"anti-patterns",children:"Anti-Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"anti-pattern-no-input-validation",children:"Anti-Pattern: No Input Validation"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What it looks like"}),": Passing user input directly to APIs/databases\n",(0,i.jsx)(n.strong,{children:"Why wrong"}),": SQL injection, command injection, data corruption\n",(0,i.jsx)(n.strong,{children:"Instead"}),": Validate with Zod, sanitize inputs, use parameterized queries"]}),"\n",(0,i.jsx)(n.h3,{id:"anti-pattern-secrets-in-code",children:"Anti-Pattern: Secrets in Code"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What it looks like"}),": Hardcoded API keys, tokens in source\n",(0,i.jsx)(n.strong,{children:"Why wrong"}),": Secrets leak via git, logs, error messages\n",(0,i.jsx)(n.strong,{children:"Instead"}),": Environment variables, secret managers, encrypted config"]}),"\n",(0,i.jsx)(n.h3,{id:"anti-pattern-no-rate-limiting",children:"Anti-Pattern: No Rate Limiting"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What it looks like"}),": Unlimited API calls to external services\n",(0,i.jsx)(n.strong,{children:"Why wrong"}),": Cost explosion, API bans, resource exhaustion\n",(0,i.jsx)(n.strong,{children:"Instead"}),": Token bucket, sliding window, or adaptive rate limiting"]}),"\n",(0,i.jsx)(n.h3,{id:"anti-pattern-synchronous-blocking",children:"Anti-Pattern: Synchronous Blocking"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What it looks like"}),": ",(0,i.jsx)(n.code,{children:"sleep()"}),", blocking I/O in async handlers\n",(0,i.jsx)(n.strong,{children:"Why wrong"}),": Blocks all requests, causes timeouts\n",(0,i.jsx)(n.strong,{children:"Instead"}),": Proper async/await, non-blocking patterns"]}),"\n",(0,i.jsx)(n.h3,{id:"anti-pattern-silent-failures",children:"Anti-Pattern: Silent Failures"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What it looks like"}),": Empty catch blocks, swallowed errors\n",(0,i.jsx)(n.strong,{children:"Why wrong"}),": Debugging impossible, data corruption undetected\n",(0,i.jsx)(n.strong,{children:"Instead"}),": Structured error handling, logging, proper propagation"]}),"\n",(0,i.jsx)(n.h3,{id:"anti-pattern-no-timeouts",children:"Anti-Pattern: No Timeouts"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"What it looks like"}),": Waiting indefinitely for external services\n",(0,i.jsx)(n.strong,{children:"Why wrong"}),": Hung connections, resource leaks\n",(0,i.jsx)(n.strong,{children:"Instead"}),": Explicit timeouts on all external calls, circuit breakers"]}),"\n",(0,i.jsx)(n.h2,{id:"testing-your-mcp",children:"Testing Your MCP"}),"\n",(0,i.jsx)(n.h3,{id:"using-mcp-inspector",children:"Using MCP Inspector"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Start inspector\nnpx @modelcontextprotocol/inspector\n\n# In another terminal, start your server\nnode dist/index.js\n\n# Connect inspector to your server\n# Test tool invocations manually\n"})}),"\n",(0,i.jsx)(n.h3,{id:"unit-testing",children:"Unit Testing"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { describe, it, expect } from "vitest";\n\ndescribe("my_tool", () => {\n  it("should validate input", async () => {\n    await expect(\n      handleTool({ userId: "invalid" })\n    ).rejects.toThrow("Invalid userId format");\n  });\n\n  it("should return structured output", async () => {\n    const result = await handleTool({ userId: "507f1f77bcf86cd799439011" });\n    expect(result).toHaveProperty("success", true);\n    expect(result).toHaveProperty("data");\n  });\n});\n'})}),"\n",(0,i.jsx)(n.h2,{id:"decision-tree-when-to-add-to-mcp",children:"Decision Tree: When to Add to MCP"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Does this tool need...\n\u251c\u2500\u2500 External API with auth? \u2192 Add to MCP\n\u251c\u2500\u2500 Persistent state/connection? \u2192 Add to MCP\n\u251c\u2500\u2500 Rate limiting for external service? \u2192 Add to MCP\n\u251c\u2500\u2500 Shared credentials with other tools? \u2192 Add to MCP\n\u251c\u2500\u2500 Security boundary from Claude? \u2192 Add to MCP\n\u2514\u2500\u2500 None of the above? \u2192 Consider Script instead\n"})}),"\n",(0,i.jsx)(n.h2,{id:"success-metrics",children:"Success Metrics"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Metric"}),(0,i.jsx)(n.th,{children:"Target"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Tool latency P95"}),(0,i.jsx)(n.td,{children:"< 500ms"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Error rate"}),(0,i.jsx)(n.td,{children:"< 1%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Input validation coverage"}),(0,i.jsx)(n.td,{children:"100%"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Secret exposure"}),(0,i.jsx)(n.td,{children:"0"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Rate limit violations"}),(0,i.jsx)(n.td,{children:"0"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"reference-files",children:"Reference Files"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"File"}),(0,i.jsx)(n.th,{children:"Contents"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"references/architecture-patterns.md"})}),(0,i.jsx)(n.td,{children:"Transport layers, server lifecycle, resource management"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"references/tool-design.md"})}),(0,i.jsx)(n.td,{children:"Schema patterns, naming conventions, output formats"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"references/security-hardening.md"})}),(0,i.jsx)(n.td,{children:"Complete OWASP-aligned security checklist"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"references/error-handling.md"})}),(0,i.jsx)(n.td,{children:"Error types, recovery strategies, logging"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"references/testing-debugging.md"})}),(0,i.jsx)(n.td,{children:"Inspector usage, unit/integration tests"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"references/performance.md"})}),(0,i.jsx)(n.td,{children:"Caching, pooling, async patterns"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"templates/"})}),(0,i.jsx)(n.td,{children:"Production-ready server templates"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Creates"}),": Safe, performant MCP servers | Robust tool interfaces | Security-hardened integrations"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Use with"}),": security-auditor (security review) | site-reliability-engineer (deployment) | agent-creator (when MCP supports agents)"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);