"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[92626],{28453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var o=i(96540);const t={},r=o.createContext(t);function s(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:s(e.components),o.createElement(r.Provider,{value:n},e.children)}},70656:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>m,frontMatter:()=>s,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"skills/photo_composition_critic/references/analysis-scripts","title":"Analysis Scripts","description":"Python implementations for photo critique.","source":"@site/docs/skills/photo_composition_critic/references/analysis-scripts.md","sourceDirName":"skills/photo_composition_critic/references","slug":"/skills/photo_composition_critic/references/analysis-scripts","permalink":"/docs/skills/photo_composition_critic/references/analysis-scripts","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Analysis Scripts","sidebar_label":"Analysis Scripts","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Photo Composition Critic","permalink":"/docs/skills/photo_composition_critic/"},"next":{"title":"Color Theory","permalink":"/docs/skills/photo_composition_critic/references/color-theory"}}');var t=i(74848),r=i(28453);const s={title:"Analysis Scripts",sidebar_label:"Analysis Scripts",sidebar_position:1},a="Analysis Scripts",l={},c=[{value:"Multi-Model Ensemble Scorer",id:"multi-model-ensemble-scorer",level:2},{value:"MCP Server for Photo Critique",id:"mcp-server-for-photo-critique",level:2}];function p(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"analysis-scripts",children:"Analysis Scripts"})}),"\n",(0,t.jsx)(n.p,{children:"Python implementations for photo critique."}),"\n",(0,t.jsx)(n.h2,{id:"multi-model-ensemble-scorer",children:"Multi-Model Ensemble Scorer"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'#!/usr/bin/env python3\n"""\nphoto_critic.py - Multi-model image aesthetic analysis\nRequires: torch, transformers, clip, pillow\n"""\n\nimport torch\nimport clip\nfrom PIL import Image\nfrom pathlib import Path\n\nclass PhotoCritic:\n    def __init__(self):\n        self.device = "cuda" if torch.cuda.is_available() else "cpu"\n        self._load_models()\n\n    def _load_models(self):\n        # CLIP for embeddings\n        self.clip_model, self.clip_preprocess = clip.load("ViT-L/14", self.device)\n        # LAION aesthetic predictor (simple MLP)\n        self.aesthetic_model = self._load_aesthetic_mlp()\n        # NIMA model\n        self.nima_model = self._load_nima()\n\n    def analyze(self, image_path: str) -> dict:\n        """Full aesthetic analysis of an image."""\n        img = Image.open(image_path).convert("RGB")\n\n        results = {\n            "laion_aesthetic": self._laion_score(img),\n            "nima_technical": self._nima_score(img, "technical"),\n            "nima_aesthetic": self._nima_score(img, "aesthetic"),\n            "composition": self._analyze_composition(img),\n            "color_harmony": self._analyze_color(img),\n            "technical_quality": self._analyze_technical(img),\n        }\n\n        results["overall"] = self._compute_overall(results)\n        results["critique"] = self._generate_critique(results)\n\n        return results\n\n    def _analyze_composition(self, img) -> dict:\n        """Rule of thirds, golden ratio, visual weight analysis."""\n        import numpy as np\n\n        arr = np.array(img.convert("L"))\n\n        # Find visual weight center (centroid of intensity)\n        y_coords, x_coords = np.mgrid[0:arr.shape[0], 0:arr.shape[1]]\n        total = arr.sum()\n        center_y = (y_coords * arr).sum() / total\n        center_x = (x_coords * arr).sum() / total\n\n        # Normalize to 0-1\n        norm_y = center_y / arr.shape[0]\n        norm_x = center_x / arr.shape[1]\n\n        # Distance from rule of thirds intersections\n        thirds_points = [(1/3, 1/3), (2/3, 1/3), (1/3, 2/3), (2/3, 2/3)]\n        min_thirds_dist = min(\n            ((norm_x - px)**2 + (norm_y - py)**2)**0.5\n            for px, py in thirds_points\n        )\n\n        # Golden ratio analysis\n        phi = 0.618\n        golden_points = [(phi, phi), (1-phi, phi), (phi, 1-phi), (1-phi, 1-phi)]\n        min_golden_dist = min(\n            ((norm_x - px)**2 + (norm_y - py)**2)**0.5\n            for px, py in golden_points\n        )\n\n        return {\n            "visual_center": (norm_x, norm_y),\n            "thirds_alignment": max(0, 1 - min_thirds_dist * 3),\n            "golden_alignment": max(0, 1 - min_golden_dist * 3),\n            "balance": 1 - abs(norm_x - 0.5) - abs(norm_y - 0.5)\n        }\n\n    def _generate_critique(self, results: dict) -> str:\n        """Generate human-readable critique from analysis."""\n        critique_parts = []\n\n        # Overall impression\n        overall = results["overall"]\n        if overall >= 8:\n            critique_parts.append("Exceptional image with professional-level execution.")\n        elif overall >= 6.5:\n            critique_parts.append("Strong image with good technical and aesthetic qualities.")\n        elif overall >= 5:\n            critique_parts.append("Competent image with room for improvement.")\n        else:\n            critique_parts.append("Image needs significant work on fundamentals.")\n\n        # Composition feedback\n        comp = results["composition"]\n        if comp["thirds_alignment"] > 0.7:\n            critique_parts.append("Strong rule-of-thirds placement.")\n        elif comp["golden_alignment"] > 0.7:\n            critique_parts.append("Nice golden ratio composition.")\n        elif comp["balance"] < 0.3:\n            critique_parts.append("Consider rebalancing - visual weight is off-center.")\n\n        # Color feedback\n        color = results["color_harmony"]\n        critique_parts.append(f"Color scheme: {color[\'harmony_type\']} "\n                            f"(harmony score: {color[\'score\']:.2f})")\n\n        return " ".join(critique_parts)\n'})}),"\n",(0,t.jsx)(n.h2,{id:"mcp-server-for-photo-critique",children:"MCP Server for Photo Critique"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"#!/usr/bin/env python3\n\"\"\"\nphoto_critic_mcp.py - MCP server for photo composition analysis\n\"\"\"\n\nfrom mcp.server import Server\nfrom mcp.types import Tool, TextContent\nimport asyncio\n\napp = Server(\"photo-critic\")\n\n@app.tool()\nasync def analyze_composition(image_path: str) -> str:\n    \"\"\"Analyze image composition using ML models and classical theory.\"\"\"\n    from photo_critic import PhotoCritic\n\n    critic = PhotoCritic()\n    results = critic.analyze(image_path)\n\n    return f\"\"\"\n## Aesthetic Analysis Results\n\n**Overall Score: {results['overall']:.1f}/10**\n\n### Model Scores\n- LAION Aesthetic: {results['laion_aesthetic']:.2f}\n- NIMA Technical: {results['nima_technical']:.2f}\n- NIMA Aesthetic: {results['nima_aesthetic']:.2f}\n\n### Composition Analysis\n- Rule of Thirds Alignment: {results['composition']['thirds_alignment']:.0%}\n- Golden Ratio Alignment: {results['composition']['golden_alignment']:.0%}\n- Visual Balance: {results['composition']['balance']:.0%}\n\n### Color Analysis\n- Harmony Type: {results['color_harmony']['harmony_type']}\n- Harmony Score: {results['color_harmony']['score']:.2f}\n\n### Critique\n{results['critique']}\n\"\"\"\n\n@app.tool()\nasync def compare_crops(image_path: str, crops: list[dict]) -> str:\n    \"\"\"Compare multiple crop options for an image.\n\n    crops: List of {x, y, width, height} dicts defining crop regions\n    \"\"\"\n    from photo_critic import PhotoCritic\n    from PIL import Image\n\n    critic = PhotoCritic()\n    img = Image.open(image_path)\n\n    results = []\n    for i, crop in enumerate(crops):\n        cropped = img.crop((\n            crop['x'], crop['y'],\n            crop['x'] + crop['width'],\n            crop['y'] + crop['height']\n        ))\n        temp_path = f\"/tmp/crop_{i}.jpg\"\n        cropped.save(temp_path)\n        score = critic.analyze(temp_path)['overall']\n        results.append((i, score, crop))\n\n    results.sort(key=lambda x: x[1], reverse=True)\n\n    output = \"## Crop Comparison\\n\\n\"\n    for rank, (idx, score, crop) in enumerate(results, 1):\n        output += f\"{rank}. Crop {idx}: **{score:.1f}/10** \"\n        output += f\"({crop['width']}x{crop['height']} at {crop['x']},{crop['y']})\\n\"\n\n    return output\n\nif __name__ == \"__main__\":\n    asyncio.run(app.run())\n"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);