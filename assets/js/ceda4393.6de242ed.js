"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[77177],{27985:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"skills/crisis_response_protocol/index","title":"\ud83c\udfe0 Crisis Response Protocol","description":"Handle mental health crisis situations in AI coaching safely. Use when implementing crisis detection, safety protocols, emergency escalation, or suicide prevention features. Activates for crisis keywords, safety planning, hotline integration, and risk assessment.","source":"@site/docs/skills/crisis_response_protocol/index.md","sourceDirName":"skills/crisis_response_protocol","slug":"/skills/crisis_response_protocol/","permalink":"/docs/skills/crisis_response_protocol/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Crisis Response Protocol","sidebar_position":1}}');var t=s(74848),r=s(28453);const o={sidebar_label:"Crisis Response Protocol",sidebar_position:1},a="\ud83c\udfe0 Crisis Response Protocol",c={},l=[{value:"Allowed Tools",id:"allowed-tools",level:2},{value:"Tags",id:"tags",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Critical Safety Principle",id:"critical-safety-principle",level:2},{value:"Crisis Detection",id:"crisis-detection",level:2},{value:"Risk Indicator Categories",id:"risk-indicator-categories",level:3},{value:"Detection Implementation",id:"detection-implementation",level:3},{value:"Tiered Response Protocol",id:"tiered-response-protocol",level:2},{value:"Level 1: Continue Conversation (No Crisis)",id:"level-1-continue-conversation-no-crisis",level:3},{value:"Level 2: Gentle Check-In (Low Risk)",id:"level-2-gentle-check-in-low-risk",level:3},{value:"Level 3: Safety Resources (Medium Risk)",id:"level-3-safety-resources-medium-risk",level:3},{value:"Level 4: Crisis Protocol (High Risk)",id:"level-4-crisis-protocol-high-risk",level:3},{value:"Level 5: Emergency Escalation (Critical)",id:"level-5-emergency-escalation-critical",level:3},{value:"Implementation in Chat Handler",id:"implementation-in-chat-handler",level:2},{value:"Safety Resources Database",id:"safety-resources-database",level:2},{value:"Emergency Contact System",id:"emergency-contact-system",level:2},{value:"Safety Guardrails for AI",id:"safety-guardrails-for-ai",level:2},{value:"Audit &amp; Compliance",id:"audit--compliance",level:2},{value:"Testing Crisis Features",id:"testing-crisis-features",level:2},{value:"References",id:"references",level:2}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"-crisis-response-protocol",children:"\ud83c\udfe0 Crisis Response Protocol"})}),"\n",(0,t.jsx)(n.p,{children:"Handle mental health crisis situations in AI coaching safely. Use when implementing crisis detection, safety protocols, emergency escalation, or suicide prevention features. Activates for crisis keywords, safety planning, hotline integration, and risk assessment."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"allowed-tools",children:"Allowed Tools"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Read, Write, Edit\n"})}),"\n",(0,t.jsx)(n.h2,{id:"tags",children:"Tags"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"mental-health"})," ",(0,t.jsx)(n.code,{children:"crisis-intervention"})," ",(0,t.jsx)(n.code,{children:"safety"})]}),"\n",(0,t.jsx)(n.h1,{id:"crisis-response-protocol",children:"Crisis Response Protocol"}),"\n",(0,t.jsx)(n.p,{children:"This skill helps you implement safe crisis intervention features for the AI coaching system, following mental health best practices."}),"\n",(0,t.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"USE this skill for:"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Implementing crisis detection in recovery/mental health apps"}),"\n",(0,t.jsx)(n.li,{children:"Building safety planning features"}),"\n",(0,t.jsx)(n.li,{children:"Integrating hotline and emergency resource displays"}),"\n",(0,t.jsx)(n.li,{children:"Designing risk assessment interfaces"}),"\n",(0,t.jsx)(n.li,{children:"Creating escalation protocols for AI chat systems"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["\u274c ",(0,t.jsx)(n.strong,{children:"DO NOT use for:"})]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Responding to an actual crisis yourself"})," \u2192 Call 988 or emergency services"]}),"\n",(0,t.jsxs)(n.li,{children:["General mental health content \u2192 use ",(0,t.jsx)(n.code,{children:"sober-addict-protector"})," or ",(0,t.jsx)(n.code,{children:"recovery-coach-patterns"})]}),"\n",(0,t.jsx)(n.li,{children:"Medical advice or diagnosis \u2192 Always defer to licensed professionals"}),"\n",(0,t.jsx)(n.li,{children:"Replacing human crisis counselors \u2192 AI should augment, never replace"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"critical-safety-principle",children:"Critical Safety Principle"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"AI should NEVER be the sole responder in acute crisis situations."}),"\nAlways provide pathways to human support and emergency services."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"crisis-detection",children:"Crisis Detection"}),"\n",(0,t.jsx)(n.h3,{id:"risk-indicator-categories",children:"Risk Indicator Categories"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:'interface RiskIndicators {\n  // PRIMARY - Immediate escalation required\n  primary: {\n    suicidalIdeation: string[];      // "want to die", "end it all"\n    selfHarmIntent: string[];         // "hurt myself", "cutting"\n    homicidalIdeation: string[];      // "hurt someone"\n    activeSubstanceEmergency: string[]; // "overdosed", "can\'t stop"\n  };\n\n  // SECONDARY - Elevated monitoring\n  secondary: {\n    severeDepression: string[];       // "hopeless", "no point"\n    panicSymptoms: string[];          // "can\'t breathe", "heart racing"\n    psychoticSymptoms: string[];      // "hearing voices"\n    severeAnxiety: string[];          // "terrified", "losing control"\n  };\n\n  // TERTIARY - Check-in triggers\n  tertiary: {\n    isolationPatterns: string[];      // "no one cares", "alone"\n    substanceRelapse: string[];       // "started using", "slipped"\n    hopelessness: string[];           // "never get better"\n  };\n}\n'})}),"\n",(0,t.jsx)(n.h3,{id:"detection-implementation",children:"Detection Implementation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/lib/ai/crisis-detection.ts\n\nexport interface CrisisAssessment {\n  level: 'none' | 'low' | 'medium' | 'high' | 'critical';\n  indicators: string[];\n  recommendedAction: CrisisAction;\n  timestamp: Date;\n}\n\nexport type CrisisAction =\n  | 'continue_conversation'\n  | 'gentle_check_in'\n  | 'safety_resources'\n  | 'crisis_protocol'\n  | 'emergency_escalation';\n\nexport function assessCrisisLevel(\n  messageContent: string,\n  conversationHistory: Message[],\n  userCheckInHistory: CheckIn[]\n): CrisisAssessment {\n  const indicators: string[] = [];\n  let level: CrisisAssessment['level'] = 'none';\n\n  // Check primary indicators (critical)\n  if (hasPrimaryIndicators(messageContent)) {\n    level = 'critical';\n    indicators.push('primary_risk_detected');\n  }\n\n  // Check secondary indicators\n  if (hasSecondaryIndicators(messageContent)) {\n    level = level === 'none' ? 'high' : level;\n    indicators.push('secondary_risk_detected');\n  }\n\n  // Check pattern indicators from history\n  if (hasWorseningPattern(userCheckInHistory)) {\n    level = level === 'none' ? 'medium' : level;\n    indicators.push('worsening_trend');\n  }\n\n  // Check conversation escalation\n  if (hasEscalatingDistress(conversationHistory)) {\n    level = level === 'none' ? 'medium' : level;\n    indicators.push('escalating_distress');\n  }\n\n  return {\n    level,\n    indicators,\n    recommendedAction: getRecommendedAction(level),\n    timestamp: new Date(),\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"tiered-response-protocol",children:"Tiered Response Protocol"}),"\n",(0,t.jsx)(n.h3,{id:"level-1-continue-conversation-no-crisis",children:"Level 1: Continue Conversation (No Crisis)"}),"\n",(0,t.jsx)(n.p,{children:"Normal AI coaching interaction."}),"\n",(0,t.jsx)(n.h3,{id:"level-2-gentle-check-in-low-risk",children:"Level 2: Gentle Check-In (Low Risk)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const gentleCheckInResponse = `\nI want to make sure I understand how you're feeling.\nIt sounds like you're going through a difficult time.\n\nWould you like to:\n- Talk more about what's on your mind?\n- Try a grounding exercise together?\n- Look at some coping strategies?\n\nI'm here to listen.\n`;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"level-3-safety-resources-medium-risk",children:"Level 3: Safety Resources (Medium Risk)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const safetyResourcesResponse = `\nI hear that you're struggling, and I want you to know that support is available.\n\nHere are some resources that might help:\n\ud83d\udcde 988 Suicide & Crisis Lifeline: Call or text 988\n\ud83d\udcac Crisis Text Line: Text HOME to 741741\n\ud83c\udf10 SAMHSA Helpline: 1-800-662-4357\n\nWould you like to talk about what's going on, or would connecting with one of these resources feel right?\n`;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"level-4-crisis-protocol-high-risk",children:"Level 4: Crisis Protocol (High Risk)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const crisisProtocolResponse = `\nI'm concerned about what you've shared, and I want to make sure you're safe.\n\nRight now, I'd like you to consider reaching out to someone who can help:\n\n\ud83c\udd98 If you're in immediate danger: Call 911\n\ud83d\udcde 988 Suicide & Crisis Lifeline: Call or text 988 (24/7)\n\ud83d\udcac Crisis Text Line: Text HOME to 741741\n\nThese are trained counselors who understand what you're going through.\n\nIs there someone you trust - a friend, family member, or sponsor - who you could reach out to right now?\n\nI'm still here with you.\n`;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"level-5-emergency-escalation-critical",children:"Level 5: Emergency Escalation (Critical)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"const emergencyResponse = `\nI'm very concerned about your safety right now.\n\n\ud83c\udd98 Please call 911 or go to your nearest emergency room immediately.\n\nIf you can't do that, please call 988 right now - they can help.\n\nYour life matters. Please reach out for help right now.\n\n[EMERGENCY CONTACTS DISPLAYED]\n`;\n\n// System action: Flag for human review, notify emergency contact if configured\n"})}),"\n",(0,t.jsx)(n.h2,{id:"implementation-in-chat-handler",children:"Implementation in Chat Handler"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/lib/ai/chat-handler.ts\n\nexport async function handleChatMessage(\n  message: string,\n  conversationId: string,\n  userId: string\n): Promise<ChatResponse> {\n  // 1. Assess crisis level BEFORE generating AI response\n  const crisisAssessment = await assessCrisisLevel(\n    message,\n    await getConversationHistory(conversationId),\n    await getUserCheckIns(userId, 7)\n  );\n\n  // 2. Log assessment (for safety review)\n  await logCrisisAssessment(userId, conversationId, crisisAssessment);\n\n  // 3. Handle based on level\n  if (crisisAssessment.level === 'critical') {\n    // Don't use AI - provide immediate crisis response\n    await notifyEmergencyContact(userId);\n    await flagForHumanReview(conversationId, 'critical_crisis');\n\n    return {\n      message: emergencyResponse,\n      showEmergencyContacts: true,\n      disableChat: true,  // Prevent further AI interaction\n      crisisLevel: 'critical',\n    };\n  }\n\n  if (crisisAssessment.level === 'high') {\n    // Provide crisis resources, continue with caution\n    await flagForHumanReview(conversationId, 'high_risk');\n\n    return {\n      message: crisisProtocolResponse,\n      showCrisisResources: true,\n      crisisLevel: 'high',\n    };\n  }\n\n  // 4. For lower levels, proceed with AI but inject safety context\n  const systemPrompt = getSystemPromptWithSafetyContext(crisisAssessment);\n\n  const aiResponse = await generateAIResponse(message, systemPrompt);\n\n  // 5. Post-process AI response for safety\n  const safeResponse = await validateResponseSafety(aiResponse);\n\n  return {\n    message: safeResponse,\n    crisisLevel: crisisAssessment.level,\n  };\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"safety-resources-database",children:"Safety Resources Database"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/lib/crisis/resources.ts\n\nexport const crisisResources = {\n  national: [\n    {\n      name: '988 Suicide & Crisis Lifeline',\n      phone: '988',\n      text: '988',\n      url: 'https://988lifeline.org',\n      available: '24/7',\n      description: 'Free, confidential crisis support',\n    },\n    {\n      name: 'Crisis Text Line',\n      text: 'HOME to 741741',\n      url: 'https://www.crisistextline.org',\n      available: '24/7',\n      description: 'Text-based crisis support',\n    },\n    {\n      name: 'SAMHSA National Helpline',\n      phone: '1-800-662-4357',\n      url: 'https://www.samhsa.gov/find-help/national-helpline',\n      available: '24/7',\n      description: 'Substance abuse and mental health referrals',\n    },\n  ],\n\n  recovery: [\n    {\n      name: 'AA Hotline',\n      phone: '1-800-839-1686',\n      url: 'https://www.aa.org',\n      description: 'Alcoholics Anonymous support',\n    },\n    {\n      name: 'NA Helpline',\n      phone: '1-818-773-9999',\n      url: 'https://na.org',\n      description: 'Narcotics Anonymous support',\n    },\n  ],\n\n  specialized: [\n    {\n      name: 'Veterans Crisis Line',\n      phone: '988 (press 1)',\n      text: '838255',\n      description: 'For veterans and service members',\n    },\n    {\n      name: 'Trevor Project',\n      phone: '1-866-488-7386',\n      text: 'START to 678-678',\n      description: 'LGBTQ+ youth crisis support',\n    },\n  ],\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"emergency-contact-system",children:"Emergency Contact System"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// src/lib/crisis/emergency-contacts.ts\n\nexport async function notifyEmergencyContact(userId: string): Promise<void> {\n  const contacts = await getEmergencyContacts(userId);\n\n  if (contacts.length === 0) {\n    // Log that no emergency contact was available\n    await logCrisisEvent(userId, 'no_emergency_contact');\n    return;\n  }\n\n  const primaryContact = contacts[0];\n\n  // Send notification (SMS, email, or push)\n  await sendEmergencyNotification(primaryContact, {\n    type: 'crisis_alert',\n    message: `${userName} may be in crisis and could use your support. ` +\n             `Please reach out to them if you can.`,\n    // Never include conversation content - privacy\n  });\n\n  // Audit log\n  await logCrisisEvent(userId, 'emergency_contact_notified', {\n    contactId: primaryContact.id,\n  });\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"safety-guardrails-for-ai",children:"Safety Guardrails for AI"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Prompt injection for safety context\nconst safetySystemPrompt = `\nCRITICAL SAFETY INSTRUCTIONS:\n1. You are NOT a therapist or crisis counselor\n2. For ANY mention of self-harm, suicide, or harming others:\n   - Express genuine concern\n   - Provide crisis resources (988, Crisis Text Line)\n   - Encourage professional help\n   - Do NOT attempt to counsel through crisis\n3. Never minimize feelings or use toxic positivity\n4. Never promise confidentiality about safety concerns\n5. Always validate emotions while encouraging professional support\n6. If user mentions relapse, acknowledge and provide SAMHSA helpline\n`;\n\n// Response validation\nasync function validateResponseSafety(response: string): Promise<string> {\n  const unsafePatterns = [\n    /don't (call|reach out|get help)/i,\n    /you don't need (help|therapy|a professional)/i,\n    /just (think positive|be happy|get over it)/i,\n    /it's not that (bad|serious)/i,\n  ];\n\n  for (const pattern of unsafePatterns) {\n    if (pattern.test(response)) {\n      // Flag for review and return safe fallback\n      await flagForReview('unsafe_response_pattern');\n      return getSafeFallbackResponse();\n    }\n  }\n\n  return response;\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"audit--compliance",children:"Audit & Compliance"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// All crisis events must be logged for review\nexport async function logCrisisEvent(\n  userId: string,\n  eventType: CrisisEventType,\n  details?: Record<string, unknown>\n): Promise<void> {\n  await db.insert(crisisEvents).values({\n    id: generateId(),\n    userId,\n    eventType,\n    details: JSON.stringify(sanitizeDetails(details)),\n    createdAt: new Date(),\n    reviewed: false,  // Requires human review\n  });\n\n  // Critical events trigger immediate notification\n  if (isCriticalEvent(eventType)) {\n    await notifyOnCallStaff(userId, eventType);\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"testing-crisis-features",children:"Testing Crisis Features"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// NEVER use real crisis content in tests\ndescribe('Crisis Detection', () => {\n  it('detects high-risk indicators', () => {\n    // Use clearly artificial test phrases\n    const result = assessCrisisLevel(\n      '[TEST_HIGH_RISK_INDICATOR]',\n      [],\n      []\n    );\n    expect(result.level).toBe('high');\n  });\n\n  it('provides appropriate resources', () => {\n    const response = getCrisisResponse('high');\n    expect(response).toContain('988');\n    expect(response).toContain('Crisis Text Line');\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://988lifeline.org",children:"988 Suicide & Crisis Lifeline"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.samhsa.gov",children:"SAMHSA Guidelines"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://pmc.ncbi.nlm.nih.gov/articles/PMC10242473/",children:"AI in Mental Health - PMC"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.nature.com/articles/s41598-025-17242-4",children:"Crisis Chatbot Safety - Nature"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>a});var i=s(96540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);