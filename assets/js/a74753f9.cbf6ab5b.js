"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[59647],{20921:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"skills/fullstack_debugger/references/error-patterns","title":"Common Error Patterns & Solutions","description":"Browser Console Errors","source":"@site/docs/skills/fullstack_debugger/references/error-patterns.md","sourceDirName":"skills/fullstack_debugger/references","slug":"/skills/fullstack_debugger/references/error-patterns","permalink":"/docs/skills/fullstack_debugger/references/error-patterns","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Common Error Patterns & Solutions","sidebar_label":"Common Error Patterns & Sol...","sidebar_position":2}}');var o=s(74848),t=s(28453);const i={title:"Common Error Patterns & Solutions",sidebar_label:"Common Error Patterns & Sol...",sidebar_position:2},l="Common Error Patterns & Solutions",d={},a=[{value:"Browser Console Errors",id:"browser-console-errors",level:2},{value:"&quot;Failed to fetch&quot; / &quot;TypeError: Failed to fetch&quot;",id:"failed-to-fetch--typeerror-failed-to-fetch",level:3},{value:"&quot;Hydration failed because the initial UI does not match&quot;",id:"hydration-failed-because-the-initial-ui-does-not-match",level:3},{value:"&quot;Cannot read properties of undefined&quot;",id:"cannot-read-properties-of-undefined",level:3},{value:"&quot;Invalid hook call&quot;",id:"invalid-hook-call",level:3},{value:"Supabase Errors",id:"supabase-errors",level:2},{value:"Empty results (no error, but data = [])",id:"empty-results-no-error-but-data--",level:3},{value:"&quot;JWT expired&quot;",id:"jwt-expired",level:3},{value:"&quot;relation does not exist&quot;",id:"relation-does-not-exist",level:3},{value:"&quot;new row violates row-level security policy&quot;",id:"new-row-violates-row-level-security-policy",level:3},{value:"Cloudflare Worker Errors",id:"cloudflare-worker-errors",level:2},{value:"1101 Worker threw exception",id:"1101-worker-threw-exception",level:3},{value:"1102 Worker exceeded CPU time limit",id:"1102-worker-exceeded-cpu-time-limit",level:3},{value:"524 A timeout occurred",id:"524-a-timeout-occurred",level:3},{value:"KV &quot;key not found&quot;",id:"kv-key-not-found",level:3},{value:"Next.js Build Errors",id:"nextjs-build-errors",level:2},{value:"&quot;Page X couldn&#39;t be rendered statically&quot;",id:"page-x-couldnt-be-rendered-statically",level:3},{value:"&quot;Module not found: Can&#39;t resolve &#39;X&#39;&quot;",id:"module-not-found-cant-resolve-x",level:3},{value:"&quot;You&#39;re importing a component that needs useState&quot;",id:"youre-importing-a-component-that-needs-usestate",level:3},{value:"Out of memory during build",id:"out-of-memory-during-build",level:3},{value:"TypeScript Errors",id:"typescript-errors",level:2},{value:"&quot;Cannot find module&quot; (but it exists)",id:"cannot-find-module-but-it-exists",level:3},{value:"&quot;Type X is not assignable to type Y&quot;",id:"type-x-is-not-assignable-to-type-y",level:3},{value:"&quot;Object is possibly &#39;undefined&#39;&quot;",id:"object-is-possibly-undefined",level:3},{value:"Authentication Issues",id:"authentication-issues",level:2},{value:"User stuck in logged-out state",id:"user-stuck-in-logged-out-state",level:3},{value:"Redirect loop on auth",id:"redirect-loop-on-auth",level:3},{value:"Performance Issues",id:"performance-issues",level:2},{value:"Slow initial load",id:"slow-initial-load",level:3},{value:"&quot;Stale closure&quot; / state not updating",id:"stale-closure--state-not-updating",level:3},{value:"Deployment Issues",id:"deployment-issues",level:2},{value:"Works locally, fails in production",id:"works-locally-fails-in-production",level:3},{value:"Changes not reflecting after deploy",id:"changes-not-reflecting-after-deploy",level:3}];function c(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"common-error-patterns--solutions",children:"Common Error Patterns & Solutions"})}),"\n",(0,o.jsx)(n.h2,{id:"browser-console-errors",children:"Browser Console Errors"}),"\n",(0,o.jsx)(n.h3,{id:"failed-to-fetch--typeerror-failed-to-fetch",children:'"Failed to fetch" / "TypeError: Failed to fetch"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Network request failed - usually CORS, network issue, or server down\n",(0,o.jsx)(n.strong,{children:"Debug:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Test endpoint directly\ncurl -v https://your-endpoint.workers.dev/api/test\n\n# Check CORS\ncurl -H "Origin: https://yoursite.com" -v https://your-endpoint.workers.dev/api/test\n'})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fix:"})," Add CORS headers to worker response"]}),"\n",(0,o.jsx)(n.h3,{id:"hydration-failed-because-the-initial-ui-does-not-match",children:'"Hydration failed because the initial UI does not match"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Server HTML differs from client render (dates, random values, browser APIs)\n",(0,o.jsx)(n.strong,{children:"Debug:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"// Add to suspect component\nuseEffect(() => {\n  console.log('Mounted - client only');\n}, []);\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fix:"})," Wrap dynamic content in client-only component:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"const [mounted, setMounted] = useState(false);\nuseEffect(() => setMounted(true), []);\nif (!mounted) return <Skeleton />;\n"})}),"\n",(0,o.jsx)(n.h3,{id:"cannot-read-properties-of-undefined",children:'"Cannot read properties of undefined"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Accessing nested property before data loads\n",(0,o.jsx)(n.strong,{children:"Fix:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-jsx",children:"// Before\ndata.user.name\n\n// After\ndata?.user?.name ?? 'Unknown'\n"})}),"\n",(0,o.jsx)(n.h3,{id:"invalid-hook-call",children:'"Invalid hook call"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Hooks called conditionally, in loops, or outside components\n",(0,o.jsx)(n.strong,{children:"Debug:"})," Check for early returns before hooks\n",(0,o.jsx)(n.strong,{children:"Fix:"})," Move hooks to top of component, before any conditionals"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"supabase-errors",children:"Supabase Errors"}),"\n",(0,o.jsx)(n.h3,{id:"empty-results-no-error-but-data--",children:"Empty results (no error, but data = [])"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," RLS policy blocking access (99% of cases)\n",(0,o.jsx)(n.strong,{children:"Debug:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sql",children:"-- Check policies\nSELECT * FROM pg_policies WHERE tablename = 'your_table';\n\n-- Test as anon\nSET ROLE anon;\nSELECT * FROM your_table LIMIT 1;\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fix:"})," Add SELECT policy: ",(0,o.jsx)(n.code,{children:'CREATE POLICY "name" ON table FOR SELECT USING (true);'})]}),"\n",(0,o.jsx)(n.h3,{id:"jwt-expired",children:'"JWT expired"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Session token expired\n",(0,o.jsx)(n.strong,{children:"Fix:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// Refresh session\nconst { data, error } = await supabase.auth.refreshSession();\n"})}),"\n",(0,o.jsx)(n.h3,{id:"relation-does-not-exist",children:'"relation does not exist"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Table doesn't exist, wrong schema, or typo\n",(0,o.jsx)(n.strong,{children:"Debug:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-sql",children:"SELECT table_name FROM information_schema.tables WHERE table_schema = 'public';\n"})}),"\n",(0,o.jsx)(n.h3,{id:"new-row-violates-row-level-security-policy",children:'"new row violates row-level security policy"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," INSERT/UPDATE blocked by RLS\n",(0,o.jsx)(n.strong,{children:"Debug:"})," Check INSERT/UPDATE policies, verify auth.uid() matches"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"cloudflare-worker-errors",children:"Cloudflare Worker Errors"}),"\n",(0,o.jsx)(n.h3,{id:"1101-worker-threw-exception",children:"1101 Worker threw exception"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Unhandled exception in worker code\n",(0,o.jsx)(n.strong,{children:"Debug:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"cd workers/your-worker\nnpx wrangler tail\n# Then trigger the error\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fix:"})," Add try/catch, check for undefined values"]}),"\n",(0,o.jsx)(n.h3,{id:"1102-worker-exceeded-cpu-time-limit",children:"1102 Worker exceeded CPU time limit"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Worker took too long (50ms free, 30s paid)\n",(0,o.jsx)(n.strong,{children:"Fix:"})," Optimize code, use streaming, cache results"]}),"\n",(0,o.jsx)(n.h3,{id:"524-a-timeout-occurred",children:"524 A timeout occurred"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Worker took longer than 100 seconds\n",(0,o.jsx)(n.strong,{children:"Fix:"})," Break into smaller operations, use Durable Objects"]}),"\n",(0,o.jsx)(n.h3,{id:"kv-key-not-found",children:'KV "key not found"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Key doesn't exist or expired\n",(0,o.jsx)(n.strong,{children:"Debug:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'npx wrangler kv:key get --namespace-id=YOUR_NS "your:key"\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"nextjs-build-errors",children:"Next.js Build Errors"}),"\n",(0,o.jsx)(n.h3,{id:"page-x-couldnt-be-rendered-statically",children:'"Page X couldn\'t be rendered statically"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Using dynamic APIs (cookies, headers, searchParams) without proper handling\n",(0,o.jsx)(n.strong,{children:"Fix:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Add to page\nexport const dynamic = 'force-dynamic';\n// or wrap in Suspense\n"})}),"\n",(0,o.jsx)(n.h3,{id:"module-not-found-cant-resolve-x",children:"\"Module not found: Can't resolve 'X'\""}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Missing dependency, wrong import path, or server/client mismatch\n",(0,o.jsx)(n.strong,{children:"Debug:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"npm ls X  # Check if installed\ngrep -r \"from 'X'\" src/  # Find imports\n"})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fix:"})," ",(0,o.jsx)(n.code,{children:"npm install X"})," or fix import path"]}),"\n",(0,o.jsx)(n.h3,{id:"youre-importing-a-component-that-needs-usestate",children:'"You\'re importing a component that needs useState"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Using client hook in server component\n",(0,o.jsx)(n.strong,{children:"Fix:"})," Add ",(0,o.jsx)(n.code,{children:"'use client'"})," directive at top of file"]}),"\n",(0,o.jsx)(n.h3,{id:"out-of-memory-during-build",children:"Out of memory during build"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Large pages, too many images, complex dependencies\n",(0,o.jsx)(n.strong,{children:"Fix:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Increase Node memory\nNODE_OPTIONS="--max-old-space-size=4096" npm run build\n'})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"typescript-errors",children:"TypeScript Errors"}),"\n",(0,o.jsx)(n.h3,{id:"cannot-find-module-but-it-exists",children:'"Cannot find module" (but it exists)'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Stale TypeScript cache\n",(0,o.jsx)(n.strong,{children:"Fix:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"rm -rf node_modules/.cache/typescript tsconfig.tsbuildinfo\nnpx tsc --build --clean\n"})}),"\n",(0,o.jsx)(n.h3,{id:"type-x-is-not-assignable-to-type-y",children:'"Type X is not assignable to type Y"'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Debug:"})," Look at both types, find the mismatch\n",(0,o.jsx)(n.strong,{children:"Fix:"})," Adjust type, add assertion, or fix data"]}),"\n",(0,o.jsx)(n.h3,{id:"object-is-possibly-undefined",children:"\"Object is possibly 'undefined'\""}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Fix:"})," Add null check or optional chaining:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-typescript",children:"// Before\nuser.name\n\n// After\nuser?.name ?? 'default'\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"authentication-issues",children:"Authentication Issues"}),"\n",(0,o.jsx)(n.h3,{id:"user-stuck-in-logged-out-state",children:"User stuck in logged-out state"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Debug:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"// In browser console\nconsole.log(await supabase.auth.getSession());\nlocalStorage.getItem('sb-xxx-auth-token');\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Common causes:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Wrong Supabase URL (http vs https)"}),"\n",(0,o.jsx)(n.li,{children:"Site URL mismatch in Supabase dashboard"}),"\n",(0,o.jsx)(n.li,{children:"Cookie blocked (Safari, incognito)"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"redirect-loop-on-auth",children:"Redirect loop on auth"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Auth callback not handling state correctly\n",(0,o.jsx)(n.strong,{children:"Fix:"})," Check redirect URLs in Supabase dashboard match your app"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"performance-issues",children:"Performance Issues"}),"\n",(0,o.jsx)(n.h3,{id:"slow-initial-load",children:"Slow initial load"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Debug:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"# Check bundle size\nnpx @next/bundle-analyzer\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Fix:"})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Dynamic imports for large components"}),"\n",(0,o.jsx)(n.li,{children:"Image optimization"}),"\n",(0,o.jsx)(n.li,{children:"Remove unused dependencies"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"stale-closure--state-not-updating",children:'"Stale closure" / state not updating'}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," Callback using old state value\n",(0,o.jsx)(n.strong,{children:"Fix:"})," Use functional update or add to dependency array:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"setCount(prev => prev + 1);  // Not setCount(count + 1)\n"})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"deployment-issues",children:"Deployment Issues"}),"\n",(0,o.jsx)(n.h3,{id:"works-locally-fails-in-production",children:"Works locally, fails in production"}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Debug checklist:"})}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Environment variables set in Cloudflare Pages?"}),"\n",(0,o.jsx)(n.li,{children:"Build command correct?"}),"\n",(0,o.jsxs)(n.li,{children:["Output directory correct (",(0,o.jsx)(n.code,{children:"out"})," for static)?"]}),"\n",(0,o.jsx)(n.li,{children:"Node version matches?"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"changes-not-reflecting-after-deploy",children:"Changes not reflecting after deploy"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Cause:"})," CDN/browser caching\n",(0,o.jsx)(n.strong,{children:"Fix:"})]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Purge Cloudflare cache\ncurl -X POST "https://api.cloudflare.com/client/v4/zones/ZONE/purge_cache" \\\n  -H "Authorization: Bearer TOKEN" \\\n  -d \'{"purge_everything":true}\'\n\n# Or add cache busting\n?v=2 to resource URLs\n'})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var r=s(96540);const o={},t=r.createContext(o);function i(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);