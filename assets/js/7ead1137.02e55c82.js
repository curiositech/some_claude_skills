"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[52412],{28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var s=i(96540);const r={},t=s.createContext(r);function l(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(t.Provider,{value:n},e.children)}},67804:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"skills/technical_writer/references/runbook-template","title":"Runbook Template Reference","description":"[command to verify issue]","source":"@site/docs/skills/technical_writer/references/runbook-template.md","sourceDirName":"skills/technical_writer/references","slug":"/skills/technical_writer/references/runbook-template","permalink":"/docs/skills/technical_writer/references/runbook-template","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Runbook Template Reference","sidebar_label":"Runbook Template Reference","sidebar_position":4}}');var r=i(74848),t=i(28453);const l={title:"Runbook Template Reference",sidebar_label:"Runbook Template Reference",sidebar_position:4},a="Runbook Template Reference",c={},o=[{value:"Procedure",id:"procedure",level:2},{value:"Step 1: [Step Name] ([X] min)",id:"step-1-step-name-x-min",level:3},{value:"Step 2: [Step Name] ([X] min)",id:"step-2-step-name-x-min",level:3},{value:"Step 3: [Step Name] ([X] min)",id:"step-3-step-name-x-min",level:3},{value:"Verification",id:"verification",level:2},{value:"Rollback",id:"rollback",level:2},{value:"Contacts",id:"contacts",level:2},{value:"Related Documentation",id:"related-documentation",level:2},{value:"Procedure",id:"procedure-1",level:2},{value:"Step 1: Assess the Situation (2 min)",id:"step-1-assess-the-situation-2-min",level:3},{value:"Step 2: Attempt Primary Recovery (5 min)",id:"step-2-attempt-primary-recovery-5-min",level:3},{value:"Step 3: Initiate Failover (5 min)",id:"step-3-initiate-failover-5-min",level:3},{value:"Step 4: Update Application Configuration (3 min)",id:"step-4-update-application-configuration-3-min",level:3},{value:"Step 5: Verify Application Health (5 min)",id:"step-5-verify-application-health-5-min",level:3},{value:"Step 6: Post-Failover Tasks",id:"step-6-post-failover-tasks",level:3},{value:"Rollback",id:"rollback-1",level:2},{value:"Contacts",id:"contacts-1",level:2},{value:"Related Documentation",id:"related-documentation-1",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"runbook-template-reference",children:"Runbook Template Reference"})}),"\n",(0,r.jsx)(n.h1,{id:"operational-procedure-for-incident-response",children:"Operational procedure for incident response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:"# Runbook: [Procedure Name]\n\n## Overview\n\n[Brief description of what this runbook covers and when to use it]\n\n**Severity**: [SEV-1 | SEV-2 | SEV-3]\n**Expected Duration**: [X-Y minutes]\n**Required Access**: [List required permissions/roles]\n\n## Prerequisites\n\n- [ ] Access to [system/tool]\n- [ ] [Permission/credential] available\n- [ ] Communication channel access (#incidents)\n- [ ] [Any other prerequisites]\n\n## Detection\n\n### Alerts That Trigger This Runbook\n\n- `[AlertName]` - [Brief description]\n- `[AlertName]` - [Brief description]\n\n### Verification Steps\n\n1. Check [specific metric/log]:\n   ```bash\n   [command to verify issue]\n"})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["Confirm [condition]:","\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[command to confirm]\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"procedure",children:"Procedure"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-step-name-x-min",children:"Step 1: [Step Name] ([X] min)"}),"\n",(0,r.jsx)(n.p,{children:"[Description of what to do]"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[commands to execute]\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Expected Result"}),": [What you should see if successful]"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-step-name-x-min",children:"Step 2: [Step Name] ([X] min)"}),"\n",(0,r.jsx)(n.p,{children:"[Description]"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[commands]\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-step-name-x-min",children:"Step 3: [Step Name] ([X] min)"}),"\n",(0,r.jsx)(n.p,{children:"[Description]"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If [condition A]:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[commands for condition A]\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If [condition B]:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"[commands for condition B]\n"})}),"\n",(0,r.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,r.jsx)(n.p,{children:"After completing the procedure, verify success:"}),"\n",(0,r.jsxs)(n.ol,{className:"contains-task-list",children:["\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","[Check 1]"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","[Check 2]"]}),"\n",(0,r.jsxs)(n.li,{className:"task-list-item",children:[(0,r.jsx)(n.input,{type:"checkbox",disabled:!0})," ","[Check 3]"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rollback",children:"Rollback"}),"\n",(0,r.jsx)(n.p,{children:"If the procedure causes issues:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"[Rollback step 1]"}),"\n",(0,r.jsx)(n.li,{children:"[Rollback step 2]"}),"\n",(0,r.jsx)(n.li,{children:"[Contact for escalation]"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"contacts",children:"Contacts"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Role"}),(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Contact"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"[Role] On-Call"}),(0,r.jsx)(n.td,{children:"Rotation"}),(0,r.jsx)(n.td,{children:"[Contact method]"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"[Team] Lead"}),(0,r.jsx)(n.td,{children:"[Name]"}),(0,r.jsx)(n.td,{children:"[Contact]"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Escalation"}),(0,r.jsx)(n.td,{children:"[Name]"}),(0,r.jsx)(n.td,{children:"[Contact]"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"[Link to related doc 1]"}),"\n",(0,r.jsx)(n.li,{children:"[Link to related doc 2]"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\n---\n\n## Complete Example: Database Failover\n\n```markdown\n# Runbook: Database Failover\n\n## Overview\n\nThis runbook covers the procedure for promoting a PostgreSQL replica to primary during a failover event.\n\n**Severity**: SEV-1\n**Expected Duration**: 15-30 minutes\n**Required Access**: DBA on-call, Platform Engineer\n\n## Prerequisites\n\n- [ ] Access to AWS Console or CLI\n- [ ] Database admin credentials\n- [ ] Slack access for #incidents channel\n- [ ] PagerDuty acknowledgment\n\n## Detection\n\n### Alerts That Trigger This Runbook\n\n- `PostgresPrimaryDown` - Primary database unreachable\n- `PostgresReplicationLag > 60s` - Replication significantly delayed\n- `PostgresConnectionPoolExhausted` - No available connections\n\n### Verification Steps\n\n1. Check database connectivity:\n   ```bash\n   psql -h primary.db.internal -U admin -c "SELECT 1"\n'})}),"\n",(0,r.jsxs)(n.ol,{start:"2",children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check replication status:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'psql -h replica.db.internal -U admin -c "SELECT pg_is_in_recovery()"\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Check CloudWatch metrics in AWS Console"}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"procedure-1",children:"Procedure"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-assess-the-situation-2-min",children:"Step 1: Assess the Situation (2 min)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Confirm the alert is not a false positive"}),"\n",(0,r.jsx)(n.li,{children:"Check if the issue is network-related vs database-related"}),"\n",(0,r.jsx)(n.li,{children:'Notify in #incidents: "Investigating database issues, may need failover"'}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-2-attempt-primary-recovery-5-min",children:"Step 2: Attempt Primary Recovery (5 min)"}),"\n",(0,r.jsx)(n.p,{children:"If primary appears to be having transient issues:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check process status\nssh primary-db 'sudo systemctl status postgresql'\n\n# Check disk space\nssh primary-db 'df -h'\n\n# Check logs\nssh primary-db 'sudo tail -100 /var/log/postgresql/postgresql-15-main.log'\n"})}),"\n",(0,r.jsx)(n.p,{children:"If recoverable, restart the service:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ssh primary-db 'sudo systemctl restart postgresql'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"If recovery fails after 5 minutes, proceed to failover."})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-initiate-failover-5-min",children:"Step 3: Initiate Failover (5 min)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Stop writes to primary"})," (if still accessible):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- On primary\nALTER SYSTEM SET default_transaction_read_only = on;\nSELECT pg_reload_conf();\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Promote replica"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# AWS RDS\naws rds promote-read-replica --db-instance-identifier replica-db\n\n# Self-managed\nssh replica-db 'sudo -u postgres pg_ctl promote -D /var/lib/postgresql/15/main'\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verify promotion"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"psql -h replica.db.internal -U admin -c \"SELECT pg_is_in_recovery()\"\n# Should return 'f' (false)\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-4-update-application-configuration-3-min",children:"Step 4: Update Application Configuration (3 min)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Update DNS"})," (if using DNS-based failover):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"aws route53 change-resource-record-sets \\\n  --hosted-zone-id ZONE_ID \\\n  --change-batch file://failover-dns.json\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Or update connection strings"})," via config management:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Update Kubernetes secret\nkubectl patch secret db-credentials -n production \\\n  -p \'{"data":{"host":"\'$(echo -n "new-primary.db.internal" | base64)\'"}}\'\n\n# Restart application pods\nkubectl rollout restart deployment/app -n production\n'})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-5-verify-application-health-5-min",children:"Step 5: Verify Application Health (5 min)"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Check application logs for database errors"}),"\n",(0,r.jsx)(n.li,{children:"Monitor error rates in Datadog/Grafana"}),"\n",(0,r.jsx)(n.li,{children:"Verify key user flows are working"}),"\n",(0,r.jsx)(n.li,{children:"Check connection pool metrics"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"step-6-post-failover-tasks",children:"Step 6: Post-Failover Tasks"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Create new replica"})," from new primary"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Investigate root cause"})," of original primary failure"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update monitoring"})," to point to new topology"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Document incident"})," in post-mortem"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"rollback-1",children:"Rollback"}),"\n",(0,r.jsx)(n.p,{children:"If the failover causes issues:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stop application traffic"})," (enable maintenance mode)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Restore original primary"})," from backup if needed"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Re-point applications"})," to original primary"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Investigate"})," why failover failed"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"contacts-1",children:"Contacts"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Role"}),(0,r.jsx)(n.th,{children:"Name"}),(0,r.jsx)(n.th,{children:"Contact"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"DBA On-Call"}),(0,r.jsx)(n.td,{children:"Rotation"}),(0,r.jsx)(n.td,{children:"PagerDuty"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Platform Lead"}),(0,r.jsx)(n.td,{children:"Jane Smith"}),(0,r.jsx)(n.td,{children:"@jane.smith"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"VP Engineering"}),(0,r.jsx)(n.td,{children:"John Doe"}),(0,r.jsx)(n.td,{children:"@john.doe (escalation)"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"related-documentation-1",children:"Related Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"[Database Architecture](../architecture/database.md)"}),"\n",(0,r.jsx)(n.li,{children:"[Backup & Recovery](./backup-recovery.md)"}),"\n",(0,r.jsx)(n.li,{children:"[Incident Response Process](../processes/incident-response.md)"}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:'\n---\n\n## Runbook Best Practices\n\n### Structure\n- Start with overview and severity\n- List all prerequisites upfront\n- Include verification at each step\n- Always have a rollback section\n- End with contacts and related docs\n\n### Commands\n- All commands must be copy-pasteable\n- Include expected output where helpful\n- Use environment variables for secrets\n- Show both success and failure indicators\n\n### Maintenance\n- Review runbooks quarterly\n- Update after every incident where used\n- Include "last tested" date\n- Conduct dry-runs for critical procedures\n'})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);