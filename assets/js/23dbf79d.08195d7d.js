"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[6646],{28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var r=t(96540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}},54924:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>a,default:()=>c,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"skills/recovery_social_features/references/groups","title":"Meeting-Based Groups","description":"Implementation patterns for ephemeral and permanent meeting groups.","source":"@site/docs/skills/recovery_social_features/references/groups.md","sourceDirName":"skills/recovery_social_features/references","slug":"/skills/recovery_social_features/references/groups","permalink":"/docs/skills/recovery_social_features/references/groups","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Meeting-Based Groups","sidebar_label":"Meeting-Based Groups","sidebar_position":3}}');var s=t(74848),i=t(28453);const o={title:"Meeting-Based Groups",sidebar_label:"Meeting-Based Groups",sidebar_position:3},a="Meeting-Based Groups",u={},d=[{value:"useMeetingGroup Hook",id:"usemeetinggroup-hook",level:2},{value:"Quick Meeting Group Component",id:"quick-meeting-group-component",level:2},{value:"Group Settings",id:"group-settings",level:2},{value:"Group Visibility Options",id:"group-visibility-options",level:2}];function l(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"meeting-based-groups",children:"Meeting-Based Groups"})}),"\n",(0,s.jsx)(n.p,{children:"Implementation patterns for ephemeral and permanent meeting groups."}),"\n",(0,s.jsx)(n.h2,{id:"usemeetinggroup-hook",children:"useMeetingGroup Hook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// hooks/useMeetingGroup.ts\n'use client';\n\nimport { useState } from 'react';\nimport { supabase } from '@/lib/supabase';\n\ninterface GroupSettings {\n  name: string;\n  meetingId?: string;\n  visibility: 'public' | 'private' | 'invite';\n  ephemeral: boolean;  // Auto-delete after 24h\n  maxMembers: number;\n}\n\nexport function useMeetingGroup() {\n  const [isLoading, setIsLoading] = useState(false);\n\n  const createGroup = async (settings: GroupSettings) => {\n    setIsLoading(true);\n    try {\n      const { data, error } = await supabase\n        .from('groups')\n        .insert({\n          name: settings.name,\n          meeting_id: settings.meetingId,\n          visibility: settings.visibility,\n          max_members: settings.maxMembers,\n          expires_at: settings.ephemeral\n            ? new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString()\n            : null,\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      // Auto-join creator as owner\n      await supabase.from('group_members').insert({\n        group_id: data.id,\n        user_id: (await supabase.auth.getUser()).data.user?.id,\n        role: 'owner',\n      });\n\n      return data;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const joinGroup = async (groupId: string) => {\n    const { error } = await supabase.from('group_members').insert({\n      group_id: groupId,\n      user_id: (await supabase.auth.getUser()).data.user?.id,\n      role: 'member',\n    });\n\n    if (error) {\n      if (error.message.includes('duplicate')) {\n        return; // Already a member\n      }\n      throw error;\n    }\n  };\n\n  const leaveGroup = async (groupId: string) => {\n    const userId = (await supabase.auth.getUser()).data.user?.id;\n    await supabase\n      .from('group_members')\n      .delete()\n      .eq('group_id', groupId)\n      .eq('user_id', userId);\n  };\n\n  return { createGroup, joinGroup, leaveGroup, isLoading };\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"quick-meeting-group-component",children:"Quick Meeting Group Component"}),"\n",(0,s.jsx)(n.p,{children:"One-tap group creation when attending a meeting."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// components/QuickMeetingGroup.tsx\n'use client';\n\nimport { useState } from 'react';\nimport { useMeetingGroup } from '@/hooks/useMeetingGroup';\nimport type { Meeting } from '@/lib/meetings/types';\n\ninterface Props {\n  meeting: Meeting;\n}\n\nexport function QuickMeetingGroup({ meeting }: Props) {\n  const { createGroup, isLoading } = useMeetingGroup();\n  const [groupCreated, setGroupCreated] = useState(false);\n  const [inviteCode, setInviteCode] = useState('');\n\n  const handleCreate = async () => {\n    const group = await createGroup({\n      name: `${meeting.name} Group`,\n      meetingId: meeting.id,\n      visibility: 'invite',\n      ephemeral: true,\n      maxMembers: 20,\n    });\n\n    setInviteCode(group.invite_code);\n    setGroupCreated(true);\n  };\n\n  if (groupCreated) {\n    return (\n      <div className=\"p-4 bg-leather-800 rounded-lg\">\n        <p className=\"text-sm text-leather-400 mb-2\">\n          Group created! Share this code with others at the meeting:\n        </p>\n        <code className=\"block px-4 py-3 bg-leather-900 rounded text-center text-xl\">\n          {inviteCode}\n        </code>\n        <p className=\"text-xs text-leather-500 mt-2 text-center\">\n          This group expires in 24 hours\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <button\n      onClick={handleCreate}\n      disabled={isLoading}\n      className=\"flex items-center gap-2 px-4 py-2 bg-leather-700 rounded\"\n    >\n      <UsersIcon className=\"w-5 h-5\" />\n      <span>Start Group Chat</span>\n    </button>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"group-settings",children:"Group Settings"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"interface GroupSettings {\n  name: string;\n  meetingId?: string;           // Link to meeting\n  visibility: 'public' | 'private' | 'invite';\n  ephemeral: boolean;           // Auto-delete after 24h\n  maxMembers: number;           // Member limit\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"group-visibility-options",children:"Group Visibility Options"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Visibility"}),(0,s.jsx)(n.th,{children:"Who Can See"}),(0,s.jsx)(n.th,{children:"Who Can Join"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"public"})}),(0,s.jsx)(n.td,{children:"Anyone"}),(0,s.jsx)(n.td,{children:"Anyone"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"private"})}),(0,s.jsx)(n.td,{children:"Members only"}),(0,s.jsx)(n.td,{children:"Invite only"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"invite"})}),(0,s.jsx)(n.td,{children:"Members only"}),(0,s.jsx)(n.td,{children:"Has invite code"})]})]})]})]})}function c(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}}}]);