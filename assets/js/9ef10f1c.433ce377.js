"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[21400],{28453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>l});var i=s(96540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}},96529:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"skills/sobriety_tools_guardian/references/CRISIS_DETECTION","title":"Crisis Detection Patterns for Recovery Apps","description":"The Mission","source":"@site/docs/skills/sobriety_tools_guardian/references/CRISIS_DETECTION.md","sourceDirName":"skills/sobriety_tools_guardian/references","slug":"/skills/sobriety_tools_guardian/references/CRISIS_DETECTION","permalink":"/docs/skills/sobriety_tools_guardian/references/CRISIS_DETECTION","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Crisis Detection Patterns for Recovery Apps","sidebar_label":"Crisis Detection Patterns f...","sidebar_position":1}}');var r=s(74848),t=s(28453);const a={title:"Crisis Detection Patterns for Recovery Apps",sidebar_label:"Crisis Detection Patterns f...",sidebar_position:1},l="Crisis Detection Patterns for Recovery Apps",c={},o=[{value:"The Mission",id:"the-mission",level:2},{value:"Signal Sources",id:"signal-sources",level:2},{value:"1. Check-in Data (HALT Scores)",id:"1-check-in-data-halt-scores",level:3},{value:"2. Journal Sentiment",id:"2-journal-sentiment",level:3},{value:"3. Behavioral Patterns",id:"3-behavioral-patterns",level:3},{value:"4. Time-Based Risk Factors",id:"4-time-based-risk-factors",level:3},{value:"Detection Algorithm",id:"detection-algorithm",level:2},{value:"Response Actions",id:"response-actions",level:2},{value:"Critical Risk Response",id:"critical-risk-response",level:3},{value:"High Risk Response",id:"high-risk-response",level:3},{value:"Elevated Risk Response",id:"elevated-risk-response",level:3},{value:"UI/UX Guidelines for Crisis Features",id:"uiux-guidelines-for-crisis-features",level:2},{value:"DO:",id:"do",level:3},{value:"DON&#39;T:",id:"dont",level:3},{value:"Database Schema for Crisis Detection",id:"database-schema-for-crisis-detection",level:2},{value:"Privacy Considerations",id:"privacy-considerations",level:2},{value:"Testing Crisis Detection",id:"testing-crisis-detection",level:2},{value:"Future Enhancements",id:"future-enhancements",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"crisis-detection-patterns-for-recovery-apps",children:"Crisis Detection Patterns for Recovery Apps"})}),"\n",(0,r.jsx)(n.h2,{id:"the-mission",children:"The Mission"}),"\n",(0,r.jsxs)(n.p,{children:["Detect when a user might be heading toward relapse or crisis ",(0,r.jsx)(n.strong,{children:"before they ask for help"}),". Surface support proactively but gently\u2014no alarms, no judgment, just help when they need it."]}),"\n",(0,r.jsx)(n.h2,{id:"signal-sources",children:"Signal Sources"}),"\n",(0,r.jsx)(n.h3,{id:"1-check-in-data-halt-scores",children:"1. Check-in Data (HALT Scores)"}),"\n",(0,r.jsx)(n.p,{children:"HALT = Hungry, Angry, Lonely, Tired"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface HALTCheckin {\n  hungry_score: number;  // 1-5\n  angry_score: number;   // 1-5\n  lonely_score: number;  // 1-5\n  tired_score: number;   // 1-5\n  created_at: Date;\n}\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Red Flags:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Any single score jumps 3+ points from 7-day average"}),"\n",(0,r.jsx)(n.li,{children:"Combined HALT score (sum) exceeds 16 (out of 20)"}),"\n",(0,r.jsx)(n.li,{children:"Angry score consistently >4 for 3+ days"}),"\n",(0,r.jsx)(n.li,{children:"Lonely score consistently >4 for 3+ days"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-journal-sentiment",children:"2. Journal Sentiment"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Red Flag Keywords/Patterns:"})}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Pattern"}),(0,r.jsx)(n.th,{children:"Risk Level"}),(0,r.jsx)(n.th,{children:"Context"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Ex-partner mentions (3+/week)"}),(0,r.jsx)(n.td,{children:"High"}),(0,r.jsx)(n.td,{children:"Relationship triggers are #1 relapse factor"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:'"Can\'t" appearing frequently'}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Learned helplessness indicator"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Sleep disruption mentions"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Often precedes crisis"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Isolation language"}),(0,r.jsx)(n.td,{children:"High"}),(0,r.jsx)(n.td,{children:'"Nobody understands", "alone", "no one cares"'})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Cravings acknowledged"}),(0,r.jsx)(n.td,{children:"High"}),(0,r.jsx)(n.td,{children:"Direct trigger awareness"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Financial stress"}),(0,r.jsx)(n.td,{children:"Medium"}),(0,r.jsx)(n.td,{children:"Common relapse trigger"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"NOT Red Flags (false positives to avoid):"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Discussing past use in recovery context"}),"\n",(0,r.jsx)(n.li,{children:"Sharing struggles in group therapy"}),"\n",(0,r.jsx)(n.li,{children:"Processing difficult emotions constructively"}),"\n",(0,r.jsx)(n.li,{children:"Gratitude journaling about sobriety"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"3-behavioral-patterns",children:"3. Behavioral Patterns"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface BehavioralSignals {\n  // Time patterns\n  late_night_activity: boolean;     // 2-5am check-ins\n  missed_streak: boolean;           // Broke daily streak after 7+ days\n  time_since_last_checkin: number;  // Hours\n\n  // Usage patterns\n  safety_plan_views: number;        // Spike in views\n  sponsor_calls_attempted: number;  // Multiple attempts\n  meeting_searches: number;         // Searching but not attending\n\n  // Derived\n  engagement_drop: boolean;         // 50%+ reduction in app usage\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"4-time-based-risk-factors",children:"4. Time-Based Risk Factors"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"High Risk Windows:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Weekend evenings (Friday 6pm - Sunday midnight)"}),"\n",(0,r.jsx)(n.li,{children:"Holidays (especially family-related)"}),"\n",(0,r.jsx)(n.li,{children:"Anniversary dates (sobriety date, loss dates)"}),"\n",(0,r.jsx)(n.li,{children:"Late night (2-5am)"}),"\n",(0,r.jsx)(n.li,{children:"Early month (financial stress periods)"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"detection-algorithm",children:"Detection Algorithm"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"interface CrisisRiskAssessment {\n  overall_risk: 'low' | 'elevated' | 'high' | 'critical';\n  signals: CrisisSignal[];\n  recommended_actions: Action[];\n  confidence: number;  // 0-1\n}\n\ninterface CrisisSignal {\n  type: string;\n  severity: 'low' | 'medium' | 'high';\n  evidence: string;\n  timestamp: Date;\n}\n\nfunction assessCrisisRisk(userId: string): CrisisRiskAssessment {\n  const checkins = getRecentCheckins(userId, 14);  // 2 weeks\n  const journals = getRecentJournals(userId, 7);   // 1 week\n  const behavior = getUserBehavior(userId);\n\n  const signals: CrisisSignal[] = [];\n\n  // Check HALT patterns\n  if (detectAngerSpike(checkins)) {\n    signals.push({\n      type: 'halt_anger_spike',\n      severity: 'high',\n      evidence: 'Anger score increased 3+ points in 48 hours',\n      timestamp: new Date(),\n    });\n  }\n\n  if (detectIsolationPattern(checkins)) {\n    signals.push({\n      type: 'halt_isolation',\n      severity: 'high',\n      evidence: 'Lonely score &gt;4 for 3 consecutive days',\n      timestamp: new Date(),\n    });\n  }\n\n  // Check behavioral signals\n  if (behavior.late_night_activity) {\n    signals.push({\n      type: 'time_distortion',\n      severity: 'medium',\n      evidence: 'Check-ins at unusual hours (2-5am)',\n      timestamp: new Date(),\n    });\n  }\n\n  if (behavior.missed_streak && behavior.time_since_last_checkin > 72) {\n    signals.push({\n      type: 'engagement_drop',\n      severity: 'high',\n      evidence: 'Daily streak broken, no check-in for 3+ days',\n      timestamp: new Date(),\n    });\n  }\n\n  // Calculate overall risk\n  const highSeverityCount = signals.filter(s => s.severity === 'high').length;\n  const mediumSeverityCount = signals.filter(s => s.severity === 'medium').length;\n\n  let overall_risk: 'low' | 'elevated' | 'high' | 'critical';\n  if (highSeverityCount >= 2) {\n    overall_risk = 'critical';\n  } else if (highSeverityCount >= 1) {\n    overall_risk = 'high';\n  } else if (mediumSeverityCount >= 2) {\n    overall_risk = 'elevated';\n  } else {\n    overall_risk = 'low';\n  }\n\n  return {\n    overall_risk,\n    signals,\n    recommended_actions: getRecommendedActions(overall_risk, signals),\n    confidence: calculateConfidence(signals),\n  };\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"response-actions",children:"Response Actions"}),"\n",(0,r.jsx)(n.h3,{id:"critical-risk-response",children:"Critical Risk Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const CRITICAL_ACTIONS = [\n  {\n    type: 'surface_sponsor',\n    message: null,  // Just show sponsor contact prominently\n    placement: 'top_of_screen',\n    persist: true,\n  },\n  {\n    type: 'surface_safety_plan',\n    message: 'Your safety plan',  // Gentle, not alarming\n    placement: 'prominent_card',\n  },\n  {\n    type: 'surface_crisis_line',\n    message: '988 Suicide & Crisis Lifeline',\n    placement: 'accessible',  // Available but not pushy\n  },\n];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"high-risk-response",children:"High Risk Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const HIGH_RISK_ACTIONS = [\n  {\n    type: 'gentle_checkin',\n    message: 'How are you doing today?',\n    placement: 'notification',\n    timing: 'next_app_open',\n  },\n  {\n    type: 'suggest_meeting',\n    message: 'There\\'s a meeting near you in 30 minutes',\n    placement: 'home_screen',\n  },\n  {\n    type: 'surface_coping_tools',\n    message: null,  // Just make them more visible\n    placement: 'quick_access',\n  },\n];\n"})}),"\n",(0,r.jsx)(n.h3,{id:"elevated-risk-response",children:"Elevated Risk Response"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"const ELEVATED_ACTIONS = [\n  {\n    type: 'encouragement',\n    message: 'You\\'ve got 47 days. One day at a time.',\n    placement: 'subtle',\n  },\n  {\n    type: 'highlight_support',\n    message: null,\n    placement: 'contacts_reminder',\n  },\n];\n"})}),"\n",(0,r.jsx)(n.h2,{id:"uiux-guidelines-for-crisis-features",children:"UI/UX Guidelines for Crisis Features"}),"\n",(0,r.jsx)(n.h3,{id:"do",children:"DO:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Surface help without asking"})," - Don't make them request it"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Be subtle"})," - A prominent contact card, not a red alert"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reduce friction"})," - One tap to call sponsor"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Respect autonomy"})," - They choose whether to engage"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cache everything"})," - Must work offline in crisis"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Fast load"})," - <200ms for crisis resources"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"dont",children:"DON'T:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Alarm or panic"}),' - No "WE DETECTED YOU\'RE IN CRISIS"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Be preachy"}),' - No lectures about what they "should" do']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Block features"}),' - Don\'t lock them out for their "safety"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Require login"})," - Crisis resources must be accessible"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Track intrusively"})," - Be transparent about what's monitored"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"database-schema-for-crisis-detection",children:"Database Schema for Crisis Detection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Store risk assessments (for analysis, not shown to user)\nCREATE TABLE crisis_risk_assessments (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,\n  assessed_at TIMESTAMPTZ DEFAULT NOW(),\n  overall_risk TEXT CHECK (overall_risk IN ('low', 'elevated', 'high', 'critical')),\n  signals JSONB,  -- Array of CrisisSignal objects\n  actions_taken JSONB,  -- What we surfaced\n  confidence DECIMAL(3,2)\n);\n\n-- Track which interventions were shown\nCREATE TABLE crisis_interventions (\n  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),\n  user_id UUID REFERENCES profiles(id) ON DELETE CASCADE,\n  assessment_id UUID REFERENCES crisis_risk_assessments(id),\n  intervention_type TEXT,\n  shown_at TIMESTAMPTZ DEFAULT NOW(),\n  engaged BOOLEAN DEFAULT FALSE,  -- Did they tap the sponsor card?\n  engagement_at TIMESTAMPTZ\n);\n\n-- Index for quick lookup\nCREATE INDEX idx_risk_user_recent ON crisis_risk_assessments (user_id, assessed_at DESC);\n"})}),"\n",(0,r.jsx)(n.h2,{id:"privacy-considerations",children:"Privacy Considerations"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Assessments are internal"}),' - User never sees "risk score"']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No sharing"})," - Crisis data never leaves the app"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"User control"})," - They can disable proactive features"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Transparent"})," - Explain what signals we watch (in settings)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Delete on request"})," - Full data deletion available"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"No third parties"})," - No analytics services see this data"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"testing-crisis-detection",children:"Testing Crisis Detection"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"// Test cases for crisis detection\nconst CRISIS_TEST_CASES = [\n  {\n    name: 'anger_spike',\n    checkins: [\n      { angry_score: 2, ...baseline },\n      { angry_score: 2, ...baseline },\n      { angry_score: 5, ...baseline },  // Spike\n    ],\n    expected_risk: 'high',\n  },\n  {\n    name: 'isolation_pattern',\n    checkins: [\n      { lonely_score: 4, ...baseline },\n      { lonely_score: 5, ...baseline },\n      { lonely_score: 5, ...baseline },\n    ],\n    expected_risk: 'high',\n  },\n  {\n    name: 'engagement_drop',\n    behavior: {\n      missed_streak: true,\n      time_since_last_checkin: 96,  // 4 days\n    },\n    expected_risk: 'high',\n  },\n  {\n    name: 'stable_user',\n    checkins: baselineCheckins(14),  // 14 days of normal\n    expected_risk: 'low',\n  },\n];\n"})}),"\n",(0,r.jsx)(n.h2,{id:"future-enhancements",children:"Future Enhancements"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ML-based sentiment analysis"})," - Beyond keyword matching"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Peer network analysis"})," - Sponsor check-in patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Calendar integration"})," - Anticipate anniversary dates"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Weather correlation"})," - Seasonal affective patterns"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Community signals"})," - Meeting attendance tracking (opt-in)"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}}}]);