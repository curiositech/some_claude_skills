"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[26126],{28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var r=t(96540);const s={},i=r.createContext(s);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(i.Provider,{value:n},e.children)}},37689:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>f,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"skills/metal_shader_expert/references/noise-effects","title":"Noise-Based Effects","description":"Organic, procedural effects using noise functions in Metal.","source":"@site/docs/skills/metal_shader_expert/references/noise-effects.md","sourceDirName":"skills/metal_shader_expert/references","slug":"/skills/metal_shader_expert/references/noise-effects","permalink":"/docs/skills/metal_shader_expert/references/noise-effects","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Noise-Based Effects","sidebar_label":"Noise-Based Effects","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Debug Tools & Visualization","permalink":"/docs/skills/metal_shader_expert/references/debug-tools"},"next":{"title":"PBR Shader Implementation","permalink":"/docs/skills/metal_shader_expert/references/pbr-shaders"}}');var s=t(74848),i=t(28453);const l={title:"Noise-Based Effects",sidebar_label:"Noise-Based Effects",sidebar_position:2},o="Noise-Based Effects",a={},c=[{value:"Hash Functions",id:"hash-functions",level:2},{value:"Smooth Noise",id:"smooth-noise",level:2},{value:"Fractal Brownian Motion (FBM)",id:"fractal-brownian-motion-fbm",level:2},{value:"FBM Parameters",id:"fbm-parameters",level:3},{value:"Animated Flowing Marble Effect",id:"animated-flowing-marble-effect",level:2},{value:"Domain Warping",id:"domain-warping",level:2},{value:"Voronoi / Cellular Noise",id:"voronoi--cellular-noise",level:2},{value:"Performance Tips",id:"performance-tips",level:2},{value:"Effect Ideas",id:"effect-ideas",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"noise-based-effects",children:"Noise-Based Effects"})}),"\n",(0,s.jsx)(n.p,{children:"Organic, procedural effects using noise functions in Metal."}),"\n",(0,s.jsx)(n.h2,{id:"hash-functions",children:"Hash Functions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-metal",children:"// Simple 2D hash function\nfloat hash(float2 p) {\n    p = fract(p * float2(234.34, 435.345));\n    p += dot(p, p + 34.23);\n    return fract(p.x * p.y);\n}\n\n// 3D hash for volumetric effects\nfloat hash3(float3 p) {\n    p = fract(p * float3(443.897, 441.423, 437.195));\n    p += dot(p, p.yzx + 19.19);\n    return fract((p.x + p.y) * p.z);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"smooth-noise",children:"Smooth Noise"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-metal",children:"float smooth_noise(float2 uv) {\n    float2 i = floor(uv);\n    float2 f = fract(uv);\n\n    // Smooth interpolation (smoothstep)\n    f = f * f * (3.0 - 2.0 * f);\n\n    // Four corners of grid\n    float a = hash(i);\n    float b = hash(i + float2(1.0, 0.0));\n    float c = hash(i + float2(0.0, 1.0));\n    float d = hash(i + float2(1.0, 1.0));\n\n    // Bilinear interpolation\n    return mix(mix(a, b, f.x),\n               mix(c, d, f.x), f.y);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"fractal-brownian-motion-fbm",children:"Fractal Brownian Motion (FBM)"}),"\n",(0,s.jsx)(n.p,{children:"Creates organic, natural-looking patterns by layering noise at different frequencies."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-metal",children:"float fbm(float2 uv, int octaves) {\n    float value = 0.0;\n    float amplitude = 0.5;\n    float frequency = 2.0;\n\n    for (int i = 0; i < octaves; i++) {\n        value += amplitude * smooth_noise(uv * frequency);\n        amplitude *= 0.5;  // Persistence\n        frequency *= 2.0;  // Lacunarity\n    }\n\n    return value;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"fbm-parameters",children:"FBM Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Effect"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Octaves"})}),(0,s.jsx)(n.td,{children:"More = finer detail, higher cost"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.strong,{children:"Persistence"})," (amplitude multiplier)"]}),(0,s.jsx)(n.td,{children:"Lower = smoother, higher = rougher"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsxs)(n.td,{children:[(0,s.jsx)(n.strong,{children:"Lacunarity"})," (frequency multiplier)"]}),(0,s.jsx)(n.td,{children:"Controls how fast detail increases"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Typical values:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Clouds: 6-8 octaves, 0.5 persistence"}),"\n",(0,s.jsx)(n.li,{children:"Terrain: 8-12 octaves, 0.6 persistence"}),"\n",(0,s.jsx)(n.li,{children:"Marble: 4-6 octaves, 0.5 persistence"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"animated-flowing-marble-effect",children:"Animated Flowing Marble Effect"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-metal",children:"fragment float4 flowing_marble_fragment(\n    VertexOut in [[stage_in]],\n    constant float& time [[buffer(0)]]\n) {\n    float2 uv = in.texcoord * 5.0;\n\n    // Create flowing pattern\n    float2 flow = float2(\n        fbm(uv + time * 0.1, 4),\n        fbm(uv + time * 0.15 + 100.0, 4)\n    );\n\n    // Distort UV with flow\n    uv += flow * 2.0;\n\n    // Create marble veins\n    float marble = fbm(uv, 6);\n    marble = abs(sin(marble * 10.0 + time * 0.5));\n\n    // Color gradient (purple to gold)\n    float3 color1 = float3(0.4, 0.1, 0.7);  // Purple\n    float3 color2 = float3(1.0, 0.7, 0.2);  // Gold\n    float3 color = mix(color1, color2, marble);\n\n    // Add shimmer\n    float shimmer = fbm(uv * 10.0 + time, 3) * 0.3;\n    color += shimmer;\n\n    return float4(color, 1.0);\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"domain-warping",children:"Domain Warping"}),"\n",(0,s.jsx)(n.p,{children:"Distort UV coordinates with noise for organic effects:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-metal",children:"float2 warp_domain(float2 uv, float time) {\n    float2 q = float2(\n        fbm(uv, 4),\n        fbm(uv + float2(5.2, 1.3), 4)\n    );\n\n    float2 r = float2(\n        fbm(uv + q + float2(1.7, 9.2) + 0.15 * time, 4),\n        fbm(uv + q + float2(8.3, 2.8) + 0.126 * time, 4)\n    );\n\n    return uv + r * 2.0;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"voronoi--cellular-noise",children:"Voronoi / Cellular Noise"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-metal",children:"float voronoi(float2 uv) {\n    float2 i = floor(uv);\n    float2 f = fract(uv);\n\n    float min_dist = 1.0;\n\n    for (int y = -1; y <= 1; y++) {\n        for (int x = -1; x <= 1; x++) {\n            float2 neighbor = float2(x, y);\n            float2 point = float2(hash(i + neighbor),\n                                   hash(i + neighbor + 127.0));\n            float dist = length(neighbor + point - f);\n            min_dist = min(min_dist, dist);\n        }\n    }\n\n    return min_dist;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Unroll small loops"}),": ",(0,s.jsx)(n.code,{children:"[[unroll]]"})," for octave loops with fixed count"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use half precision"}),": ",(0,s.jsx)(n.code,{children:"half"})," for color calculations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Precompute gradients"}),": For Perlin noise, texture-based gradients faster"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Limit octaves"}),": 4-6 is usually enough for real-time"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"LOD-based detail"}),": Fewer octaves for distant objects"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"effect-ideas",children:"Effect Ideas"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Effect"}),(0,s.jsx)(n.th,{children:"Technique"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Fire"}),(0,s.jsx)(n.td,{children:"FBM + time + color ramp"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Water caustics"}),(0,s.jsx)(n.td,{children:"Animated Voronoi"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Clouds"}),(0,s.jsx)(n.td,{children:"FBM with domain warping"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Marble"}),(0,s.jsx)(n.td,{children:"FBM with sin() banding"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Wood grain"}),(0,s.jsx)(n.td,{children:"FBM rings + turbulence"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Plasma"}),(0,s.jsx)(n.td,{children:"Multiple sin waves + time"})]})]})]})]})}function f(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}}}]);