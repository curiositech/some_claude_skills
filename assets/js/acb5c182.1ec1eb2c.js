"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[70938],{28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(96540);const r={},t=i.createContext(r);function o(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(t.Provider,{value:n},e.children)}},31439:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"skills/geospatial_data_pipeline/references/geojson-optimization","title":"GeoJSON Optimization","description":"Techniques for optimizing GeoJSON files for web performance: simplification, chunking, precision, and vector tiles.","source":"@site/docs/skills/geospatial_data_pipeline/references/geojson-optimization.md","sourceDirName":"skills/geospatial_data_pipeline/references","slug":"/skills/geospatial_data_pipeline/references/geojson-optimization","permalink":"/docs/skills/geospatial_data_pipeline/references/geojson-optimization","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"GeoJSON Optimization","sidebar_label":"GeoJSON Optimization","sidebar_position":2}}');var r=s(74848),t=s(28453);const o={title:"GeoJSON Optimization",sidebar_label:"GeoJSON Optimization",sidebar_position:2},l="GeoJSON Optimization",d={},c=[{value:"The Problem",id:"the-problem",level:2},{value:"Optimization Strategies",id:"optimization-strategies",level:2},{value:"1. Coordinate Precision",id:"1-coordinate-precision",level:3},{value:"2. Geometry Simplification",id:"2-geometry-simplification",level:3},{value:"3. Remove Unnecessary Properties",id:"3-remove-unnecessary-properties",level:3},{value:"4. Vector Tiles",id:"4-vector-tiles",level:3},{value:"5. Feature Chunking",id:"5-feature-chunking",level:3},{value:"6. Compression",id:"6-compression",level:3},{value:"7. TopoJSON",id:"7-topojson",level:3},{value:"Optimization Workflow",id:"optimization-workflow",level:2},{value:"Step 1: Analyze",id:"step-1-analyze",level:3},{value:"Step 2: Reduce Precision",id:"step-2-reduce-precision",level:3},{value:"Step 3: Simplify Geometry",id:"step-3-simplify-geometry",level:3},{value:"Step 4: Remove Properties",id:"step-4-remove-properties",level:3},{value:"Step 5: Compress",id:"step-5-compress",level:3},{value:"Step 6: Measure",id:"step-6-measure",level:3},{value:"Performance Benchmarks",id:"performance-benchmarks",level:2},{value:"When to Use Each Strategy",id:"when-to-use-each-strategy",level:2},{value:"Checklist",id:"checklist",level:2},{value:"Resources",id:"resources",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"geojson-optimization",children:"GeoJSON Optimization"})}),"\n",(0,r.jsx)(n.p,{children:"Techniques for optimizing GeoJSON files for web performance: simplification, chunking, precision, and vector tiles."}),"\n",(0,r.jsx)(n.h2,{id:"the-problem",children:"The Problem"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Large GeoJSON files crash browsers"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"50MB GeoJSON = browser freeze"}),"\n",(0,r.jsx)(n.li,{children:"10,000 polygons = slow rendering"}),"\n",(0,r.jsx)(n.li,{children:"High precision coordinates = wasted bytes"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Symptoms"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Map takes 10+ seconds to load"}),"\n",(0,r.jsx)(n.li,{children:"Browser tab crashes"}),"\n",(0,r.jsx)(n.li,{children:"Laggy panning/zooming"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"optimization-strategies",children:"Optimization Strategies"}),"\n",(0,r.jsx)(n.h3,{id:"1-coordinate-precision",children:"1. Coordinate Precision"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Default precision is often excessive."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'// \u274c Excessive precision (8 decimals = ~1mm accuracy)\n{\n  "type": "Point",\n  "coordinates": [-122.41941234, 37.77492345]\n}\n\n// \u2705 Appropriate precision (5 decimals = ~1m accuracy)\n{\n  "type": "Point",\n  "coordinates": [-122.4194, 37.7749]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Precision vs Accuracy"}),":"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Decimals"}),(0,r.jsx)(n.th,{children:"Accuracy"}),(0,r.jsx)(n.th,{children:"Use Case"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"2"}),(0,r.jsx)(n.td,{children:"~1 km"}),(0,r.jsx)(n.td,{children:"Country-level maps"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"3"}),(0,r.jsx)(n.td,{children:"~100 m"}),(0,r.jsx)(n.td,{children:"City-level maps"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"4"}),(0,r.jsx)(n.td,{children:"~10 m"}),(0,r.jsx)(n.td,{children:"Neighborhood maps"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"5"}),(0,r.jsx)(n.td,{children:"~1 m"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Web maps (default)"})})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"6"}),(0,r.jsx)(n.td,{children:"~10 cm"}),(0,r.jsx)(n.td,{children:"Engineering, surveying"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"7"}),(0,r.jsx)(n.td,{children:"~1 cm"}),(0,r.jsx)(n.td,{children:"Precision agriculture"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"8"}),(0,r.jsx)(n.td,{children:"~1 mm"}),(0,r.jsx)(n.td,{children:"Unnecessary for most apps"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tool"}),": ",(0,r.jsx)(n.code,{children:"geojson-precision"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install -g @mapbox/geojson-precision\n\n# Reduce to 5 decimals\ngeojson-precision -p 5 input.geojson output.geojson\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Savings"}),": 8 decimals \u2192 5 decimals = ~40% file size reduction"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"2-geometry-simplification",children:"2. Geometry Simplification"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Polygons with too many vertices."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Douglas-Peucker Algorithm"}),": Remove points that don't significantly change shape."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install -g @mapbox/simplify-geojson\n\n# Tolerance: higher = more aggressive\nsimplify-geojson -t 0.001 input.geojson output.geojson\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Before: 10,000 points"}),"\n",(0,r.jsx)(n.li,{children:"After (tolerance 0.001): 2,500 points"}),"\n",(0,r.jsx)(n.li,{children:"Reduction: 75%"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Visual comparison"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Before: \u26ab\u26ab\u26ab\u26ab\u26ab\u26ab\u26ab\u26ab\u26ab\u26ab (10,000 points)\nAfter:  \u26ab-----\u26ab-----\u26ab (2,500 points)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"PostGIS"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-sql",children:"-- Simplify geometry\nSELECT ST_Simplify(geometry, 0.001) FROM polygons;\n\n-- Simplify preserving topology (prevents self-intersections)\nSELECT ST_SimplifyPreserveTopology(geometry, 0.001) FROM polygons;\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tuning tolerance"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0.0001"}),": Subtle simplification (~10% reduction)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0.001"}),": Moderate simplification (~40% reduction)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0.01"}),": Aggressive simplification (~70% reduction)"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"3-remove-unnecessary-properties",children:"3. Remove Unnecessary Properties"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Feature properties bloat file size."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'// \u274c Before: 500 bytes per feature\n{\n  "type": "Feature",\n  "properties": {\n    "id": 123,\n    "name": "Feature 123",\n    "description": "Long description...",\n    "created_at": "2024-01-15T10:30:00Z",\n    "updated_at": "2024-01-16T14:20:00Z",\n    "metadata": { /* ... */ },\n    "tags": ["tag1", "tag2", "tag3"]\n  },\n  "geometry": { /* ... */ }\n}\n\n// \u2705 After: 100 bytes per feature\n{\n  "type": "Feature",\n  "properties": {\n    "id": 123,\n    "name": "Feature 123"\n  },\n  "geometry": { /* ... */ }\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Savings"}),": 500 bytes \u2192 100 bytes = 80% reduction per feature"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Script"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const geojson = require('./input.json');\n\ngeojson.features = geojson.features.map(f => ({\n  type: 'Feature',\n  properties: {\n    id: f.properties.id,\n    name: f.properties.name\n  },\n  geometry: f.geometry\n}));\n\nfs.writeFileSync('output.json', JSON.stringify(geojson));\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"4-vector-tiles",children:"4. Vector Tiles"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Loading entire dataset at once."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Split into zoom-dependent tiles."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Only load visible area"}),"\n",(0,r.jsx)(n.li,{children:"Progressive loading"}),"\n",(0,r.jsx)(n.li,{children:"Smaller payloads"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Tile Pyramid"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"z0: 1 tile (whole world)\nz5: 1,024 tiles\nz10: 1,048,576 tiles\nz14: 268,435,456 tiles\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Generate with Tippecanoe"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install -g @mapbox/tippecanoe\n\n# Generate tiles\ntippecanoe -o output.mbtiles -zg --drop-densest-as-needed input.geojson\n\n# Options:\n# -zg: Auto-detect max zoom\n# --drop-densest-as-needed: Thin out features at low zoom\n# -Z<minzoom> -z<maxzoom>: Set zoom range\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Serve tiles"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Express endpoint\napp.get('/tiles/:z/:x/:y.pbf', async (req, res) => {\n  const { z, x, y } = req.params;\n\n  // Query PostGIS for tile\n  const tile = await db.query(\n    'SELECT ST_AsMVT(q, $1) FROM (...) q',\n    ['layer']\n  );\n\n  res.set('Content-Type', 'application/x-protobuf');\n  res.send(tile.rows[0].st_asmvt);\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Client-side"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Mapbox GL JS\nmap.addSource('tiles', {\n  type: 'vector',\n  tiles: ['https://api.example.com/tiles/{z}/{x}/{y}.pbf'],\n  minzoom: 0,\n  maxzoom: 14\n});\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"5-feature-chunking",children:"5. Feature Chunking"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Single GeoJSON file with 10,000 features."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": Split into multiple files."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Strategy 1"}),": Spatial chunking (by bounds)"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Split by bounding box grid\nconst chunks = [\n  { name: 'nw', bounds: [-180, 0, -90, 90] },\n  { name: 'ne', bounds: [-90, 0, 0, 90] },\n  { name: 'sw', bounds: [-180, -90, -90, 0] },\n  { name: 'se', bounds: [-90, -90, 0, 0] }\n];\n\nchunks.forEach(chunk => {\n  const features = allFeatures.filter(f =>\n    featureIntersectsBounds(f, chunk.bounds)\n  );\n\n  fs.writeFileSync(\n    `${chunk.name}.geojson`,\n    JSON.stringify({ type: 'FeatureCollection', features })\n  );\n});\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Strategy 2"}),": Zoom-based chunking"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// High-detail features for high zoom only\nconst detailedFeatures = features.filter(f => getComplexity(f) > 100);\nconst simpleFeatures = features.filter(f => getComplexity(f) <= 100);\n\n// Save separately\nfs.writeFileSync('simple.geojson', JSON.stringify({ type: 'FeatureCollection', features: simpleFeatures }));\nfs.writeFileSync('detailed.geojson', JSON.stringify({ type: 'FeatureCollection', features: detailedFeatures }));\n\n// Load conditionally\nif (map.getZoom() > 12) {\n  loadDetailed();\n} else {\n  loadSimple();\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"6-compression",children:"6. Compression"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Gzip Compression"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Compress\ngzip -k input.geojson  # Creates input.geojson.gz\n\n# Server: nginx auto-gzip\ngzip on;\ngzip_types application/json;\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Brotli Compression"})," (better than gzip):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install\nnpm install -g brotli-cli\n\n# Compress\nbrotli input.geojson\n\n# Server: nginx brotli module\nbrotli on;\nbrotli_types application/json;\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Comparison"}),":"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Method"}),(0,r.jsx)(n.th,{children:"10MB GeoJSON"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Uncompressed"}),(0,r.jsx)(n.td,{children:"10 MB"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Gzip"}),(0,r.jsx)(n.td,{children:"2.5 MB (75% reduction)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Brotli"}),(0,r.jsx)(n.td,{children:"2 MB (80% reduction)"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"7-topojson",children:"7. TopoJSON"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Problem"}),": Adjacent polygons share borders = duplicate coordinates."]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Solution"}),": TopoJSON encodes topology once."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install -g topojson\n\n# Convert GeoJSON \u2192 TopoJSON\ngeo2topo input.geojson > output.topojson\n\n# Simplify topology\ntoposimplify -s 0.001 output.topojson > simplified.topojson\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Savings"}),": 30-80% file size reduction (depends on shared borders)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Use when"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Choropleth maps (countries, states, counties)"}),"\n",(0,r.jsx)(n.li,{children:"Adjacent polygons with shared boundaries"}),"\n",(0,r.jsx)(n.li,{children:"NOT useful for scattered points"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Client-side"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import { feature } from 'topojson-client';\n\n// Load TopoJSON\nconst topology = await fetch('/data.topojson').then(r => r.json());\n\n// Convert to GeoJSON\nconst geojson = feature(topology, topology.objects.layer);\n\n// Add to map\nmap.addSource('data', { type: 'geojson', data: geojson });\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"optimization-workflow",children:"Optimization Workflow"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-analyze",children:"Step 1: Analyze"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check file size\nls -lh input.geojson\n\n# Count features\njq '.features | length' input.geojson\n\n# Check coordinate precision\njq '.features[0].geometry.coordinates' input.geojson\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-reduce-precision",children:"Step 2: Reduce Precision"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"geojson-precision -p 5 input.geojson temp1.geojson\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-3-simplify-geometry",children:"Step 3: Simplify Geometry"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx @mapbox/geojson-precision -t 0.001 temp1.geojson temp2.geojson\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-4-remove-properties",children:"Step 4: Remove Properties"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const data = require('./temp2.geojson');\ndata.features = data.features.map(f => ({\n  type: 'Feature',\n  properties: { id: f.properties.id, name: f.properties.name },\n  geometry: f.geometry\n}));\nfs.writeFileSync('temp3.geojson', JSON.stringify(data));\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-5-compress",children:"Step 5: Compress"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"gzip -k temp3.geojson\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-6-measure",children:"Step 6: Measure"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ls -lh input.geojson input.geojson.gz temp3.geojson temp3.geojson.gz\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"performance-benchmarks",children:"Performance Benchmarks"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Test"}),": 50MB GeoJSON with 10,000 polygons"]}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Optimization"}),(0,r.jsx)(n.th,{children:"File Size"}),(0,r.jsx)(n.th,{children:"Load Time"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Original"}),(0,r.jsx)(n.td,{children:"50 MB"}),(0,r.jsx)(n.td,{children:"12 seconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Precision (5 decimals)"}),(0,r.jsx)(n.td,{children:"30 MB"}),(0,r.jsx)(n.td,{children:"8 seconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"+ Simplify (0.001)"}),(0,r.jsx)(n.td,{children:"10 MB"}),(0,r.jsx)(n.td,{children:"3 seconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"+ Remove properties"}),(0,r.jsx)(n.td,{children:"5 MB"}),(0,r.jsx)(n.td,{children:"1.5 seconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"+ Gzip"}),(0,r.jsx)(n.td,{children:"1.5 MB"}),(0,r.jsx)(n.td,{children:"0.5 seconds"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Vector tiles"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"50 KB per tile"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"<100ms"})})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Winner"}),": Vector tiles (100x improvement)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"when-to-use-each-strategy",children:"When to Use Each Strategy"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Strategy"}),(0,r.jsx)(n.th,{children:"Use When"}),(0,r.jsx)(n.th,{children:"Savings"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Reduce precision"}),(0,r.jsx)(n.td,{children:"Always"}),(0,r.jsx)(n.td,{children:"30-40%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Simplify geometry"}),(0,r.jsx)(n.td,{children:"Rendering at low zoom"}),(0,r.jsx)(n.td,{children:"40-70%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Remove properties"}),(0,r.jsx)(n.td,{children:"Properties not displayed"}),(0,r.jsx)(n.td,{children:"20-80%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Vector tiles"}),(0,r.jsx)(n.td,{children:">1000 features or >5MB"}),(0,r.jsx)(n.td,{children:"90%+"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Chunking"}),(0,r.jsx)(n.td,{children:"Mixed complexity features"}),(0,r.jsx)(n.td,{children:"Varies"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Compression"}),(0,r.jsx)(n.td,{children:"Always (server-side)"}),(0,r.jsx)(n.td,{children:"70-80%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"TopoJSON"}),(0,r.jsx)(n.td,{children:"Adjacent polygons"}),(0,r.jsx)(n.td,{children:"30-80%"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"checklist",children:"Checklist"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u25a1 Reduce coordinate precision to 5 decimals\n\u25a1 Simplify geometry for features &gt;100 points\n\u25a1 Remove unused properties from features\n\u25a1 Enable gzip/brotli compression on server\n\u25a1 Consider vector tiles for files &gt;5MB\n\u25a1 Use TopoJSON for adjacent polygons\n\u25a1 Split large files into zoom-based chunks\n\u25a1 Test load time on slow connection (3G)\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/mapbox/geojson-precision",children:"geojson-precision"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/mapbox/tippecanoe",children:"Tippecanoe"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/topojson/topojson",children:"TopoJSON"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://mourner.github.io/simplify-js/",children:"Simplify.js"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}}}]);