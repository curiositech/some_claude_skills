"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[71163],{5274:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"skills/test_automation_expert/index","title":"\u2705 Test Automation Expert","description":"Comprehensive test automation specialist covering unit, integration, and E2E testing strategies. Expert in Jest, Vitest, Playwright, Cypress, pytest, and modern testing frameworks. Guides test pyramid design, coverage optimization, flaky test detection, and CI/CD integration. Activate on \'test strategy\', \'unit tests\', \'integration tests\', \'E2E testing\', \'test coverage\', \'flaky tests\', \'mocking\', \'test fixtures\', \'TDD\', \'BDD\', \'test automation\'. NOT for manual QA processes, load/performance testing (use performance-engineer), or security testing (use security-auditor).","source":"@site/docs/skills/test_automation_expert/index.md","sourceDirName":"skills/test_automation_expert","slug":"/skills/test_automation_expert/","permalink":"/docs/skills/test_automation_expert/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Test Automation Expert","sidebar_position":1}}');var s=t(74848),r=t(28453);const a={sidebar_label:"Test Automation Expert",sidebar_position:1},l="\u2705 Test Automation Expert",o={},c=[{value:"Allowed Tools",id:"allowed-tools",level:2},{value:"Tags",id:"tags",level:2},{value:"\ud83e\udd1d Pairs Great With",id:"-pairs-great-with",level:2},{value:"References",id:"references",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Test Pyramid Philosophy",id:"test-pyramid-philosophy",level:2},{value:"Distribution Guidelines",id:"distribution-guidelines",level:3},{value:"Framework Selection",id:"framework-selection",level:2},{value:"JavaScript/TypeScript",id:"javascripttypescript",level:3},{value:"Python",id:"python",level:3},{value:"Decision Tree: Framework Selection",id:"decision-tree-framework-selection",level:3},{value:"Unit Testing Patterns",id:"unit-testing-patterns",level:2},{value:"Good Unit Test Anatomy",id:"good-unit-test-anatomy",level:3},{value:"Mocking Strategies",id:"mocking-strategies",level:3},{value:"Test Isolation Checklist",id:"test-isolation-checklist",level:3},{value:"Integration Testing Patterns",id:"integration-testing-patterns",level:2},{value:"API Integration Test",id:"api-integration-test",level:3},{value:"Component Integration (React)",id:"component-integration-react",level:3},{value:"E2E Testing Patterns",id:"e2e-testing-patterns",level:2},{value:"Playwright Best Practices",id:"playwright-best-practices",level:3},{value:"Flaky Test Detection &amp; Prevention",id:"flaky-test-detection--prevention",level:3},{value:"Coverage Optimization",id:"coverage-optimization",level:2},{value:"What to Measure",id:"what-to-measure",level:3},{value:"Coverage Configuration",id:"coverage-configuration",level:3},{value:"Finding Coverage Gaps",id:"finding-coverage-gaps",level:3},{value:"CI/CD Integration",id:"cicd-integration",level:2},{value:"GitHub Actions",id:"github-actions",level:3},{value:"Test Parallelization",id:"test-parallelization",level:3},{value:"Anti-Patterns",id:"anti-patterns",level:2},{value:"Anti-Pattern: Testing Implementation Details",id:"anti-pattern-testing-implementation-details",level:3},{value:"Anti-Pattern: Over-Mocking",id:"anti-pattern-over-mocking",level:3},{value:"Anti-Pattern: Flaky Acceptance",id:"anti-pattern-flaky-acceptance",level:3},{value:"Anti-Pattern: Coverage Theater",id:"anti-pattern-coverage-theater",level:3},{value:"Quick Commands",id:"quick-commands",level:2},{value:"Reference Files",id:"reference-files",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"-test-automation-expert",children:"\u2705 Test Automation Expert"})}),"\n",(0,s.jsx)(n.p,{children:"Comprehensive test automation specialist covering unit, integration, and E2E testing strategies. Expert in Jest, Vitest, Playwright, Cypress, pytest, and modern testing frameworks. Guides test pyramid design, coverage optimization, flaky test detection, and CI/CD integration. Activate on 'test strategy', 'unit tests', 'integration tests', 'E2E testing', 'test coverage', 'flaky tests', 'mocking', 'test fixtures', 'TDD', 'BDD', 'test automation'. NOT for manual QA processes, load/performance testing (use performance-engineer), or security testing (use security-auditor)."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"allowed-tools",children:"Allowed Tools"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Read, Write, Edit, Bash(npm test:*, npx jest:*, npx vitest:*, npx playwright:*, pytest:*), Grep, Glob\n"})}),"\n",(0,s.jsx)(n.h2,{id:"tags",children:"Tags"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"testing"})," ",(0,s.jsx)(n.code,{children:"jest"})," ",(0,s.jsx)(n.code,{children:"playwright"})," ",(0,s.jsx)(n.code,{children:"tdd"})," ",(0,s.jsx)(n.code,{children:"coverage"})]}),"\n",(0,s.jsx)(n.h2,{id:"-pairs-great-with",children:"\ud83e\udd1d Pairs Great With"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/skills/refactoring_surgeon",children:"Refactoring Surgeon"})}),": Tests before refactoring"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.a,{href:"/docs/skills/devops_automator",children:"Devops Automator"})}),": CI/CD test integration"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./references/ci-integration",children:"CI/CD Test Integration"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./references/coverage-patterns",children:"Coverage Optimization Patterns"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./references/framework-comparison",children:"Testing Framework Comparison"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./references/test-strategy",children:"Test Strategy Framework"})}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"test-automation-expert",children:"Test Automation Expert"}),"\n",(0,s.jsx)(n.p,{children:"Comprehensive testing guidance from unit to E2E. Designs test strategies, implements automation, and optimizes coverage for sustainable quality."}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use for:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Designing test strategy for new projects"}),"\n",(0,s.jsx)(n.li,{children:"Setting up testing frameworks (Jest, Vitest, Playwright, Cypress, pytest)"}),"\n",(0,s.jsx)(n.li,{children:"Writing effective unit, integration, and E2E tests"}),"\n",(0,s.jsx)(n.li,{children:"Optimizing test coverage and eliminating gaps"}),"\n",(0,s.jsx)(n.li,{children:"Debugging flaky tests"}),"\n",(0,s.jsx)(n.li,{children:"CI/CD test pipeline configuration"}),"\n",(0,s.jsx)(n.li,{children:"Test-Driven Development (TDD) guidance"}),"\n",(0,s.jsx)(n.li,{children:"Mocking strategies and test fixtures"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Do NOT use for:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Manual QA test case writing - this is automation-focused"}),"\n",(0,s.jsx)(n.li,{children:"Load/performance testing - use performance-engineer skill"}),"\n",(0,s.jsx)(n.li,{children:"Security testing - use security-auditor skill"}),"\n",(0,s.jsx)(n.li,{children:"API contract testing only - use backend-architect for API design"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"test-pyramid-philosophy",children:"Test Pyramid Philosophy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"         /\\\n        /  \\      E2E Tests (10%)\n       /----\\     - Critical user journeys\n      /      \\    - Cross-browser validation\n     /--------\\\n    /          \\  Integration Tests (20%)\n   /            \\ - API contracts\n  /--------------\\- Component interactions\n /                \\\n/------------------\\ Unit Tests (70%)\n                    - Fast, isolated, deterministic\n                    - Business logic validation\n"})}),"\n",(0,s.jsx)(n.h3,{id:"distribution-guidelines",children:"Distribution Guidelines"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Test Type"}),(0,s.jsx)(n.th,{children:"Percentage"}),(0,s.jsx)(n.th,{children:"Execution Time"}),(0,s.jsx)(n.th,{children:"Purpose"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Unit"}),(0,s.jsx)(n.td,{children:"70%"}),(0,s.jsx)(n.td,{children:"< 100ms each"}),(0,s.jsx)(n.td,{children:"Logic validation"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Integration"}),(0,s.jsx)(n.td,{children:"20%"}),(0,s.jsx)(n.td,{children:"< 1s each"}),(0,s.jsx)(n.td,{children:"Component contracts"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"E2E"}),(0,s.jsx)(n.td,{children:"10%"}),(0,s.jsx)(n.td,{children:"< 30s each"}),(0,s.jsx)(n.td,{children:"Critical paths"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"framework-selection",children:"Framework Selection"}),"\n",(0,s.jsx)(n.h3,{id:"javascripttypescript",children:"JavaScript/TypeScript"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Framework"}),(0,s.jsx)(n.th,{children:"Best For"}),(0,s.jsx)(n.th,{children:"Speed"}),(0,s.jsx)(n.th,{children:"Config Complexity"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Vitest"})}),(0,s.jsx)(n.td,{children:"Vite projects, modern ESM"}),(0,s.jsx)(n.td,{children:"Fastest"}),(0,s.jsx)(n.td,{children:"Low"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Jest"})}),(0,s.jsx)(n.td,{children:"React, established projects"}),(0,s.jsx)(n.td,{children:"Fast"}),(0,s.jsx)(n.td,{children:"Medium"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Playwright"})}),(0,s.jsx)(n.td,{children:"E2E, cross-browser"}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"Low"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Cypress"})}),(0,s.jsx)(n.td,{children:"E2E, component testing"}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"Medium"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"python",children:"Python"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Framework"}),(0,s.jsx)(n.th,{children:"Best For"}),(0,s.jsx)(n.th,{children:"Speed"}),(0,s.jsx)(n.th,{children:"Features"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"pytest"})}),(0,s.jsx)(n.td,{children:"Everything"}),(0,s.jsx)(n.td,{children:"Fast"}),(0,s.jsx)(n.td,{children:"Fixtures, plugins"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"unittest"})}),(0,s.jsx)(n.td,{children:"Standard library"}),(0,s.jsx)(n.td,{children:"Medium"}),(0,s.jsx)(n.td,{children:"Built-in"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"hypothesis"})}),(0,s.jsx)(n.td,{children:"Property-based"}),(0,s.jsx)(n.td,{children:"Varies"}),(0,s.jsx)(n.td,{children:"Generative"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"decision-tree-framework-selection",children:"Decision Tree: Framework Selection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"New project?\n\u251c\u2500\u2500 Yes \u2192 Using Vite?\n\u2502   \u251c\u2500\u2500 Yes \u2192 Vitest\n\u2502   \u2514\u2500\u2500 No \u2192 Jest or Vitest (both work)\n\u2514\u2500\u2500 No \u2192 What exists?\n    \u251c\u2500\u2500 Jest \u2192 Keep Jest (migration cost rarely worth it)\n    \u251c\u2500\u2500 Mocha \u2192 Consider migration to Vitest\n    \u2514\u2500\u2500 Nothing \u2192 Vitest (modern default)\n\nNeed E2E?\n\u251c\u2500\u2500 Cross-browser critical \u2192 Playwright\n\u251c\u2500\u2500 Developer experience priority \u2192 Cypress\n\u2514\u2500\u2500 Both \u2192 Playwright (more flexible)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"unit-testing-patterns",children:"Unit Testing Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"good-unit-test-anatomy",children:"Good Unit Test Anatomy"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"describe('UserService', () => {\n  describe('validateEmail', () => {\n    // Arrange-Act-Assert pattern\n    it('should accept valid email formats', () => {\n      // Arrange\n      const validEmails = ['user@example.com', 'name+tag@domain.co'];\n\n      // Act & Assert\n      validEmails.forEach(email => {\n        expect(validateEmail(email)).toBe(true);\n      });\n    });\n\n    it('should reject invalid email formats', () => {\n      // Arrange\n      const invalidEmails = ['invalid', '@missing.com', 'no@tld'];\n\n      // Act & Assert\n      invalidEmails.forEach(email => {\n        expect(validateEmail(email)).toBe(false);\n      });\n    });\n\n    // Edge cases explicitly tested\n    it('should handle empty string', () => {\n      expect(validateEmail('')).toBe(false);\n    });\n\n    it('should handle null/undefined', () => {\n      expect(validateEmail(null)).toBe(false);\n      expect(validateEmail(undefined)).toBe(false);\n    });\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"mocking-strategies",children:"Mocking Strategies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Good: Mock at boundaries\njest.mock('../services/api', () => ({\n  fetchUser: jest.fn()\n}));\n\n// \u2705 Good: Explicit mock setup per test\nbeforeEach(() => {\n  fetchUser.mockReset();\n});\n\nit('handles user not found', async () => {\n  fetchUser.mockRejectedValue(new NotFoundError());\n  await expect(getUser(123)).rejects.toThrow('User not found');\n});\n\n// \u274c Bad: Mocking implementation details\njest.mock('../utils/internal-helper'); // Don't mock internals\n"})}),"\n",(0,s.jsx)(n.h3,{id:"test-isolation-checklist",children:"Test Isolation Checklist"}),"\n",(0,s.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Each test can run independently"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No shared mutable state between tests"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Database/API state reset between tests"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No test order dependencies"]}),"\n",(0,s.jsxs)(n.li,{className:"task-list-item",children:[(0,s.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Parallel execution safe"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"integration-testing-patterns",children:"Integration Testing Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"api-integration-test",children:"API Integration Test"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"describe('POST /api/users', () => {\n  let app;\n  let db;\n\n  beforeAll(async () => {\n    db = await createTestDatabase();\n    app = createApp({ db });\n  });\n\n  afterAll(async () => {\n    await db.close();\n  });\n\n  beforeEach(async () => {\n    await db.clear();\n  });\n\n  it('creates user with valid data', async () => {\n    const response = await request(app)\n      .post('/api/users')\n      .send({ name: 'Test', email: 'test@example.com' })\n      .expect(201);\n\n    expect(response.body).toMatchObject({\n      id: expect.any(String),\n      name: 'Test',\n      email: 'test@example.com'\n    });\n\n    // Verify side effects\n    const dbUser = await db.users.findById(response.body.id);\n    expect(dbUser).toBeDefined();\n  });\n\n  it('rejects duplicate email', async () => {\n    await db.users.create({ name: 'Existing', email: 'test@example.com' });\n\n    await request(app)\n      .post('/api/users')\n      .send({ name: 'New', email: 'test@example.com' })\n      .expect(409);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"component-integration-react",children:"Component Integration (React)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import { render, screen, waitFor } from '@testing-library/react';\nimport userEvent from '@testing-library/user-event';\nimport { UserProfile } from './UserProfile';\nimport { UserProvider } from '../context/UserContext';\n\ndescribe('UserProfile integration', () => {\n  it('loads and displays user data', async () => {\n    render(\n      <UserProvider>\n        <UserProfile userId=\"123\" />\n      </UserProvider>\n    );\n\n    // Verify loading state\n    expect(screen.getByRole('progressbar')).toBeInTheDocument();\n\n    // Wait for data\n    await waitFor(() => {\n      expect(screen.getByText('John Doe')).toBeInTheDocument();\n    });\n\n    // Verify loaded state\n    expect(screen.queryByRole('progressbar')).not.toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"e2e-testing-patterns",children:"E2E Testing Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"playwright-best-practices",children:"Playwright Best Practices"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import { test, expect } from '@playwright/test';\n\ntest.describe('Checkout Flow', () => {\n  test.beforeEach(async ({ page }) => {\n    // Seed test data via API\n    await page.request.post('/api/test/seed', {\n      data: { scenario: 'checkout-ready' }\n    });\n  });\n\n  test('complete purchase with credit card', async ({ page }) => {\n    await page.goto('/cart');\n\n    // Use accessible selectors\n    await page.getByRole('button', { name: 'Proceed to checkout' }).click();\n\n    // Fill payment form\n    await page.getByLabel('Card number').fill('4242424242424242');\n    await page.getByLabel('Expiry').fill('12/25');\n    await page.getByLabel('CVC').fill('123');\n\n    // Complete purchase\n    await page.getByRole('button', { name: 'Pay now' }).click();\n\n    // Verify success\n    await expect(page.getByRole('heading', { name: 'Order confirmed' })).toBeVisible();\n    await expect(page.getByText(/Order #\\d+/)).toBeVisible();\n  });\n\n  test('shows error for declined card', async ({ page }) => {\n    await page.goto('/checkout');\n\n    // Use test card that triggers decline\n    await page.getByLabel('Card number').fill('4000000000000002');\n    await page.getByLabel('Expiry').fill('12/25');\n    await page.getByLabel('CVC').fill('123');\n\n    await page.getByRole('button', { name: 'Pay now' }).click();\n\n    await expect(page.getByRole('alert')).toContainText('Card declined');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"flaky-test-detection--prevention",children:"Flaky Test Detection & Prevention"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Common Causes:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Race conditions in async operations"}),"\n",(0,s.jsx)(n.li,{children:"Time-dependent tests"}),"\n",(0,s.jsx)(n.li,{children:"Shared state between tests"}),"\n",(0,s.jsx)(n.li,{children:"Network variability"}),"\n",(0,s.jsx)(n.li,{children:"Animation/transition timing"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Fixes:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Bad: Fixed timeout\nawait page.waitForTimeout(2000);\n\n// \u2705 Good: Wait for specific condition\nawait expect(page.getByText('Loaded')).toBeVisible();\n\n// \u274c Bad: Checking exact time\nexpect(new Date()).toEqual(specificDate);\n\n// \u2705 Good: Mock time\njest.useFakeTimers();\njest.setSystemTime(new Date('2024-01-15'));\n\n// \u274c Bad: Depending on animation completion\nawait page.click('.button');\nexpect(await page.isVisible('.modal')).toBe(true);\n\n// \u2705 Good: Wait for animation\nawait page.click('.button');\nawait expect(page.locator('.modal')).toBeVisible();\n"})}),"\n",(0,s.jsx)(n.h2,{id:"coverage-optimization",children:"Coverage Optimization"}),"\n",(0,s.jsx)(n.h3,{id:"what-to-measure",children:"What to Measure"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Metric"}),(0,s.jsx)(n.th,{children:"Target"}),(0,s.jsx)(n.th,{children:"Priority"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Line coverage"}),(0,s.jsx)(n.td,{children:"80%+"}),(0,s.jsx)(n.td,{children:"Medium"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Branch coverage"}),(0,s.jsx)(n.td,{children:"75%+"}),(0,s.jsx)(n.td,{children:"High"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Function coverage"}),(0,s.jsx)(n.td,{children:"90%+"}),(0,s.jsx)(n.td,{children:"Medium"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Critical path coverage"}),(0,s.jsx)(n.td,{children:"100%"}),(0,s.jsx)(n.td,{children:"Critical"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"coverage-configuration",children:"Coverage Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// vitest.config.js\nexport default defineConfig({\n  test: {\n    coverage: {\n      provider: 'v8',\n      reporter: ['text', 'json', 'html'],\n      exclude: [\n        'node_modules/',\n        'test/',\n        '**/*.d.ts',\n        '**/*.config.*',\n        '**/index.ts', // barrel files\n      ],\n      thresholds: {\n        branches: 75,\n        functions: 80,\n        lines: 80,\n        statements: 80\n      }\n    }\n  }\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"finding-coverage-gaps",children:"Finding Coverage Gaps"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Generate detailed coverage report\nnpx vitest run --coverage\n\n# Find untested files\nnpx vitest run --coverage --reporter=json | jq '.coverageMap | to_entries | map(select(.value.s | values | any(. == 0))) | .[].key'\n"})}),"\n",(0,s.jsx)(n.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,s.jsx)(n.h3,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",children:"name: Tests\non: [push, pull_request]\n\njobs:\n  unit-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'npm'\n      - run: npm ci\n      - run: npm test -- --coverage\n      - uses: codecov/codecov-action@v4\n\n  e2e-tests:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n      - uses: actions/setup-node@v4\n      - run: npm ci\n      - run: npx playwright install --with-deps\n      - run: npm run test:e2e\n      - uses: actions/upload-artifact@v4\n        if: failure()\n        with:\n          name: playwright-report\n          path: playwright-report/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"test-parallelization",children:"Test Parallelization"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// vitest.config.js - parallel by default\nexport default defineConfig({\n  test: {\n    pool: 'threads',\n    poolOptions: {\n      threads: {\n        singleThread: false\n      }\n    }\n  }\n});\n\n// playwright.config.js\nexport default defineConfig({\n  workers: process.env.CI ? 2 : undefined,\n  fullyParallel: true\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"anti-patterns",children:"Anti-Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-testing-implementation-details",children:"Anti-Pattern: Testing Implementation Details"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What it looks like:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Testing internal state\nexpect(component.state.isLoading).toBe(true);\n\n// \u274c Testing private methods\nexpect(service._calculateHash()).toBe('abc123');\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong:"})," Couples tests to implementation, breaks on refactors"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Instead:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u2705 Test observable behavior\nexpect(screen.getByRole('progressbar')).toBeInTheDocument();\n\n// \u2705 Test public interface\nexpect(service.getHash()).toBe('abc123');\n"})}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-over-mocking",children:"Anti-Pattern: Over-Mocking"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What it looks like:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Mocking everything\njest.mock('../utils/format');\njest.mock('../utils/validate');\njest.mock('../utils/transform');\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong:"})," Tests pass even when real code is broken"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Instead:"})," Mock only at system boundaries (APIs, databases, external services)"]}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-flaky-acceptance",children:"Anti-Pattern: Flaky Acceptance"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"What it looks like:"}),' "That test is just flaky, skip it"']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong:"})," Flaky tests indicate real problems (race conditions, timing issues)"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Instead:"})," Fix the flakiness or quarantine while fixing"]}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-coverage-theater",children:"Anti-Pattern: Coverage Theater"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"What it looks like:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// \u274c Testing for coverage, not behavior\nit('covers the function', () => {\n  myFunction();\n  // No assertions!\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong:"})," 100% coverage with 0% confidence"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Instead:"})," Every test should assert meaningful behavior"]}),"\n",(0,s.jsx)(n.h2,{id:"quick-commands",children:"Quick Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Run all tests\nnpm test\n\n# Run with coverage\nnpm test -- --coverage\n\n# Run specific file\nnpm test -- src/utils/format.test.ts\n\n# Run in watch mode\nnpm test -- --watch\n\n# Run E2E tests\nnpx playwright test\n\n# Run E2E with UI\nnpx playwright test --ui\n\n# Debug E2E test\nnpx playwright test --debug\n\n# Update snapshots\nnpm test -- -u\n"})}),"\n",(0,s.jsx)(n.h2,{id:"reference-files",children:"Reference Files"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"references/test-strategy.md"})," - Comprehensive test strategy framework"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"references/framework-comparison.md"})," - Detailed framework comparison"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"references/coverage-patterns.md"})," - Coverage optimization techniques"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"references/ci-integration.md"})," - CI/CD pipeline configurations"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Covers"}),": Test strategy | Unit testing | Integration testing | E2E testing | Coverage | CI/CD | Flaky test debugging"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use with"}),": security-auditor (security tests) | performance-engineer (load tests) | code-reviewer (test quality)"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>l});var i=t(96540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);