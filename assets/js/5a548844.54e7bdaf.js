"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[22998],{233:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"skills/web_cloud_designer/references/svg-filter-deep-dive","title":"SVG Filter Deep Dive for Cloud Effects","description":"Filter Coordinate Systems","source":"@site/docs/skills/web_cloud_designer/references/svg-filter-deep-dive.md","sourceDirName":"skills/web_cloud_designer/references","slug":"/skills/web_cloud_designer/references/svg-filter-deep-dive","permalink":"/docs/skills/web_cloud_designer/references/svg-filter-deep-dive","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"SVG Filter Deep Dive for Cloud Effects","sidebar_label":"SVG Filter Deep Dive for Cl...","sidebar_position":3}}');var l=i(74848),t=i(28453);const r={title:"SVG Filter Deep Dive for Cloud Effects",sidebar_label:"SVG Filter Deep Dive for Cl...",sidebar_position:3},c="SVG Filter Deep Dive for Cloud Effects",d={},a=[{value:"Filter Coordinate Systems",id:"filter-coordinate-systems",level:2},{value:"filterUnits",id:"filterunits",level:3},{value:"primitiveUnits",id:"primitiveunits",level:3},{value:"feTurbulence In-Depth",id:"feturbulence-in-depth",level:2},{value:"Perlin vs Turbulence",id:"perlin-vs-turbulence",level:3},{value:"baseFrequency Math",id:"basefrequency-math",level:3},{value:"Anisotropic Frequency",id:"anisotropic-frequency",level:3},{value:"numOctaves Performance",id:"numoctaves-performance",level:3},{value:"Seed Strategy",id:"seed-strategy",level:3},{value:"feDisplacementMap Mechanics",id:"fedisplacementmap-mechanics",level:2},{value:"Channel Selection",id:"channel-selection",level:3},{value:"Scale Values",id:"scale-values",level:3},{value:"Displacement Formula",id:"displacement-formula",level:3},{value:"feDiffuseLighting for Volume",id:"fediffuselighting-for-volume",level:2},{value:"Light Types",id:"light-types",level:3},{value:"Azimuth and Elevation",id:"azimuth-and-elevation",level:3},{value:"surfaceScale",id:"surfacescale",level:3},{value:"Compositing Filters",id:"compositing-filters",level:2},{value:"feComposite Operations",id:"fecomposite-operations",level:3},{value:"Building Complex Clouds",id:"building-complex-clouds",level:3},{value:"Performance Profiling",id:"performance-profiling",level:2},{value:"Chrome DevTools",id:"chrome-devtools",level:3},{value:"Optimization Checklist",id:"optimization-checklist",level:3},{value:"Memory Considerations",id:"memory-considerations",level:3},{value:"Browser Compatibility",id:"browser-compatibility",level:2},{value:"Advanced: Animated Morphing",id:"advanced-animated-morphing",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"svg-filter-deep-dive-for-cloud-effects",children:"SVG Filter Deep Dive for Cloud Effects"})}),"\n",(0,l.jsx)(n.h2,{id:"filter-coordinate-systems",children:"Filter Coordinate Systems"}),"\n",(0,l.jsx)(n.h3,{id:"filterunits",children:"filterUnits"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- userSpaceOnUse: coordinates in user units (pixels) --\x3e\n<filter filterUnits="userSpaceOnUse" x="0" y="0" width="800" height="600">\n\n\x3c!-- objectBoundingBox (default): coordinates as percentages of element --\x3e\n<filter filterUnits="objectBoundingBox" x="-50%" y="-50%" width="200%" height="200%">\n'})}),"\n",(0,l.jsxs)(n.p,{children:["For clouds, always use ",(0,l.jsx)(n.code,{children:"objectBoundingBox"})," with expanded region to prevent clipping."]}),"\n",(0,l.jsx)(n.h3,{id:"primitiveunits",children:"primitiveUnits"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- objectBoundingBox: filter primitive values scale with element --\x3e\n<filter primitiveUnits="objectBoundingBox">\n  \x3c!-- stdDeviation of 0.05 = 5% of element size --\x3e\n  <feGaussianBlur stdDeviation="0.05"/>\n</filter>\n\n\x3c!-- userSpaceOnUse: filter primitive values in pixels --\x3e\n<filter primitiveUnits="userSpaceOnUse">\n  \x3c!-- stdDeviation in actual pixels --\x3e\n  <feGaussianBlur stdDeviation="10"/>\n</filter>\n'})}),"\n",(0,l.jsx)(n.h2,{id:"feturbulence-in-depth",children:"feTurbulence In-Depth"}),"\n",(0,l.jsx)(n.h3,{id:"perlin-vs-turbulence",children:"Perlin vs Turbulence"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- fractalNoise: smooth, cloudy, organic --\x3e\n<feTurbulence type="fractalNoise"/>\n\n\x3c!-- turbulence: sharp, watery, fiery --\x3e\n<feTurbulence type="turbulence"/>\n'})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.strong,{children:["Always use ",(0,l.jsx)(n.code,{children:"fractalNoise"})," for clouds."]})}),"\n",(0,l.jsx)(n.h3,{id:"basefrequency-math",children:"baseFrequency Math"}),"\n",(0,l.jsx)(n.p,{children:'The frequency controls the "zoom level" of the noise:'}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"visual_size = 1 / baseFrequency\n"})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"baseFrequency"}),(0,l.jsx)(n.th,{children:"Visual Size"}),(0,l.jsx)(n.th,{children:"Best For"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"0.003"}),(0,l.jsx)(n.td,{children:"~333px features"}),(0,l.jsx)(n.td,{children:"Giant cumulus"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"0.008"}),(0,l.jsx)(n.td,{children:"~125px features"}),(0,l.jsx)(n.td,{children:"Standard cumulus"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"0.015"}),(0,l.jsx)(n.td,{children:"~67px features"}),(0,l.jsx)(n.td,{children:"Smaller clouds"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"0.03"}),(0,l.jsx)(n.td,{children:"~33px features"}),(0,l.jsx)(n.td,{children:"Wispy details"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"anisotropic-frequency",children:"Anisotropic Frequency"}),"\n",(0,l.jsx)(n.p,{children:"Two values create directional stretch:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Horizontal stretch (cirrus-like) --\x3e\n<feTurbulence baseFrequency="0.02 0.005"/>\n\n\x3c!-- Vertical stretch (towering clouds) --\x3e\n<feTurbulence baseFrequency="0.005 0.02"/>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"numoctaves-performance",children:"numOctaves Performance"}),"\n",(0,l.jsx)(n.p,{children:"Each octave doubles the computation:"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"octaves"}),(0,l.jsx)(n.th,{children:"Relative Cost"}),(0,l.jsx)(n.th,{children:"Visual Impact"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1"}),(0,l.jsx)(n.td,{children:"1x"}),(0,l.jsx)(n.td,{children:"Blurry blobs"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"2"}),(0,l.jsx)(n.td,{children:"2x"}),(0,l.jsx)(n.td,{children:"Basic shapes"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3"}),(0,l.jsx)(n.td,{children:"4x"}),(0,l.jsx)(n.td,{children:"Good detail"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"4"}),(0,l.jsx)(n.td,{children:"8x"}),(0,l.jsx)(n.td,{children:"Fine detail"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"5"}),(0,l.jsx)(n.td,{children:"16x"}),(0,l.jsx)(n.td,{children:"Maximum useful"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"6+"}),(0,l.jsx)(n.td,{children:"32x+"}),(0,l.jsx)(n.td,{children:"Diminishing returns"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"seed-strategy",children:"Seed Strategy"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// Generate variety without performance cost\nconst seeds = [1, 42, 137, 256, 512, 789];\n\n// Use seed based on position for consistent regeneration\nconst getSeed = (x, y) => Math.abs((x * 31 + y * 17) % 1000);\n"})}),"\n",(0,l.jsx)(n.h2,{id:"fedisplacementmap-mechanics",children:"feDisplacementMap Mechanics"}),"\n",(0,l.jsx)(n.h3,{id:"channel-selection",children:"Channel Selection"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<feDisplacementMap\n  xChannelSelector="R"  \x3c!-- R, G, B, or A --\x3e\n  yChannelSelector="G"\n/>\n'})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Channel Combo"}),(0,l.jsx)(n.th,{children:"Effect"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"R, G"}),(0,l.jsx)(n.td,{children:"Standard displacement"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"R, R"}),(0,l.jsx)(n.td,{children:"Horizontal-only stretch"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"G, G"}),(0,l.jsx)(n.td,{children:"Vertical-only stretch"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"A, A"}),(0,l.jsx)(n.td,{children:"Uniform scaling"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"scale-values",children:"Scale Values"}),"\n",(0,l.jsxs)(n.p,{children:["The ",(0,l.jsx)(n.code,{children:"scale"})," attribute is in pixels:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Displacement range: -scale/2 to +scale/2 --\x3e\n<feDisplacementMap scale="100"/>\n\x3c!-- Pixels displaced from -50 to +50 --\x3e\n'})}),"\n",(0,l.jsx)(n.h3,{id:"displacement-formula",children:"Displacement Formula"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"P'(x,y) = P(x + scale * (XC(x,y) - 0.5), y + scale * (YC(x,y) - 0.5))\n"})}),"\n",(0,l.jsx)(n.p,{children:"Where XC and YC are the selected channel values normalized to 0-1."}),"\n",(0,l.jsx)(n.h2,{id:"fediffuselighting-for-volume",children:"feDiffuseLighting for Volume"}),"\n",(0,l.jsx)(n.h3,{id:"light-types",children:"Light Types"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Distant light: sun-like, parallel rays --\x3e\n<feDistantLight azimuth="45" elevation="55"/>\n\n\x3c!-- Point light: nearby source, radial --\x3e\n<fePointLight x="100" y="100" z="200"/>\n\n\x3c!-- Spot light: focused beam --\x3e\n<feSpotLight x="100" y="100" z="200"\n             pointsAtX="200" pointsAtY="200" pointsAtZ="0"\n             limitingConeAngle="30"/>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"azimuth-and-elevation",children:"Azimuth and Elevation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"azimuth: 0 = right, 90 = top, 180 = left, 270 = bottom\nelevation: 0 = horizon, 90 = directly above\n"})}),"\n",(0,l.jsx)(n.p,{children:"Common sky lighting:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Morning: azimuth=90, elevation=15-30"}),"\n",(0,l.jsx)(n.li,{children:"Noon: azimuth=any, elevation=70-90"}),"\n",(0,l.jsx)(n.li,{children:"Evening: azimuth=270, elevation=15-30"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"surfacescale",children:"surfaceScale"}),"\n",(0,l.jsx)(n.p,{children:"Controls how much the input affects lighting:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<feDiffuseLighting surfaceScale="5">\n  \x3c!-- Higher = more dramatic shadows --\x3e\n</feDiffuseLighting>\n'})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"surfaceScale"}),(0,l.jsx)(n.th,{children:"Effect"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"1-2"}),(0,l.jsx)(n.td,{children:"Subtle shading"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"3-5"}),(0,l.jsx)(n.td,{children:"Normal clouds"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"6-10"}),(0,l.jsx)(n.td,{children:"Dramatic storm clouds"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"compositing-filters",children:"Compositing Filters"}),"\n",(0,l.jsx)(n.h3,{id:"fecomposite-operations",children:"feComposite Operations"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'\x3c!-- Multiply: darken overlaps --\x3e\n<feComposite operator="arithmetic" k1="0" k2="1" k3="1" k4="0"/>\n\n\x3c!-- Screen: lighten overlaps --\x3e\n<feComposite operator="over"/>\n\n\x3c!-- Intersection: only where both exist --\x3e\n<feComposite operator="in"/>\n'})}),"\n",(0,l.jsx)(n.h3,{id:"building-complex-clouds",children:"Building Complex Clouds"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-xml",children:'<filter id="complexCloud">\n  \x3c!-- Base cloud shape --\x3e\n  <feTurbulence type="fractalNoise" baseFrequency="0.008"\n                numOctaves="4" seed="1" result="mainNoise"/>\n\n  \x3c!-- Detail overlay --\x3e\n  <feTurbulence type="fractalNoise" baseFrequency="0.02"\n                numOctaves="2" seed="2" result="detailNoise"/>\n\n  \x3c!-- Combine noises --\x3e\n  <feComposite in="mainNoise" in2="detailNoise"\n               operator="arithmetic" k1="0.7" k2="0.3" k3="0" k4="0"\n               result="combinedNoise"/>\n\n  \x3c!-- Apply displacement --\x3e\n  <feDisplacementMap in="SourceGraphic" in2="combinedNoise" scale="80"/>\n</filter>\n'})}),"\n",(0,l.jsx)(n.h2,{id:"performance-profiling",children:"Performance Profiling"}),"\n",(0,l.jsx)(n.h3,{id:"chrome-devtools",children:"Chrome DevTools"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsx)(n.li,{children:"Open Performance tab"}),"\n",(0,l.jsx)(n.li,{children:"Record while scrolling/animating"}),"\n",(0,l.jsx)(n.li,{children:'Look for "Recalculate Style" and "Paint" events'}),"\n",(0,l.jsx)(n.li,{children:'Filter events by "filter" keyword'}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"optimization-checklist",children:"Optimization Checklist"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"[ ] numOctaves <= 5\n[ ] Filter region not excessively large\n[ ] No filter animations (use transforms)\n[ ] Filters defined once, referenced by ID\n[ ] will-change only on animated elements\n[ ] Reduced motion media query respected\n[ ] Mobile uses simplified filters\n"})}),"\n",(0,l.jsx)(n.h3,{id:"memory-considerations",children:"Memory Considerations"}),"\n",(0,l.jsx)(n.p,{children:"Each filter creates intermediate buffers:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Buffer size = width * height * 4 bytes * (number of filter steps)\n"})}),"\n",(0,l.jsx)(n.p,{children:"A 1920x1080 filter with 5 steps uses ~40MB."}),"\n",(0,l.jsx)(n.h2,{id:"browser-compatibility",children:"Browser Compatibility"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Feature"}),(0,l.jsx)(n.th,{children:"Chrome"}),(0,l.jsx)(n.th,{children:"Firefox"}),(0,l.jsx)(n.th,{children:"Safari"}),(0,l.jsx)(n.th,{children:"Edge"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"feTurbulence"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"feDisplacementMap"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"feDiffuseLighting"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:"Filter animations"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Yes"}),(0,l.jsx)(n.td,{children:"Partial"}),(0,l.jsx)(n.td,{children:"Yes"})]})]})]}),"\n",(0,l.jsx)(n.p,{children:"Safari caveats:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"<animate>"})," on filter attributes may stutter"]}),"\n",(0,l.jsx)(n.li,{children:"Prefer CSS animations with transforms"}),"\n",(0,l.jsx)(n.li,{children:"Test thoroughly on iOS"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"advanced-animated-morphing",children:"Advanced: Animated Morphing"}),"\n",(0,l.jsx)(n.p,{children:"For smooth cloud morphing without animating filter attributes:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-javascript",children:"// Cross-fade between two filtered elements\nconst cloud1 = document.querySelector('.cloud-1');\nconst cloud2 = document.querySelector('.cloud-2');\n\n// Alternate visibility with different seeds\ngsap.timeline({ repeat: -1 })\n  .to(cloud1, { opacity: 1, duration: 5 })\n  .to(cloud1, { opacity: 0, duration: 5 }, '+=5')\n  .to(cloud2, { opacity: 1, duration: 5 }, '-=5')\n  .to(cloud2, { opacity: 0, duration: 5 }, '+=5');\n"})}),"\n",(0,l.jsx)(n.p,{children:"This avoids recalculating filters while achieving morphing effect."})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>c});var s=i(96540);const l={},t=s.createContext(l);function r(e){const n=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),s.createElement(t.Provider,{value:n},e.children)}}}]);