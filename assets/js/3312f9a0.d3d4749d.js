"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[14060],{28453:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>o});var s=r(96540);const t={},i=s.createContext(t);function l(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(i.Provider,{value:n},e.children)}},58738:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"skills/real_time_collaboration_engine/references/ot-vs-crdt","title":"Operational Transform vs CRDTs","description":"Deep comparison of the two main conflict resolution strategies for real-time collaboration.","source":"@site/docs/skills/real_time_collaboration_engine/references/ot-vs-crdt.md","sourceDirName":"skills/real_time_collaboration_engine/references","slug":"/skills/real_time_collaboration_engine/references/ot-vs-crdt","permalink":"/docs/skills/real_time_collaboration_engine/references/ot-vs-crdt","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Operational Transform vs CRDTs","sidebar_label":"Operational Transform vs CRDTs","sidebar_position":1}}');var t=r(74848),i=r(28453);const l={title:"Operational Transform vs CRDTs",sidebar_label:"Operational Transform vs CRDTs",sidebar_position:1},o="Operational Transform vs CRDTs",d={},c=[{value:"Executive Summary",id:"executive-summary",level:2},{value:"Operational Transform (OT)",id:"operational-transform-ot",level:2},{value:"How It Works",id:"how-it-works",level:3},{value:"Transformation Rules",id:"transformation-rules",level:3},{value:"Challenges",id:"challenges",level:3},{value:"When OT Shines",id:"when-ot-shines",level:3},{value:"When OT Struggles",id:"when-ot-struggles",level:3},{value:"CRDTs (Conflict-free Replicated Data Types)",id:"crdts-conflict-free-replicated-data-types",level:2},{value:"How They Work",id:"how-they-work",level:3},{value:"CRDT Types",id:"crdt-types",level:3},{value:"When CRDTs Shine",id:"when-crdts-shine",level:3},{value:"When CRDTs Struggle",id:"when-crdts-struggle",level:3},{value:"Performance Comparison",id:"performance-comparison",level:2},{value:"Memory Usage",id:"memory-usage",level:3},{value:"Network Traffic",id:"network-traffic",level:3},{value:"Convergence Time",id:"convergence-time",level:3},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Google Docs (OT)",id:"google-docs-ot",level:3},{value:"Figma (CRDT)",id:"figma-crdt",level:3},{value:"Linear (Hybrid)",id:"linear-hybrid",level:3},{value:"Choosing a Strategy",id:"choosing-a-strategy",level:2},{value:"Decision Tree",id:"decision-tree",level:3},{value:"Hybrid Approach",id:"hybrid-approach",level:3},{value:"Libraries",id:"libraries",level:2},{value:"OT Libraries",id:"ot-libraries",level:3},{value:"CRDT Libraries",id:"crdt-libraries",level:3},{value:"Performance Tips",id:"performance-tips",level:2},{value:"OT Optimization",id:"ot-optimization",level:3},{value:"CRDT Optimization",id:"crdt-optimization",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"Resources",id:"resources",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"operational-transform-vs-crdts",children:"Operational Transform vs CRDTs"})}),"\n",(0,t.jsx)(n.p,{children:"Deep comparison of the two main conflict resolution strategies for real-time collaboration."}),"\n",(0,t.jsx)(n.h2,{id:"executive-summary",children:"Executive Summary"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Factor"}),(0,t.jsx)(n.th,{children:"Operational Transform (OT)"}),(0,t.jsx)(n.th,{children:"CRDTs"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Best for"})}),(0,t.jsx)(n.td,{children:"Text editing, sequential data"}),(0,t.jsx)(n.td,{children:"JSON objects, sets, maps"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Complexity"})}),(0,t.jsx)(n.td,{children:"High"}),(0,t.jsx)(n.td,{children:"Medium"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Offline support"})}),(0,t.jsx)(n.td,{children:"Limited"}),(0,t.jsx)(n.td,{children:"Excellent"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Latency tolerance"})}),(0,t.jsx)(n.td,{children:"Low (requires frequent sync)"}),(0,t.jsx)(n.td,{children:"High (can sync infrequently)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Memory overhead"})}),(0,t.jsx)(n.td,{children:"Low"}),(0,t.jsx)(n.td,{children:"Higher (stores metadata)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Network topology"})}),(0,t.jsx)(n.td,{children:"Requires central server"}),(0,t.jsx)(n.td,{children:"Peer-to-peer or server"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Convergence"})}),(0,t.jsx)(n.td,{children:"Guaranteed with proper transforms"}),(0,t.jsx)(n.td,{children:"Mathematically proven"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Rule of thumb"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Google Docs-style text editing \u2192 OT"}),"\n",(0,t.jsx)(n.li,{children:"Figma-style object editing \u2192 CRDTs"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"operational-transform-ot",children:"Operational Transform (OT)"}),"\n",(0,t.jsx)(n.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,t.jsx)(n.p,{children:"OT transforms concurrent operations so they can be applied in any order and produce the same result."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Initial: "Hello"\n\nUser A: Insert "!" at position 5 \u2192 "Hello!"\nUser B: Insert "World" at position 5 \u2192 "HelloWorld"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Without OT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'A applies locally: "Hello!"\nB applies locally: "HelloWorld"\nA receives B\'s op: Insert "World" at 5 \u2192 "HelloWorld!" \u274c Wrong!\n'})}),"\n",(0,t.jsx)(n.p,{children:"With OT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'A applies locally: "Hello!"\nB applies locally: "HelloWorld"\nA receives B\'s op, transforms it:\n  - Original: Insert "World" at 5\n  - Transformed: Insert "World" at 5 (before "!")\n  - Result: "HelloWorld!" \u2705 Correct!\n'})}),"\n",(0,t.jsx)(n.h3,{id:"transformation-rules",children:"Transformation Rules"}),"\n",(0,t.jsx)(n.p,{children:"For text operations:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"function transform(op1: Operation, op2: Operation): [Operation, Operation] {\n  if (op1.type === 'insert' && op2.type === 'insert') {\n    if (op1.position < op2.position) {\n      // op2 position shifts right\n      return [op1, { ...op2, position: op2.position + op1.length }];\n    } else if (op1.position > op2.position) {\n      // op1 position shifts right\n      return [{ ...op1, position: op1.position + op2.length }, op2];\n    } else {\n      // Same position - use tie-breaker (user ID)\n      if (op1.userId < op2.userId) {\n        return [op1, { ...op2, position: op2.position + op1.length }];\n      } else {\n        return [{ ...op1, position: op1.position + op2.length }, op2];\n      }\n    }\n  }\n\n  if (op1.type === 'delete' && op2.type === 'insert') {\n    // ... more rules\n  }\n\n  // ... handle all operation type combinations\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"challenges",children:"Challenges"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Challenge 1: All operation pairs must be defined"})}),"\n",(0,t.jsxs)(n.p,{children:["For ",(0,t.jsx)(n.code,{children:"n"})," operation types, you need ",(0,t.jsx)(n.code,{children:"n\xb2"})," transformation functions. Text has 3 types (insert, delete, replace) = 9 combinations."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Challenge 2: Transformation must be commutative"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"transform(transform(op1, op2), op3) === transform(op1, transform(op2, op3))\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Challenge 3: Undo/redo is complex"})}),"\n",(0,t.jsx)(n.p,{children:"Undoing an operation requires transforming it against all subsequent operations."}),"\n",(0,t.jsx)(n.h3,{id:"when-ot-shines",children:"When OT Shines"}),"\n",(0,t.jsx)(n.p,{children:"\u2705 Text editing (Google Docs, Etherpad)\n\u2705 Code editors (Codeshare, CodeSandbox)\n\u2705 Low latency environments\n\u2705 Central server architecture"}),"\n",(0,t.jsx)(n.h3,{id:"when-ot-struggles",children:"When OT Struggles"}),"\n",(0,t.jsx)(n.p,{children:"\u274c High latency (satellite, mobile)\n\u274c Offline editing (can't transform without server)\n\u274c Complex data structures (requires more transformation rules)"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"crdts-conflict-free-replicated-data-types",children:"CRDTs (Conflict-free Replicated Data Types)"}),"\n",(0,t.jsx)(n.h3,{id:"how-they-work",children:"How They Work"}),"\n",(0,t.jsx)(n.p,{children:"CRDTs use unique identifiers for each element, making order-independent merges possible."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Example"}),": Yjs (a CRDT library)"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Initial: "Hello"\n\nUser A: Insert "!" \u2192 "Hello!"\nUser B: Insert "World" \u2192 "HelloWorld"\n'})}),"\n",(0,t.jsx)(n.p,{children:"Under the hood:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'"Hello" = [\n  { id: "1.0", char: "H" },\n  { id: "1.1", char: "e" },\n  { id: "1.2", char: "l" },\n  { id: "1.3", char: "l" },\n  { id: "1.4", char: "o" }\n]\n\nUser A inserts "!":\n  { id: "1.4.A1", char: "!" }\n\nUser B inserts "World":\n  { id: "1.4.B1", char: "W" },\n  { id: "1.4.B2", char: "o" },\n  { id: "1.4.B3", char: "r" },\n  { id: "1.4.B4", char: "l" },\n  { id: "1.4.B5", char: "d" }\n\nMerge (sort by ID):\n  "Hello" + "World" + "!" = "HelloWorld!"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"crdt-types",children:"CRDT Types"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"1. G-Counter (Grow-only Counter)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"class GCounter {\n  private counters: Map<string, number> = new Map();\n\n  increment(userId: string, amount: number = 1): void {\n    const current = this.counters.get(userId) || 0;\n    this.counters.set(userId, current + amount);\n  }\n\n  get value(): number {\n    return Array.from(this.counters.values()).reduce((sum, v) => sum + v, 0);\n  }\n\n  merge(other: GCounter): void {\n    other.counters.forEach((value, userId) => {\n      const current = this.counters.get(userId) || 0;\n      this.counters.set(userId, Math.max(current, value));\n    });\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"2. LWW-Element-Set (Last-Write-Wins Set)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"class LWWSet<T> {\n  private addSet: Map<T, number> = new Map();\n  private removeSet: Map<T, number> = new Map();\n\n  add(element: T, timestamp: number = Date.now()): void {\n    this.addSet.set(element, timestamp);\n  }\n\n  remove(element: T, timestamp: number = Date.now()): void {\n    this.removeSet.set(element, timestamp);\n  }\n\n  has(element: T): boolean {\n    const addTime = this.addSet.get(element) || 0;\n    const removeTime = this.removeSet.get(element) || 0;\n    return addTime > removeTime;\n  }\n\n  merge(other: LWWSet<T>): void {\n    other.addSet.forEach((timestamp, element) => {\n      const current = this.addSet.get(element) || 0;\n      this.addSet.set(element, Math.max(current, timestamp));\n    });\n\n    other.removeSet.forEach((timestamp, element) => {\n      const current = this.removeSet.get(element) || 0;\n      this.removeSet.set(element, Math.max(current, timestamp));\n    });\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"3. Y.Text (Yjs Text CRDT)"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import * as Y from 'yjs';\n\nconst ydoc = new Y.Doc();\nconst ytext = ydoc.getText('document');\n\n// Insert\nytext.insert(0, 'Hello');\nytext.insert(5, ' World');\n\n// Delete\nytext.delete(5, 6);  // Remove \" World\"\n\n// Automatic conflict resolution\n// No transformation needed!\n"})}),"\n",(0,t.jsx)(n.h3,{id:"when-crdts-shine",children:"When CRDTs Shine"}),"\n",(0,t.jsx)(n.p,{children:"\u2705 Offline-first apps (sync when reconnected)\n\u2705 Peer-to-peer collaboration (no central server)\n\u2705 High latency environments\n\u2705 Complex data structures (JSON, maps, sets)"}),"\n",(0,t.jsx)(n.h3,{id:"when-crdts-struggle",children:"When CRDTs Struggle"}),"\n",(0,t.jsx)(n.p,{children:"\u274c Memory overhead (stores tombstones for deletes)\n\u274c Garbage collection complexity\n\u274c Learning curve (new mental model)"}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"performance-comparison",children:"Performance Comparison"}),"\n",(0,t.jsx)(n.h3,{id:"memory-usage",children:"Memory Usage"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:'Text: "Hello World"'})," (11 characters)"]}),"\n",(0,t.jsx)(n.p,{children:"OT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"String: 11 bytes\nOperations buffer: ~100 bytes\nTotal: ~111 bytes\n"})}),"\n",(0,t.jsx)(n.p,{children:"CRDT (Yjs):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"String: 11 bytes\nIDs per char: 11 \xd7 16 bytes = 176 bytes\nMetadata: ~50 bytes\nTotal: ~237 bytes (2\xd7 overhead)\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verdict"}),": OT uses 50% less memory for text."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"network-traffic",children:"Network Traffic"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario"}),': User types "Hello" (5 keystrokes)']}),"\n",(0,t.jsx)(n.p,{children:"OT with batching (200ms):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Batch 1: ["H", "e"]\nBatch 2: ["l", "l"]\nBatch 3: ["o"]\nTotal: 3 messages\n'})}),"\n",(0,t.jsx)(n.p,{children:"CRDT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'Message 1: "H" with ID\nMessage 2: "e" with ID\n... (can batch too)\nTotal: Similar with batching\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verdict"}),": Comparable with batching."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"convergence-time",children:"Convergence Time"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Scenario"}),": 100 concurrent edits, 200ms latency"]}),"\n",(0,t.jsx)(n.p,{children:"OT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Server receives ops sequentially\nTransforms each against prior ops\nTotal time: ~20 seconds\n"})}),"\n",(0,t.jsx)(n.p,{children:"CRDT:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Peers can merge independently\nParallel processing\nTotal time: ~5 seconds\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Verdict"}),": CRDTs converge 4\xd7 faster in high-concurrency scenarios."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,t.jsx)(n.h3,{id:"google-docs-ot",children:"Google Docs (OT)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why OT"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Text-focused"}),"\n",(0,t.jsx)(n.li,{children:"Central server (Google's infrastructure)"}),"\n",(0,t.jsx)(n.li,{children:"Low latency (Google's network)"}),"\n",(0,t.jsx)(n.li,{children:"Complex transformation logic is worth it for text quality"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Custom OT algorithm"}),"\n",(0,t.jsx)(n.li,{children:"Operational transforms for rich text"}),"\n",(0,t.jsx)(n.li,{children:"Server authority for conflict resolution"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"figma-crdt",children:"Figma (CRDT)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why CRDT"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"JSON-based (layers, properties, styles)"}),"\n",(0,t.jsx)(n.li,{children:"Needs offline support"}),"\n",(0,t.jsx)(n.li,{children:"Complex nested structures"}),"\n",(0,t.jsx)(n.li,{children:"Peer-to-peer multiplayer"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Custom CRDT for design objects"}),"\n",(0,t.jsx)(n.li,{children:"Yjs for some text fields"}),"\n",(0,t.jsx)(n.li,{children:"Operational transforms for specific operations"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"linear-hybrid",children:"Linear (Hybrid)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why Hybrid"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Issue descriptions use CRDTs (offline editing)"}),"\n",(0,t.jsx)(n.li,{children:"Comments use simpler append-only (no conflicts)"}),"\n",(0,t.jsx)(n.li,{children:"Timestamps use Last-Write-Wins"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Multiple strategies for different data types"}),"\n",(0,t.jsx)(n.li,{children:"CRDTs where needed, simpler approaches elsewhere"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"choosing-a-strategy",children:"Choosing a Strategy"}),"\n",(0,t.jsx)(n.h3,{id:"decision-tree",children:"Decision Tree"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Does your data need offline editing?\n\u251c\u2500\u2500 Yes \u2192 CRDT\n\u2514\u2500\u2500 No \u2192 Continue\n\nIs your primary data type text?\n\u251c\u2500\u2500 Yes \u2192 OT (Google Docs-style)\n\u2514\u2500\u2500 No \u2192 Continue\n\nDo you have a central server?\n\u251c\u2500\u2500 Yes \u2192 OT is viable\n\u2514\u2500\u2500 No \u2192 CRDT (peer-to-peer)\n\nIs latency low (&lt;50ms)?\n\u251c\u2500\u2500 Yes \u2192 OT works well\n\u2514\u2500\u2500 No \u2192 CRDT handles better\n\nAre you editing JSON objects?\n\u251c\u2500\u2500 Yes \u2192 CRDT (easier for objects)\n\u2514\u2500\u2500 No \u2192 Either works\n"})}),"\n",(0,t.jsx)(n.h3,{id:"hybrid-approach",children:"Hybrid Approach"}),"\n",(0,t.jsx)(n.p,{children:"Many apps use both:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Text fields: OT\nconst textEditor = new OTEditor();\n\n// Object properties: CRDT\nconst properties = new Y.Map();\n\n// Simple fields: Last-Write-Wins\nconst title = new LWWRegister();\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"libraries",children:"Libraries"}),"\n",(0,t.jsx)(n.h3,{id:"ot-libraries",children:"OT Libraries"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Library"}),(0,t.jsx)(n.th,{children:"Language"}),(0,t.jsx)(n.th,{children:"Maturity"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/Operational-Transformation/ot.js",children:"ot.js"})}),(0,t.jsx)(n.td,{children:"JavaScript"}),(0,t.jsx)(n.td,{children:"Stable"}),(0,t.jsx)(n.td,{children:"Text editing"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/share/sharedb",children:"ShareDB"})}),(0,t.jsx)(n.td,{children:"JavaScript"}),(0,t.jsx)(n.td,{children:"Mature"}),(0,t.jsx)(n.td,{children:"Real-time database with OT"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://codemirror.net/",children:"CodeMirror"})}),(0,t.jsx)(n.td,{children:"JavaScript"}),(0,t.jsx)(n.td,{children:"Mature"}),(0,t.jsx)(n.td,{children:"Code editor with OT support"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"crdt-libraries",children:"CRDT Libraries"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Library"}),(0,t.jsx)(n.th,{children:"Language"}),(0,t.jsx)(n.th,{children:"Maturity"}),(0,t.jsx)(n.th,{children:"Use Case"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/yjs/yjs",children:"Yjs"})}),(0,t.jsx)(n.td,{children:"JavaScript"}),(0,t.jsx)(n.td,{children:"Mature"}),(0,t.jsx)(n.td,{children:"Text, maps, arrays"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/automerge/automerge",children:"Automerge"})}),(0,t.jsx)(n.td,{children:"JavaScript"}),(0,t.jsx)(n.td,{children:"Mature"}),(0,t.jsx)(n.td,{children:"JSON documents"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/josephg/diamond-types",children:"Diamond Types"})}),(0,t.jsx)(n.td,{children:"Rust/JS"}),(0,t.jsx)(n.td,{children:"Experimental"}),(0,t.jsx)(n.td,{children:"Fast text CRDTs"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.a,{href:"https://github.com/loro-dev/loro",children:"LORO"})}),(0,t.jsx)(n.td,{children:"Rust/JS"}),(0,t.jsx)(n.td,{children:"New (2023)"}),(0,t.jsx)(n.td,{children:"Rich text + objects"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,t.jsx)(n.h3,{id:"ot-optimization",children:"OT Optimization"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Batch operations\nconst batchedOps: Operation[] = [];\nconst flushInterval = 200; // ms\n\nfunction queueOperation(op: Operation): void {\n  batchedOps.push(op);\n}\n\nsetInterval(() => {\n  if (batchedOps.length > 0) {\n    socket.emit('operations', batchedOps);\n    batchedOps.length = 0;\n  }\n}, flushInterval);\n"})}),"\n",(0,t.jsx)(n.h3,{id:"crdt-optimization",children:"CRDT Optimization"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Garbage collection (remove tombstones)\nimport * as Y from 'yjs';\n\nconst ydoc = new Y.Doc({ gc: true });\n\n// Compact document periodically\nsetInterval(() => {\n  // Remove deleted content older than 30 days\n  ydoc.gc = true;\n}, 86400000);  // Daily\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Choose OT if"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Primary data is text"}),"\n",(0,t.jsx)(n.li,{children:"You have central server infrastructure"}),"\n",(0,t.jsx)(n.li,{children:"Latency is low"}),"\n",(0,t.jsx)(n.li,{children:"You can invest in proper transformation logic"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Choose CRDT if"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You need offline support"}),"\n",(0,t.jsx)(n.li,{children:"Data is JSON/objects/sets"}),"\n",(0,t.jsx)(n.li,{children:"Peer-to-peer architecture"}),"\n",(0,t.jsx)(n.li,{children:"High latency or unreliable network"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Choose Hybrid if"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Different data types have different needs"}),"\n",(0,t.jsx)(n.li,{children:"You want best of both worlds"}),"\n",(0,t.jsx)(n.li,{children:"You can manage complexity"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://operational-transformation.github.io/",children:"OT Visualization"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://demos.yjs.dev/",children:"Yjs Demos"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://automerge.org/docs/",children:"Automerge Docs"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://www.figma.com/blog/how-figmas-multiplayer-technology-works/",children:"Figma's Multiplayer Tech"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://crdt.tech/",children:"CRDT Research Papers"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);