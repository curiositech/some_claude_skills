"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[34062],{28453:(e,i,t)=>{t.d(i,{R:()=>l,x:()=>o});var r=t(96540);const n={},s=r.createContext(n);function l(e){const i=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),r.createElement(s.Provider,{value:i},e.children)}},99124:(e,i,t)=>{t.r(i),t.d(i,{assets:()=>d,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"skills/automatic_stateful_prompt_improver/index","title":"\ud83e\udd16 Automatic Stateful Prompt Improver","description":"Automatically intercepts and optimizes prompts using the prompt-learning MCP server. Learns from performance over time via embedding-indexed history. Uses APE, OPRO, DSPy patterns. Activate on \\"optimize prompt\\", \\"improve this prompt\\", \\"prompt engineering\\", or ANY complex task request. Requires prompt-learning MCP server. NOT for simple questions (just answer them), NOT for direct commands (just execute them), NOT for conversational responses (no optimization needed).","source":"@site/docs/skills/automatic_stateful_prompt_improver/index.md","sourceDirName":"skills/automatic_stateful_prompt_improver","slug":"/skills/automatic_stateful_prompt_improver/","permalink":"/docs/skills/automatic_stateful_prompt_improver/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Automatic Stateful Prompt Improver","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Swift Executor","permalink":"/docs/skills/swift_executor/"},"next":{"title":"Automatic Stateful Prompt Improver","permalink":"/docs/skills/automatic_stateful_prompt_improver/"}}');var n=t(74848),s=t(28453);const l={sidebar_label:"Automatic Stateful Prompt Improver",sidebar_position:1},o="\ud83e\udd16 Automatic Stateful Prompt Improver",d={},c=[{value:"Allowed Tools",id:"allowed-tools",level:2},{value:"Tags",id:"tags",level:2},{value:"\ud83e\udd1d Pairs Great With",id:"-pairs-great-with",level:2},{value:"References",id:"references",level:2},{value:"MANDATORY AUTOMATIC BEHAVIOR",id:"mandatory-automatic-behavior",level:2},{value:"Auto-Optimization Triggers",id:"auto-optimization-triggers",level:3},{value:"Auto-Optimization Process",id:"auto-optimization-process",level:3},{value:"Do NOT Optimize",id:"do-not-optimize",level:3},{value:"Learning Loop (Post-Response)",id:"learning-loop-post-response",level:2},{value:"Quick Reference",id:"quick-reference",level:2},{value:"Iteration Decision",id:"iteration-decision",level:3},{value:"Convergence (When to Stop)",id:"convergence-when-to-stop",level:3},{value:"Performance Expectations",id:"performance-expectations",level:3},{value:"Anti-Patterns",id:"anti-patterns",level:2},{value:"Over-Optimization",id:"over-optimization",level:3},{value:"Template Obsession",id:"template-obsession",level:3},{value:"Iteration Without Measurement",id:"iteration-without-measurement",level:3},{value:"Ignoring Model Capabilities",id:"ignoring-model-capabilities",level:3},{value:"Reference Files",id:"reference-files",level:2}];function a(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"-automatic-stateful-prompt-improver",children:"\ud83e\udd16 Automatic Stateful Prompt Improver"})}),"\n",(0,n.jsx)(i.p,{children:'Automatically intercepts and optimizes prompts using the prompt-learning MCP server. Learns from performance over time via embedding-indexed history. Uses APE, OPRO, DSPy patterns. Activate on "optimize prompt", "improve this prompt", "prompt engineering", or ANY complex task request. Requires prompt-learning MCP server. NOT for simple questions (just answer them), NOT for direct commands (just execute them), NOT for conversational responses (no optimization needed).'}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h2,{id:"allowed-tools",children:"Allowed Tools"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"mcp__prompt-learning__optimize_prompt, mcp__prompt-learning__retrieve_prompts, mcp__prompt-learning__record_feedback, mcp__prompt-learning__suggest_improvements, mcp__prompt-learning__get_analytics, mcp__SequentialThinking__sequentialthinking\n"})}),"\n",(0,n.jsx)(i.h2,{id:"tags",children:"Tags"}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.code,{children:"prompts"})," ",(0,n.jsx)(i.code,{children:"optimization"})," ",(0,n.jsx)(i.code,{children:"learning"})," ",(0,n.jsx)(i.code,{children:"embeddings"})," ",(0,n.jsx)(i.code,{children:"dspy"})]}),"\n",(0,n.jsx)(i.h2,{id:"-pairs-great-with",children:"\ud83e\udd1d Pairs Great With"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.a,{href:"/docs/skills/skill_coach",children:"Skill Coach"})}),": Optimize skill prompts systematically"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.a,{href:"/docs/skills/skill_logger",children:"Skill Logger"})}),": Track prompt performance over time"]}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"references",children:"References"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"./references/ape-opro-implementation",children:"APE and OPRO Implementation Guide"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"./references/dspy-patterns",children:"DSPy Optimization Patterns for Prompt Learning"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"./references/embedding-architecture",children:"Embedding Architecture for Prompt Learning"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"./references/iteration-strategy",children:"Iteration Strategy"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"./references/learning-architecture",children:"Learning Architecture"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"./references/mcp-server-spec",children:"MCP Server Specification: Prompt Learning Server"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"./references/optimization-techniques",children:"Optimization Techniques"})}),"\n"]}),"\n",(0,n.jsx)(i.h1,{id:"automatic-stateful-prompt-improver",children:"Automatic Stateful Prompt Improver"}),"\n",(0,n.jsx)(i.h2,{id:"mandatory-automatic-behavior",children:"MANDATORY AUTOMATIC BEHAVIOR"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"When this skill is active, I MUST follow these rules:"})}),"\n",(0,n.jsx)(i.h3,{id:"auto-optimization-triggers",children:"Auto-Optimization Triggers"}),"\n",(0,n.jsxs)(i.p,{children:["I AUTOMATICALLY call ",(0,n.jsx)(i.code,{children:"mcp__prompt-learning__optimize_prompt"})," BEFORE responding when:"]}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Complex task"})," (multi-step, requires reasoning)"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Technical output"})," (code, analysis, structured data)"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Reusable content"})," (system prompts, templates, instructions)"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Explicit request"}),' ("improve", "better", "optimize")']}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Ambiguous requirements"})," (underspecified, multiple interpretations)"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Precision-critical"})," (code, legal, medical, financial)"]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"auto-optimization-process",children:"Auto-Optimization Process"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"1. INTERCEPT the user's request\n2. CALL: mcp__prompt-learning__optimize_prompt\n   - prompt: [user's original request]\n   - domain: [inferred domain]\n   - max_iterations: [3-20 based on complexity]\n3. RECEIVE: optimized prompt + improvement details\n4. INFORM user briefly: \"I've refined your request for [reason]\"\n5. PROCEED with the OPTIMIZED version\n"})}),"\n",(0,n.jsx)(i.h3,{id:"do-not-optimize",children:"Do NOT Optimize"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:'Simple questions ("what is X?")'}),"\n",(0,n.jsx)(i.li,{children:'Direct commands ("run npm install")'}),"\n",(0,n.jsx)(i.li,{children:'Conversational responses ("hello", "thanks")'}),"\n",(0,n.jsx)(i.li,{children:"File operations without reasoning"}),"\n",(0,n.jsx)(i.li,{children:"Already-optimized prompts"}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"learning-loop-post-response",children:"Learning Loop (Post-Response)"}),"\n",(0,n.jsx)(i.p,{children:"After completing ANY significant task:"}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"1. ASSESS: Did the response achieve the goal?\n2. CALL: mcp__prompt-learning__record_feedback\n   - prompt_id: [from optimization response]\n   - success: [true/false]\n   - quality_score: [0.0-1.0]\n3. This enables future retrievals to learn from outcomes\n"})}),"\n",(0,n.jsx)(i.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,n.jsx)(i.h3,{id:"iteration-decision",children:"Iteration Decision"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Factor"}),(0,n.jsx)(i.th,{children:"Low (3-5)"}),(0,n.jsx)(i.th,{children:"Medium (5-10)"}),(0,n.jsx)(i.th,{children:"High (10-20)"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Complexity"}),(0,n.jsx)(i.td,{children:"Simple"}),(0,n.jsx)(i.td,{children:"Multi-step"}),(0,n.jsx)(i.td,{children:"Agent/pipeline"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Ambiguity"}),(0,n.jsx)(i.td,{children:"Clear"}),(0,n.jsx)(i.td,{children:"Some"}),(0,n.jsx)(i.td,{children:"Underspecified"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Domain"}),(0,n.jsx)(i.td,{children:"Known"}),(0,n.jsx)(i.td,{children:"Moderate"}),(0,n.jsx)(i.td,{children:"Novel"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Stakes"}),(0,n.jsx)(i.td,{children:"Low"}),(0,n.jsx)(i.td,{children:"Moderate"}),(0,n.jsx)(i.td,{children:"Critical"})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"convergence-when-to-stop",children:"Convergence (When to Stop)"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"Improvement < 1% for 3 iterations"}),"\n",(0,n.jsx)(i.li,{children:"User satisfied"}),"\n",(0,n.jsx)(i.li,{children:"Token budget exhausted"}),"\n",(0,n.jsx)(i.li,{children:"20 iterations reached"}),"\n",(0,n.jsx)(i.li,{children:"Validation score > 0.95"}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"performance-expectations",children:"Performance Expectations"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Scenario"}),(0,n.jsx)(i.th,{children:"Improvement"}),(0,n.jsx)(i.th,{children:"Iterations"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Simple task"}),(0,n.jsx)(i.td,{children:"10-20%"}),(0,n.jsx)(i.td,{children:"3-5"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Complex reasoning"}),(0,n.jsx)(i.td,{children:"20-40%"}),(0,n.jsx)(i.td,{children:"10-15"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Agent/pipeline"}),(0,n.jsx)(i.td,{children:"30-50%"}),(0,n.jsx)(i.td,{children:"15-20"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"With history"}),(0,n.jsx)(i.td,{children:"+10-15% bonus"}),(0,n.jsx)(i.td,{children:"Varies"})]})]})]}),"\n",(0,n.jsx)(i.h2,{id:"anti-patterns",children:"Anti-Patterns"}),"\n",(0,n.jsx)(i.h3,{id:"over-optimization",children:"Over-Optimization"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"What it looks like"}),(0,n.jsx)(i.th,{children:"Why it's wrong"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Prompt becomes overly complex with many constraints"}),(0,n.jsx)(i.td,{children:"Causes brittleness, model confusion, token waste"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.strong,{children:"Instead"}),": Apply Occam's Razor - simplest sufficient prompt wins"]}),(0,n.jsx)(i.td,{})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"template-obsession",children:"Template Obsession"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"What it looks like"}),(0,n.jsx)(i.th,{children:"Why it's wrong"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Focusing on templates rather than task understanding"}),(0,n.jsx)(i.td,{children:"Templates don't generalize; understanding does"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.strong,{children:"Instead"}),": Focus on WHAT the task requires, not HOW to format it"]}),(0,n.jsx)(i.td,{})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"iteration-without-measurement",children:"Iteration Without Measurement"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"What it looks like"}),(0,n.jsx)(i.th,{children:"Why it's wrong"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Multiple rewrites without tracking improvements"}),(0,n.jsx)(i.td,{children:"Can't know if changes help without metrics"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.strong,{children:"Instead"}),": Always define success criteria before optimizing"]}),(0,n.jsx)(i.td,{})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"ignoring-model-capabilities",children:"Ignoring Model Capabilities"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"What it looks like"}),(0,n.jsx)(i.th,{children:"Why it's wrong"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Assumes model can't do things it can"}),(0,n.jsx)(i.td,{children:"Over-scaffolding wastes tokens"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsxs)(i.td,{children:[(0,n.jsx)(i.strong,{children:"Instead"}),": Test capabilities before heavy prompting"]}),(0,n.jsx)(i.td,{})]})]})]}),"\n",(0,n.jsx)(i.h2,{id:"reference-files",children:"Reference Files"}),"\n",(0,n.jsx)(i.p,{children:"Load for detailed implementations:"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"File"}),(0,n.jsx)(i.th,{children:"Contents"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"references/optimization-techniques.md"})}),(0,n.jsx)(i.td,{children:"APE, OPRO, CoT, instruction rewriting, constraint engineering"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"references/learning-architecture.md"})}),(0,n.jsx)(i.td,{children:"Warm start, embedding retrieval, MCP setup, drift detection"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:(0,n.jsx)(i.code,{children:"references/iteration-strategy.md"})}),(0,n.jsx)(i.td,{children:"Decision matrices, complexity scoring, convergence algorithms"})]})]})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"Goal"}),": Simplest prompt that achieves the outcome reliably. Optimize for clarity, specificity, and measurable improvement."]})]})}function h(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(a,{...e})}):a(e)}}}]);