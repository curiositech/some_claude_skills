"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[3398],{28453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>o});var t=i(96540);const s={},l=t.createContext(s);function d(e){const n=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:d(e.components),t.createElement(l.Provider,{value:n},e.children)}},52284:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>o,default:()=>p,frontMatter:()=>d,metadata:()=>t,toc:()=>r});const t=JSON.parse('{"id":"skills/document_generation_pdf/references/pdf-lib-guide","title":"pdf-lib Guide","description":"Complete guide to pdf-lib for form filling, field manipulation, encryption, and PDF generation.","source":"@site/docs/skills/document_generation_pdf/references/pdf-lib-guide.md","sourceDirName":"skills/document_generation_pdf/references","slug":"/skills/document_generation_pdf/references/pdf-lib-guide","permalink":"/docs/skills/document_generation_pdf/references/pdf-lib-guide","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"pdf-lib Guide","sidebar_label":"pdf-lib Guide","sidebar_position":2}}');var s=i(74848),l=i(28453);const d={title:"pdf-lib Guide",sidebar_label:"pdf-lib Guide",sidebar_position:2},o="pdf-lib Guide",a={},r=[{value:"Installation",id:"installation",level:2},{value:"Basic Form Filling",id:"basic-form-filling",level:2},{value:"Loading and Saving",id:"loading-and-saving",level:3},{value:"Form Field Types",id:"form-field-types",level:2},{value:"Text Fields",id:"text-fields",level:3},{value:"Check Boxes",id:"check-boxes",level:3},{value:"Radio Groups",id:"radio-groups",level:3},{value:"Dropdown Fields",id:"dropdown-fields",level:3},{value:"Form Flattening",id:"form-flattening",level:2},{value:"Inspecting Forms",id:"inspecting-forms",level:2},{value:"List All Fields",id:"list-all-fields",level:3},{value:"Get Field by Name",id:"get-field-by-name",level:3},{value:"Creating Forms",id:"creating-forms",level:2},{value:"Add Text Field",id:"add-text-field",level:3},{value:"Add Checkbox",id:"add-checkbox",level:3},{value:"Add Dropdown",id:"add-dropdown",level:3},{value:"PDF Encryption",id:"pdf-encryption",level:2},{value:"Password Protection",id:"password-protection",level:3},{value:"Fonts and Styling",id:"fonts-and-styling",level:2},{value:"Embed Standard Fonts",id:"embed-standard-fonts",level:3},{value:"Embed Custom Fonts",id:"embed-custom-fonts",level:3},{value:"Adding Images",id:"adding-images",level:2},{value:"Creating PDFs from Scratch",id:"creating-pdfs-from-scratch",level:2},{value:"Merging PDFs",id:"merging-pdfs",level:2},{value:"Metadata",id:"metadata",level:2},{value:"Save Options",id:"save-options",level:2},{value:"Common Patterns",id:"common-patterns",level:2},{value:"Batch Processing",id:"batch-processing",level:3},{value:"Conditional Fields",id:"conditional-fields",level:3},{value:"Signature Placeholders",id:"signature-placeholders",level:3},{value:"Error Handling",id:"error-handling",level:2},{value:"Performance Tips",id:"performance-tips",level:2},{value:"Resources",id:"resources",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"pdf-lib-guide",children:"pdf-lib Guide"})}),"\n",(0,s.jsx)(n.p,{children:"Complete guide to pdf-lib for form filling, field manipulation, encryption, and PDF generation."}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install pdf-lib\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Latest version"}),": 1.17.1 (Jan 2024)"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"basic-form-filling",children:"Basic Form Filling"}),"\n",(0,s.jsx)(n.h3,{id:"loading-and-saving",children:"Loading and Saving"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { PDFDocument } from 'pdf-lib';\nimport * as fs from 'fs';\n\n// Load existing PDF\nconst existingPdfBytes = fs.readFileSync('template.pdf');\nconst pdfDoc = await PDFDocument.load(existingPdfBytes);\n\n// Get form\nconst form = pdfDoc.getForm();\n\n// ... fill fields ...\n\n// Save\nconst pdfBytes = await pdfDoc.save();\nfs.writeFileSync('filled.pdf', pdfBytes);\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"form-field-types",children:"Form Field Types"}),"\n",(0,s.jsx)(n.h3,{id:"text-fields",children:"Text Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Get text field\nconst nameField = form.getTextField('applicant_name');\n\n// Set text\nnameField.setText('John Doe');\n\n// Get current value\nconst name = nameField.getText();\n\n// Max length\nconst maxLength = nameField.getMaxLength();\n\n// Set alignment\nnameField.setAlignment(Alignment.Center);  // Left, Center, Right\n\n// Set font size\nnameField.setFontSize(12);\n\n// Enable multiline\nnameField.enableMultiline();\n\n// Disable read-only\nnameField.enableReadOnly(false);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Common text fields"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Name, address, phone"}),"\n",(0,s.jsx)(n.li,{children:"Dates (as text)"}),"\n",(0,s.jsx)(n.li,{children:"Case numbers"}),"\n",(0,s.jsx)(n.li,{children:"Comments/notes"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"check-boxes",children:"Check Boxes"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Get checkbox\nconst consentCheckbox = form.getCheckBox('consent_checkbox');\n\n// Check\nconsentCheckbox.check();\n\n// Uncheck\nconsentCheckbox.uncheck();\n\n// Get state\nconst isChecked = consentCheckbox.isChecked();\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Yes/No questions"}),"\n",(0,s.jsx)(n.li,{children:"Consent forms"}),"\n",(0,s.jsx)(n.li,{children:"Attestations"}),"\n",(0,s.jsx)(n.li,{children:"Option selections"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"radio-groups",children:"Radio Groups"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Get radio group\nconst employmentStatus = form.getRadioGroup('employment_status');\n\n// Get options\nconst options = employmentStatus.getOptions();\n// Returns: ['employed', 'unemployed', 'self_employed', 'retired']\n\n// Select option\nemploymentStatus.select('employed');\n\n// Get selected\nconst selected = employmentStatus.getSelected();\n\n// Clear selection\nemploymentStatus.clear();\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Multiple choice (one answer)"}),"\n",(0,s.jsx)(n.li,{children:"Yes/No/Maybe"}),"\n",(0,s.jsx)(n.li,{children:"Option groups"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"dropdown-fields",children:"Dropdown Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Get dropdown\nconst stateDropdown = form.getDropdown('state');\n\n// Get options\nconst options = stateDropdown.getOptions();\n// Returns: ['CA', 'NY', 'TX', ...]\n\n// Select single option\nstateDropdown.select('CA');\n\n// Select multiple (if multiselect enabled)\nstateDropdown.select(['CA', 'NY']);\n\n// Get selected\nconst selected = stateDropdown.getSelected();\n// Returns: ['CA']\n\n// Clear\nstateDropdown.clear();\n\n// Enable multiselect\nstateDropdown.enableMultiselect();\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"State/country selection"}),"\n",(0,s.jsx)(n.li,{children:"Predefined options"}),"\n",(0,s.jsx)(n.li,{children:"Category selection"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"form-flattening",children:"Form Flattening"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Critical"}),": Flatten forms after filling to prevent user edits."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Fill form\nform.getTextField('name').setText('John Doe');\nform.getCheckBox('consent').check();\n\n// Flatten (make non-editable)\nform.flatten();\n\n// Save\nconst pdfBytes = await pdfDoc.save();\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"What flattening does"}),":"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Converts form fields to static text/graphics"}),"\n",(0,s.jsx)(n.li,{children:"Removes interactive field widgets"}),"\n",(0,s.jsx)(n.li,{children:"Preserves visual appearance"}),"\n",(0,s.jsx)(n.li,{children:"Makes document non-editable"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When NOT to flatten"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Draft documents (user needs to review/edit)"}),"\n",(0,s.jsx)(n.li,{children:"Multi-step workflows (partial completion)"}),"\n",(0,s.jsx)(n.li,{children:"Templates for manual filling"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"inspecting-forms",children:"Inspecting Forms"}),"\n",(0,s.jsx)(n.h3,{id:"list-all-fields",children:"List All Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'const fields = form.getFields();\n\nfields.forEach(field => {\n  const name = field.getName();\n  const type = field.constructor.name;  // PDFTextField, PDFCheckBox, etc.\n\n  console.log(`${name} (${type})`);\n\n  // Field-specific details\n  if (field instanceof PDFTextField) {\n    console.log(`  Value: "${field.getText()}"`);\n    console.log(`  Max length: ${field.getMaxLength()}`);\n  }\n});\n'})}),"\n",(0,s.jsx)(n.h3,{id:"get-field-by-name",children:"Get Field by Name"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"try {\n  const field = form.getField('field_name');\n\n  // Check type\n  if (field instanceof PDFTextField) {\n    // Text field operations\n  } else if (field instanceof PDFCheckBox) {\n    // Checkbox operations\n  } else if (field instanceof PDFDropdown) {\n    // Dropdown operations\n  } else if (field instanceof PDFRadioGroup) {\n    // Radio group operations\n  }\n} catch (err) {\n  console.error('Field not found:', err.message);\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"creating-forms",children:"Creating Forms"}),"\n",(0,s.jsx)(n.h3,{id:"add-text-field",children:"Add Text Field"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const textField = form.createTextField('new_field');\n\ntextField.addToPage(page, {\n  x: 100,\n  y: 500,\n  width: 200,\n  height: 30\n});\n\ntextField.setText('Default value');\ntextField.setFontSize(12);\n"})}),"\n",(0,s.jsx)(n.h3,{id:"add-checkbox",children:"Add Checkbox"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const checkbox = form.createCheckBox('new_checkbox');\n\ncheckbox.addToPage(page, {\n  x: 100,\n  y: 450,\n  width: 20,\n  height: 20\n});\n\ncheckbox.check();\n"})}),"\n",(0,s.jsx)(n.h3,{id:"add-dropdown",children:"Add Dropdown"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const dropdown = form.createDropdown('new_dropdown');\n\ndropdown.addToPage(page, {\n  x: 100,\n  y: 400,\n  width: 150,\n  height: 25\n});\n\ndropdown.addOptions(['Option 1', 'Option 2', 'Option 3']);\ndropdown.select('Option 1');\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"pdf-encryption",children:"PDF Encryption"}),"\n",(0,s.jsx)(n.h3,{id:"password-protection",children:"Password Protection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const pdfBytes = await pdfDoc.save({\n  userPassword: 'user123',     // Password to open PDF\n  ownerPassword: 'owner456',   // Password to change permissions\n  permissions: {\n    printing: 'highResolution',        // 'lowResolution' | 'highResolution' | false\n    modifying: false,                  // Prevent modifications\n    copying: false,                    // Prevent text/image copying\n    annotating: false,                 // Prevent annotations\n    fillingForms: false,               // Prevent form filling\n    contentAccessibility: true,        // Allow screen readers\n    documentAssembly: false            // Prevent page insertion/deletion\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Permission levels"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"'highResolution'"})," - Allow high-quality printing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"'lowResolution'"})," - Allow low-quality printing only"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"false"})," - Disallow"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Legal documents: Prevent editing"}),"\n",(0,s.jsx)(n.li,{children:"Confidential files: Require password"}),"\n",(0,s.jsx)(n.li,{children:"HIPAA compliance: Restrict copying"}),"\n",(0,s.jsx)(n.li,{children:"Public records: Allow reading only"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"fonts-and-styling",children:"Fonts and Styling"}),"\n",(0,s.jsx)(n.h3,{id:"embed-standard-fonts",children:"Embed Standard Fonts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { StandardFonts } from 'pdf-lib';\n\nconst helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica);\nconst helveticaBold = await pdfDoc.embedFont(StandardFonts.HelveticaBold);\nconst timesRoman = await pdfDoc.embedFont(StandardFonts.TimesRoman);\nconst courier = await pdfDoc.embedFont(StandardFonts.Courier);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Standard fonts"})," (always available):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Helvetica, Helvetica-Bold, Helvetica-Oblique, Helvetica-BoldOblique"}),"\n",(0,s.jsx)(n.li,{children:"Times-Roman, Times-Bold, Times-Italic, Times-BoldItalic"}),"\n",(0,s.jsx)(n.li,{children:"Courier, Courier-Bold, Courier-Oblique, Courier-BoldOblique"}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"embed-custom-fonts",children:"Embed Custom Fonts"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const fontBytes = fs.readFileSync('CustomFont.ttf');\nconst customFont = await pdfDoc.embedFont(fontBytes);\n\n// Use in text field\ntextField.updateWidgets({\n  defaultAppearance: PDFTextField.createDefaultAppearance(customFont, 12)\n});\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"adding-images",children:"Adding Images"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Embed PNG\nconst pngImageBytes = fs.readFileSync('logo.png');\nconst pngImage = await pdfDoc.embedPng(pngImageBytes);\n\n// Embed JPEG\nconst jpgImageBytes = fs.readFileSync('signature.jpg');\nconst jpgImage = await pdfDoc.embedJpg(jpgImageBytes);\n\n// Draw on page\nconst page = pdfDoc.getPage(0);\n\npage.drawImage(pngImage, {\n  x: 100,\n  y: 200,\n  width: 150,\n  height: 50\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Use cases"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Company logos"}),"\n",(0,s.jsx)(n.li,{children:"Signature images"}),"\n",(0,s.jsx)(n.li,{children:"Diagrams"}),"\n",(0,s.jsx)(n.li,{children:"Photos"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"creating-pdfs-from-scratch",children:"Creating PDFs from Scratch"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const pdfDoc = await PDFDocument.create();\n\n// Add blank page (US Letter: 612 x 792 points)\nconst page = pdfDoc.addPage([612, 792]);\n\n// Draw text\nconst helvetica = await pdfDoc.embedFont(StandardFonts.Helvetica);\n\npage.drawText('Hello, World!', {\n  x: 50,\n  y: 750,\n  size: 24,\n  font: helvetica,\n  color: rgb(0, 0, 0)\n});\n\n// Draw rectangle\npage.drawRectangle({\n  x: 50,\n  y: 700,\n  width: 200,\n  height: 100,\n  borderColor: rgb(0, 0, 0),\n  borderWidth: 2,\n  color: rgb(0.95, 0.95, 0.95)\n});\n\n// Save\nconst pdfBytes = await pdfDoc.save();\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Coordinate system"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Origin (0, 0) is bottom-left"}),"\n",(0,s.jsx)(n.li,{children:"X increases right"}),"\n",(0,s.jsx)(n.li,{children:"Y increases up"}),"\n",(0,s.jsx)(n.li,{children:"Units: points (1 pt = 1/72 inch)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"merging-pdfs",children:"Merging PDFs"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const mergedPdf = await PDFDocument.create();\n\n// Load source PDFs\nconst pdf1Bytes = fs.readFileSync('doc1.pdf');\nconst pdf1 = await PDFDocument.load(pdf1Bytes);\n\nconst pdf2Bytes = fs.readFileSync('doc2.pdf');\nconst pdf2 = await PDFDocument.load(pdf2Bytes);\n\n// Copy pages\nconst copiedPages1 = await mergedPdf.copyPages(pdf1, pdf1.getPageIndices());\ncopiedPages1.forEach(page => mergedPdf.addPage(page));\n\nconst copiedPages2 = await mergedPdf.copyPages(pdf2, pdf2.getPageIndices());\ncopiedPages2.forEach(page => mergedPdf.addPage(page));\n\n// Save\nconst pdfBytes = await mergedPdf.save();\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"metadata",children:"Metadata"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Set metadata\npdfDoc.setTitle('Petition for Expungement');\npdfDoc.setAuthor('John Doe');\npdfDoc.setSubject('Legal Document');\npdfDoc.setKeywords(['expungement', 'legal', 'petition']);\npdfDoc.setProducer('Expungement Guide');\npdfDoc.setCreator('pdf-lib');\npdfDoc.setCreationDate(new Date());\npdfDoc.setModificationDate(new Date());\n\n// Get metadata\nconst title = pdfDoc.getTitle();\nconst author = pdfDoc.getAuthor();\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"save-options",children:"Save Options"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const pdfBytes = await pdfDoc.save({\n  // Optimize for file size\n  useObjectStreams: false,\n\n  // Encryption\n  userPassword: 'user123',\n  ownerPassword: 'owner456',\n  permissions: { /* ... */ },\n\n  // Update existing PDF (instead of creating new)\n  updateFieldAppearances: false,\n\n  // Add metadata\n  addDefaultPage: false\n});\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-patterns",children:"Common Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"batch-processing",children:"Batch Processing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"async function batchFillForms(\n  templatePath: string,\n  dataFiles: string[],\n  outputDir: string\n) {\n  const templateBytes = fs.readFileSync(templatePath);\n\n  for (const dataFile of dataFiles) {\n    // Load template\n    const pdfDoc = await PDFDocument.load(templateBytes);\n    const form = pdfDoc.getForm();\n\n    // Load data\n    const data = JSON.parse(fs.readFileSync(dataFile, 'utf-8'));\n\n    // Fill fields\n    for (const [field, value] of Object.entries(data)) {\n      try {\n        const fieldObj = form.getField(field);\n        if (fieldObj instanceof PDFTextField) {\n          fieldObj.setText(String(value));\n        } else if (fieldObj instanceof PDFCheckBox) {\n          if (value) fieldObj.check();\n        }\n      } catch (err) {\n        console.warn(`Field ${field} not found`);\n      }\n    }\n\n    // Flatten and save\n    form.flatten();\n    const pdfBytes = await pdfDoc.save();\n\n    const outputPath = path.join(outputDir, path.basename(dataFile, '.json') + '.pdf');\n    fs.writeFileSync(outputPath, pdfBytes);\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"conditional-fields",children:"Conditional Fields"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"const form = pdfDoc.getForm();\n\n// Show field if condition met\nconst hasPriorConvictions = data.prior_convictions === 'yes';\n\nif (hasPriorConvictions) {\n  form.getTextField('conviction_details').setText(data.conviction_details);\n  form.getTextField('conviction_date').setText(data.conviction_date);\n} else {\n  // Hide/disable fields\n  const detailsField = form.getTextField('conviction_details');\n  detailsField.setText('N/A');\n  detailsField.enableReadOnly();\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"signature-placeholders",children:"Signature Placeholders"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// Add signature field\nconst signatureField = form.createTextField('applicant_signature');\n\nsignatureField.addToPage(page, {\n  x: 100,\n  y: 100,\n  width: 200,\n  height: 50\n});\n\n// Add border for visual indication\nsignatureField.updateWidgets({\n  borderWidth: 1,\n  borderColor: rgb(0, 0, 0)\n});\n\n// Add placeholder text\nsignatureField.setText('________________________________________');\n\n// Mark as required\nsignatureField.enableRequired();\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"error-handling",children:"Error Handling"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"try {\n  const pdfDoc = await PDFDocument.load(pdfBytes);\n  const form = pdfDoc.getForm();\n\n  try {\n    const field = form.getField('field_name');\n    // ... use field\n  } catch (err) {\n    console.error('Field not found:', err.message);\n    // Continue with other fields\n  }\n\n  const outputBytes = await pdfDoc.save();\n} catch (err) {\n  console.error('Failed to load PDF:', err.message);\n  throw err;\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"performance-tips",children:"Performance Tips"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reuse loaded templates"})," for batch processing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Don't flatten"})," until the very end"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use object streams"})," for smaller file size"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Embed fonts once"})," per document"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Batch save operations"})," (don't save after each field)"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Benchmark"})," (1000 forms):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Reuse template: 5 seconds"}),"\n",(0,s.jsx)(n.li,{children:"Reload template each time: 45 seconds"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://pdf-lib.js.org/",children:"pdf-lib Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/Hopding/pdf-lib",children:"GitHub Repository"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://pdf-lib.js.org/docs/api/classes/pdfform",children:"Form Examples"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);