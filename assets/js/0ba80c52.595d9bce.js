"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[67624],{17268:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"skills/code_necromancer/references/dependency-patterns","title":"Dependency Detection Patterns","description":"Patterns for identifying and analyzing dependencies across ecosystems.","source":"@site/docs/skills/code_necromancer/references/dependency-patterns.md","sourceDirName":"skills/code_necromancer/references","slug":"/skills/code_necromancer/references/dependency-patterns","permalink":"/docs/skills/code_necromancer/references/dependency-patterns","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Dependency Detection Patterns","sidebar_label":"Dependency Detection Patterns","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Code Archaeology Guide","permalink":"/docs/skills/code_necromancer/references/archaeology-guide"},"next":{"title":"Framework Detection Patterns","permalink":"/docs/skills/code_necromancer/references/framework-detection"}}');var t=s(74848),i=s(28453);const c={title:"Dependency Detection Patterns",sidebar_label:"Dependency Detection Patterns",sidebar_position:2},a="Dependency Detection Patterns",d={},o=[{value:"Dependency File Detection",id:"dependency-file-detection",level:2},{value:"By Ecosystem",id:"by-ecosystem",level:3},{value:"Parsing Dependency Files",id:"parsing-dependency-files",level:2},{value:"Node.js package.json",id:"nodejs-packagejson",level:3},{value:"Python Requirements",id:"python-requirements",level:3},{value:"Common Dependency Patterns",id:"common-dependency-patterns",level:2},{value:"Framework Detection",id:"framework-detection",level:3},{value:"Database Client Detection",id:"database-client-detection",level:3},{value:"Cloud Service SDKs",id:"cloud-service-sdks",level:3},{value:"Security Vulnerability Patterns",id:"security-vulnerability-patterns",level:2},{value:"High-Risk Indicators",id:"high-risk-indicators",level:3},{value:"Audit Commands",id:"audit-commands",level:3},{value:"Dependency Graph Generation",id:"dependency-graph-generation",level:2},{value:"Mermaid Output",id:"mermaid-output",level:3},{value:"Output Example",id:"output-example",level:3},{value:"Upgrade Path Analysis",id:"upgrade-path-analysis",level:2},{value:"Breaking Change Detection",id:"breaking-change-detection",level:3},{value:"Safe Upgrade Process",id:"safe-upgrade-process",level:3}];function l(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"dependency-detection-patterns",children:"Dependency Detection Patterns"})}),"\n",(0,t.jsx)(n.p,{children:"Patterns for identifying and analyzing dependencies across ecosystems."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"dependency-file-detection",children:"Dependency File Detection"}),"\n",(0,t.jsx)(n.h3,{id:"by-ecosystem",children:"By Ecosystem"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Language"}),(0,t.jsx)(n.th,{children:"Primary File"}),(0,t.jsx)(n.th,{children:"Lock File"}),(0,t.jsx)(n.th,{children:"Additional"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Node.js"}),(0,t.jsx)(n.td,{children:"package.json"}),(0,t.jsx)(n.td,{children:"package-lock.json, yarn.lock, pnpm-lock.yaml"}),(0,t.jsx)(n.td,{children:".npmrc"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Python"}),(0,t.jsx)(n.td,{children:"requirements.txt"}),(0,t.jsx)(n.td,{children:"Pipfile.lock, poetry.lock"}),(0,t.jsx)(n.td,{children:"setup.py, pyproject.toml"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Ruby"}),(0,t.jsx)(n.td,{children:"Gemfile"}),(0,t.jsx)(n.td,{children:"Gemfile.lock"}),(0,t.jsx)(n.td,{children:".ruby-version"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Go"}),(0,t.jsx)(n.td,{children:"go.mod"}),(0,t.jsx)(n.td,{children:"go.sum"}),(0,t.jsx)(n.td,{children:"vendor/"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Rust"}),(0,t.jsx)(n.td,{children:"Cargo.toml"}),(0,t.jsx)(n.td,{children:"Cargo.lock"}),(0,t.jsx)(n.td,{children:"-"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Java"}),(0,t.jsx)(n.td,{children:"pom.xml"}),(0,t.jsx)(n.td,{children:"-"}),(0,t.jsx)(n.td,{children:"build.gradle"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:".NET"}),(0,t.jsx)(n.td,{children:"*.csproj"}),(0,t.jsx)(n.td,{children:"packages.lock.json"}),(0,t.jsx)(n.td,{children:"nuget.config"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"PHP"}),(0,t.jsx)(n.td,{children:"composer.json"}),(0,t.jsx)(n.td,{children:"composer.lock"}),(0,t.jsx)(n.td,{children:"-"})]})]})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"parsing-dependency-files",children:"Parsing Dependency Files"}),"\n",(0,t.jsx)(n.h3,{id:"nodejs-packagejson",children:"Node.js package.json"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"const pkg = require('./package.json');\n\nconst allDeps = {\n  runtime: Object.keys(pkg.dependencies || {}),\n  dev: Object.keys(pkg.devDependencies || {}),\n  peer: Object.keys(pkg.peerDependencies || {}),\n  optional: Object.keys(pkg.optionalDependencies || {}),\n};\n\n// Detect monorepo\nconst isMonorepo = pkg.workspaces !== undefined;\n\n// Detect package manager\nconst packageManager = pkg.packageManager?.split('@')[0] || 'npm';\n"})}),"\n",(0,t.jsx)(n.h3,{id:"python-requirements",children:"Python Requirements"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:"import re\n\ndef parse_requirements(file_path):\n    deps = []\n    with open(file_path) as f:\n        for line in f:\n            line = line.strip()\n            if line and not line.startswith('#') and not line.startswith('-'):\n                # Handle version specifiers\n                match = re.match(r'^([a-zA-Z0-9_-]+)(.*)$', line)\n                if match:\n                    deps.append({\n                        'name': match.group(1),\n                        'constraint': match.group(2) or '*'\n                    })\n    return deps\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"common-dependency-patterns",children:"Common Dependency Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"framework-detection",children:"Framework Detection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Node.js frameworks\ngrep -q \'"express"\' package.json && echo "Express"\ngrep -q \'"fastify"\' package.json && echo "Fastify"\ngrep -q \'"next"\' package.json && echo "Next.js"\ngrep -q \'"nuxt"\' package.json && echo "Nuxt"\ngrep -q \'"@nestjs/core"\' package.json && echo "NestJS"\n\n# Python frameworks\ngrep -q \'django\' requirements.txt && echo "Django"\ngrep -q \'flask\' requirements.txt && echo "Flask"\ngrep -q \'fastapi\' requirements.txt && echo "FastAPI"\ngrep -q \'celery\' requirements.txt && echo "Celery (async tasks)"\n\n# Frontend frameworks\ngrep -q \'"react"\' package.json && echo "React"\ngrep -q \'"vue"\' package.json && echo "Vue"\ngrep -q \'"@angular/core"\' package.json && echo "Angular"\ngrep -q \'"svelte"\' package.json && echo "Svelte"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"database-client-detection",children:"Database Client Detection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# SQL\ngrep -qE 'pg|postgres|sequelize' package.json && echo \"PostgreSQL\"\ngrep -qE 'mysql2?|knex' package.json && echo \"MySQL\"\ngrep -qE 'sqlite3|better-sqlite3' package.json && echo \"SQLite\"\n\n# NoSQL\ngrep -q 'mongodb\\|mongoose' package.json && echo \"MongoDB\"\ngrep -q 'redis\\|ioredis' package.json && echo \"Redis\"\ngrep -q 'elasticsearch' package.json && echo \"Elasticsearch\"\n\n# ORMs\ngrep -q 'prisma' package.json && echo \"Prisma ORM\"\ngrep -q 'typeorm' package.json && echo \"TypeORM\"\ngrep -q 'sequelize' package.json && echo \"Sequelize\"\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cloud-service-sdks",children:"Cloud Service SDKs"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# AWS\ngrep -q '@aws-sdk\\|aws-sdk' package.json && echo \"AWS SDK\"\ngrep -q 'boto3' requirements.txt && echo \"AWS (Python)\"\n\n# Google Cloud\ngrep -q '@google-cloud' package.json && echo \"Google Cloud\"\ngrep -q 'google-cloud' requirements.txt && echo \"Google Cloud (Python)\"\n\n# Azure\ngrep -q '@azure' package.json && echo \"Azure\"\ngrep -q 'azure-' requirements.txt && echo \"Azure (Python)\"\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"security-vulnerability-patterns",children:"Security Vulnerability Patterns"}),"\n",(0,t.jsx)(n.h3,{id:"high-risk-indicators",children:"High-Risk Indicators"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Wildcard versions (Node.js)\ngrep '\"*\"' package.json  # Any version\ngrep '\">=' package.json  # No upper bound\n\n# Very old packages\nnpm outdated --json | jq '.[] | select(.current != .wanted)'\n\n# Known vulnerable patterns\ngrep -q 'request\"' package.json && echo \"\u26a0\ufe0f 'request' is deprecated\"\ngrep -q 'node-uuid' package.json && echo \"\u26a0\ufe0f Use 'uuid' instead\"\ngrep -q 'moment\"' package.json && echo \"\u26a0\ufe0f Consider 'date-fns' or 'dayjs'\"\n"})}),"\n",(0,t.jsx)(n.h3,{id:"audit-commands",children:"Audit Commands"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Node.js\nnpm audit --json | jq '.vulnerabilities | keys[]'\n\n# Python\npip-audit --format=json\n\n# Ruby\nbundle audit check\n\n# Go\ngo list -m -json all | nancy sleuth\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"dependency-graph-generation",children:"Dependency Graph Generation"}),"\n",(0,t.jsx)(n.h3,{id:"mermaid-output",children:"Mermaid Output"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-javascript",children:"function generateDependencyMermaid(repos) {\n  const lines = ['graph LR'];\n\n  repos.forEach(repo => {\n    const deps = repo.dependencies || {};\n    Object.keys(deps).forEach(dep => {\n      // Check if dep is an internal repo\n      if (repos.some(r => r.name === dep)) {\n        lines.push(`  ${repo.name}--\x3e${dep}`);\n      }\n    });\n  });\n\n  return lines.join('\\n');\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"output-example",children:"Output Example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mermaid",children:"graph LR\n  api-gateway--\x3eauth-service\n  api-gateway--\x3euser-service\n  user-service--\x3eshared-utils\n  auth-service--\x3eshared-utils\n  web-frontend--\x3eapi-gateway\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"upgrade-path-analysis",children:"Upgrade Path Analysis"}),"\n",(0,t.jsx)(n.h3,{id:"breaking-change-detection",children:"Breaking Change Detection"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Ecosystem"}),(0,t.jsx)(n.th,{children:"Breaking Change Indicator"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"npm"}),(0,t.jsx)(n.td,{children:"Major version bump (semver)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Python"}),(0,t.jsx)(n.td,{children:"Check CHANGELOG, deprecation warnings"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Go"}),(0,t.jsx)(n.td,{children:"go.mod requires statement"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"safe-upgrade-process",children:"Safe Upgrade Process"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Audit current state"}),": ",(0,t.jsx)(n.code,{children:"npm audit"})," / ",(0,t.jsx)(n.code,{children:"pip-audit"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check breaking changes"}),": Read CHANGELOGs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Update patch versions first"}),": Low risk"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Update minor versions"}),": Medium risk"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Update major versions last"}),": High risk, plan carefully"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Run tests after each step"}),": Catch regressions early"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>a});var r=s(96540);const t={},i=r.createContext(t);function c(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);