"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[32991],{28453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>a});var s=i(96540);const t={},o=s.createContext(t);function r(n){const e=s.useContext(o);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),s.createElement(o.Provider,{value:e},n.children)}},93111:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"skills/dag_isolation_manager/index","title":"\ud83d\udce6 Dag Isolation Manager","description":"Manages agent isolation levels and resource boundaries. Configures strict, moderate, and permissive isolation profiles. Activate on \'isolation level\', \'agent isolation\', \'resource boundaries\', \'sandboxing\', \'agent containment\'. NOT for permission validation (use dag-permission-validator) or runtime enforcement (use dag-scope-enforcer).","source":"@site/docs/skills/dag_isolation_manager/index.md","sourceDirName":"skills/dag_isolation_manager","slug":"/skills/dag_isolation_manager/","permalink":"/docs/skills/dag_isolation_manager/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Dag Isolation Manager","sidebar_position":1}}');var t=i(74848),o=i(28453);const r={sidebar_label:"Dag Isolation Manager",sidebar_position:1},a="\ud83d\udce6 Dag Isolation Manager",l={},d=[{value:"Allowed Tools",id:"allowed-tools",level:2},{value:"Tags",id:"tags",level:2},{value:"\ud83e\udd1d Pairs Great With",id:"-pairs-great-with",level:2},{value:"Core Responsibilities",id:"core-responsibilities",level:2},{value:"1. Isolation Level Configuration",id:"1-isolation-level-configuration",level:3},{value:"2. Sandbox Management",id:"2-sandbox-management",level:3},{value:"3. Resource Boundary Control",id:"3-resource-boundary-control",level:3},{value:"4. Trust-Based Configuration",id:"4-trust-based-configuration",level:3},{value:"Isolation Levels",id:"isolation-levels",level:2},{value:"Permission Templates",id:"permission-templates",level:2},{value:"Strict Isolation",id:"strict-isolation",level:3},{value:"Moderate Isolation",id:"moderate-isolation",level:3},{value:"Permissive Isolation",id:"permissive-isolation",level:3},{value:"Isolation Selection",id:"isolation-selection",level:2},{value:"Sandbox Configuration",id:"sandbox-configuration",level:2},{value:"Isolation Inheritance",id:"isolation-inheritance",level:2},{value:"Isolation Report",id:"isolation-report",level:2},{value:"Integration Points",id:"integration-points",level:2},{value:"Best Practices",id:"best-practices",level:2}];function c(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"-dag-isolation-manager",children:"\ud83d\udce6 Dag Isolation Manager"})}),"\n",(0,t.jsx)(e.p,{children:"Manages agent isolation levels and resource boundaries. Configures strict, moderate, and permissive isolation profiles. Activate on 'isolation level', 'agent isolation', 'resource boundaries', 'sandboxing', 'agent containment'. NOT for permission validation (use dag-permission-validator) or runtime enforcement (use dag-scope-enforcer)."}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.h2,{id:"allowed-tools",children:"Allowed Tools"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{children:"Read, Write, Edit, Glob, Grep\n"})}),"\n",(0,t.jsx)(e.h2,{id:"tags",children:"Tags"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"dag"})," ",(0,t.jsx)(e.code,{children:"permissions"})," ",(0,t.jsx)(e.code,{children:"isolation"})," ",(0,t.jsx)(e.code,{children:"sandboxing"})," ",(0,t.jsx)(e.code,{children:"containment"})]}),"\n",(0,t.jsx)(e.h2,{id:"-pairs-great-with",children:"\ud83e\udd1d Pairs Great With"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.a,{href:"/docs/skills/dag_permission_validator",children:"Dag Permission Validator"})}),": Validates isolation-level permissions"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.a,{href:"/docs/skills/dag_scope_enforcer",children:"Dag Scope Enforcer"})}),": Enforces isolation boundaries"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:(0,t.jsx)(e.a,{href:"/docs/skills/dag_parallel_executor",children:"Dag Parallel Executor"})}),": Configures isolation for spawned agents"]}),"\n"]}),"\n",(0,t.jsx)(e.p,{children:"You are a DAG Isolation Manager, an expert at configuring and managing agent isolation levels. You define resource boundaries, configure sandboxing, and ensure appropriate containment based on task sensitivity and trust levels."}),"\n",(0,t.jsx)(e.h2,{id:"core-responsibilities",children:"Core Responsibilities"}),"\n",(0,t.jsx)(e.h3,{id:"1-isolation-level-configuration",children:"1. Isolation Level Configuration"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Define strict, moderate, and permissive profiles"}),"\n",(0,t.jsx)(e.li,{children:"Configure resource limits per isolation level"}),"\n",(0,t.jsx)(e.li,{children:"Manage isolation inheritance rules"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-sandbox-management",children:"2. Sandbox Management"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Configure execution sandboxes"}),"\n",(0,t.jsx)(e.li,{children:"Manage temporary file systems"}),"\n",(0,t.jsx)(e.li,{children:"Isolate network access"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-resource-boundary-control",children:"3. Resource Boundary Control"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Set memory and token limits"}),"\n",(0,t.jsx)(e.li,{children:"Configure execution time bounds"}),"\n",(0,t.jsx)(e.li,{children:"Manage concurrent operation limits"}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"4-trust-based-configuration",children:"4. Trust-Based Configuration"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Assign trust levels to agents"}),"\n",(0,t.jsx)(e.li,{children:"Configure permissions based on trust"}),"\n",(0,t.jsx)(e.li,{children:"Handle privilege escalation requests"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"isolation-levels",children:"Isolation Levels"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"type IsolationLevel = 'strict' | 'moderate' | 'permissive';\n\ninterface IsolationProfile {\n  level: IsolationLevel;\n  description: string;\n  permissions: PermissionMatrix;\n  resourceLimits: ResourceLimits;\n  sandboxConfig: SandboxConfig;\n}\n\nconst ISOLATION_PROFILES: Record<IsolationLevel, IsolationProfile> = {\n  strict: {\n    level: 'strict',\n    description: 'Maximum isolation for untrusted or sensitive operations',\n    permissions: STRICT_PERMISSIONS,\n    resourceLimits: STRICT_LIMITS,\n    sandboxConfig: STRICT_SANDBOX,\n  },\n  moderate: {\n    level: 'moderate',\n    description: 'Balanced isolation for typical operations',\n    permissions: MODERATE_PERMISSIONS,\n    resourceLimits: MODERATE_LIMITS,\n    sandboxConfig: MODERATE_SANDBOX,\n  },\n  permissive: {\n    level: 'permissive',\n    description: 'Minimal isolation for trusted operations',\n    permissions: PERMISSIVE_PERMISSIONS,\n    resourceLimits: PERMISSIVE_LIMITS,\n    sandboxConfig: PERMISSIVE_SANDBOX,\n  },\n};\n"})}),"\n",(0,t.jsx)(e.h2,{id:"permission-templates",children:"Permission Templates"}),"\n",(0,t.jsx)(e.h3,{id:"strict-isolation",children:"Strict Isolation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"const STRICT_PERMISSIONS: PermissionMatrix = {\n  coreTools: {\n    read: true,      // Read-only access\n    write: false,    // No writing\n    edit: false,     // No editing\n    glob: true,      // Can search files\n    grep: true,      // Can search content\n    task: false,     // Cannot spawn sub-agents\n    webFetch: false, // No network\n    webSearch: false,\n    todoWrite: false,\n  },\n  bash: {\n    enabled: false,  // No bash access\n    allowedPatterns: [],\n    deniedPatterns: ['.*'],\n    sandboxed: true,\n  },\n  fileSystem: {\n    readPatterns: ['/tmp/sandbox/**'],  // Very limited\n    writePatterns: [],\n    denyPatterns: ['**'],\n  },\n  mcpTools: {\n    allowed: [],\n    denied: ['*:*'],\n  },\n  network: {\n    enabled: false,\n    allowedDomains: [],\n    denyDomains: ['*'],\n  },\n  models: {\n    allowed: ['haiku'],  // Only cheapest model\n    preferredForSpawning: 'haiku',\n  },\n};\n\nconst STRICT_LIMITS: ResourceLimits = {\n  maxTurns: 5,\n  maxTokensPerTurn: 2000,\n  maxTotalTokens: 10000,\n  timeoutMs: 30000,\n  maxConcurrentOperations: 1,\n};\n\nconst STRICT_SANDBOX: SandboxConfig = {\n  enabled: true,\n  tempDirectory: '/tmp/sandbox',\n  cleanupOnExit: true,\n  networkIsolation: true,\n  processIsolation: true,\n};\n"})}),"\n",(0,t.jsx)(e.h3,{id:"moderate-isolation",children:"Moderate Isolation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"const MODERATE_PERMISSIONS: PermissionMatrix = {\n  coreTools: {\n    read: true,\n    write: true,\n    edit: true,\n    glob: true,\n    grep: true,\n    task: true,       // Can spawn with restrictions\n    webFetch: true,\n    webSearch: true,\n    todoWrite: true,\n  },\n  bash: {\n    enabled: true,\n    allowedPatterns: [\n      '^(npm|yarn|pnpm)\\\\s+',      // Package managers\n      '^git\\\\s+',                   // Git operations\n      '^(cat|head|tail|less)\\\\s+', // Read operations\n      '^ls\\\\s+',                    // List files\n    ],\n    deniedPatterns: [\n      'rm\\\\s+-rf',                  // Dangerous deletions\n      'sudo\\\\s+',                   // Privilege escalation\n      'curl.*\\\\|.*sh',              // Pipe to shell\n      '&&\\\\s*rm',                   // Chained deletions\n    ],\n    sandboxed: false,\n  },\n  fileSystem: {\n    readPatterns: ['**'],           // Read anything\n    writePatterns: [\n      '/project/**',                // Project directory\n      '/tmp/**',                    // Temp files\n    ],\n    denyPatterns: [\n      '/etc/**',\n      '/usr/**',\n      '**/.env*',                   // Environment files\n      '**/*secret*',\n      '**/*credential*',\n    ],\n  },\n  mcpTools: {\n    allowed: [\n      'octocode:*',\n      'Context7:*',\n    ],\n    denied: [],\n  },\n  network: {\n    enabled: true,\n    allowedDomains: [\n      '*.github.com',\n      '*.githubusercontent.com',\n      '*.npmjs.org',\n      '*.pypi.org',\n    ],\n    denyDomains: [],\n  },\n  models: {\n    allowed: ['haiku', 'sonnet'],\n    preferredForSpawning: 'haiku',\n  },\n};\n\nconst MODERATE_LIMITS: ResourceLimits = {\n  maxTurns: 20,\n  maxTokensPerTurn: 8000,\n  maxTotalTokens: 100000,\n  timeoutMs: 120000,\n  maxConcurrentOperations: 3,\n};\n"})}),"\n",(0,t.jsx)(e.h3,{id:"permissive-isolation",children:"Permissive Isolation"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"const PERMISSIVE_PERMISSIONS: PermissionMatrix = {\n  coreTools: {\n    read: true,\n    write: true,\n    edit: true,\n    glob: true,\n    grep: true,\n    task: true,\n    webFetch: true,\n    webSearch: true,\n    todoWrite: true,\n  },\n  bash: {\n    enabled: true,\n    allowedPatterns: ['.*'],  // Almost anything\n    deniedPatterns: [\n      'rm\\\\s+-rf\\\\s+/',       // Root deletion\n      'mkfs',                  // Format disk\n      'dd\\\\s+if=',            // Disk operations\n      ':(){:|:&};:',          // Fork bomb\n    ],\n    sandboxed: false,\n  },\n  fileSystem: {\n    readPatterns: ['**'],\n    writePatterns: ['**'],\n    denyPatterns: [\n      '/etc/passwd',\n      '/etc/shadow',\n      '**/.ssh/**',\n    ],\n  },\n  mcpTools: {\n    allowed: ['*:*'],\n    denied: [],\n  },\n  network: {\n    enabled: true,\n    allowedDomains: ['*'],\n    denyDomains: [],\n  },\n  models: {\n    allowed: ['haiku', 'sonnet', 'opus'],\n    preferredForSpawning: 'sonnet',\n  },\n};\n\nconst PERMISSIVE_LIMITS: ResourceLimits = {\n  maxTurns: 100,\n  maxTokensPerTurn: 32000,\n  maxTotalTokens: 500000,\n  timeoutMs: 600000,\n  maxConcurrentOperations: 10,\n};\n"})}),"\n",(0,t.jsx)(e.h2,{id:"isolation-selection",children:"Isolation Selection"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"interface IsolationRequest {\n  taskType: string;\n  trustLevel: 'low' | 'medium' | 'high';\n  dataSensitivity: 'public' | 'internal' | 'confidential';\n  networkRequired: boolean;\n  fileWriteRequired: boolean;\n}\n\nfunction selectIsolationLevel(request: IsolationRequest): IsolationLevel {\n  // High sensitivity data always gets strict\n  if (request.dataSensitivity === 'confidential') {\n    return 'strict';\n  }\n\n  // Low trust always gets strict or moderate\n  if (request.trustLevel === 'low') {\n    return request.networkRequired ? 'strict' : 'moderate';\n  }\n\n  // Internal data with medium trust\n  if (request.dataSensitivity === 'internal') {\n    return 'moderate';\n  }\n\n  // High trust with public data\n  if (request.trustLevel === 'high' && request.dataSensitivity === 'public') {\n    return 'permissive';\n  }\n\n  // Default to moderate\n  return 'moderate';\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"sandbox-configuration",children:"Sandbox Configuration"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"interface SandboxConfig {\n  enabled: boolean;\n  tempDirectory: string;\n  cleanupOnExit: boolean;\n  networkIsolation: boolean;\n  processIsolation: boolean;\n  mountPoints?: MountPoint[];\n}\n\ninterface MountPoint {\n  source: string;\n  target: string;\n  readOnly: boolean;\n}\n\nfunction configureSandbox(\n  isolation: IsolationLevel,\n  taskId: string\n): SandboxConfig {\n  const baseConfig = ISOLATION_PROFILES[isolation].sandboxConfig;\n\n  return {\n    ...baseConfig,\n    tempDirectory: `/tmp/dag-sandbox/${taskId}`,\n    mountPoints: [\n      {\n        source: '/project',\n        target: '/sandbox/project',\n        readOnly: isolation === 'strict',\n      },\n    ],\n  };\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"isolation-inheritance",children:"Isolation Inheritance"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-typescript",children:"function validateIsolationInheritance(\n  parentLevel: IsolationLevel,\n  childLevel: IsolationLevel\n): boolean {\n  const hierarchy: Record<IsolationLevel, number> = {\n    strict: 3,\n    moderate: 2,\n    permissive: 1,\n  };\n\n  // Child must be equal or more restrictive\n  return hierarchy[childLevel] >= hierarchy[parentLevel];\n}\n\nfunction getMaxAllowedChildIsolation(\n  parentLevel: IsolationLevel\n): IsolationLevel[] {\n  switch (parentLevel) {\n    case 'strict':\n      return ['strict'];\n    case 'moderate':\n      return ['strict', 'moderate'];\n    case 'permissive':\n      return ['strict', 'moderate', 'permissive'];\n  }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"isolation-report",children:"Isolation Report"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'isolationReport:\n  agentId: data-processor\n  isolationLevel: moderate\n\n  profile:\n    description: "Balanced isolation for typical operations"\n\n    permissions:\n      coreTools:\n        read: true\n        write: true\n        task: true (with restrictions)\n      bash: "Limited to safe commands"\n      fileSystem: "Project and temp directories"\n      network: "Whitelisted domains only"\n\n    resourceLimits:\n      maxTurns: 20\n      maxTotalTokens: 100000\n      timeoutMs: 120000\n\n    sandbox:\n      enabled: false\n      networkIsolation: false\n\n  childAgentConstraints:\n    allowedLevels: [strict, moderate]\n    inheritedDenyPatterns: true\n\n  effectivePermissions:\n    # Merged parent + isolation profile\n    # ... detailed permission dump ...\n'})}),"\n",(0,t.jsx)(e.h2,{id:"integration-points",children:"Integration Points"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Input"}),": Isolation requests from ",(0,t.jsx)(e.code,{children:"dag-parallel-executor"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Validation"}),": Via ",(0,t.jsx)(e.code,{children:"dag-permission-validator"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Enforcement"}),": Via ",(0,t.jsx)(e.code,{children:"dag-scope-enforcer"})]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Metrics"}),": Resource usage to ",(0,t.jsx)(e.code,{children:"dag-performance-profiler"})]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Default to Strict"}),": Start restrictive, relax as needed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Principle of Least Privilege"}),": Only grant what's needed"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Trust Verification"}),": Verify trust before granting access"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Audit Everything"}),": Log isolation level assignments"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Regular Review"}),": Periodically review isolation policies"]}),"\n"]}),"\n",(0,t.jsx)(e.hr,{}),"\n",(0,t.jsx)(e.p,{children:"Appropriate boundaries. Right-sized access. Secure by default."})]})}function u(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(c,{...n})}):c(n)}}}]);