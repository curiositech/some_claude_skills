"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[94534],{3898:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"skills/document_generation_pdf/index","title":"\u270d\ufe0f Document Generation Pdf","description":"Generate, fill, and assemble PDF documents at scale. Handles legal forms, contracts, invoices, certificates. Supports form filling (pdf-lib), template rendering (Puppeteer, LaTeX), digital signatures (DocuSign), and document assembly. Use for legal tech, HR automation, invoice generation. Activate on \\"PDF generation\\", \\"form filling\\", \\"document automation\\", \\"digital signatures\\". NOT for simple PDF viewing, basic file conversion, or OCR text extraction.","source":"@site/docs/skills/document_generation_pdf/index.md","sourceDirName":"skills/document_generation_pdf","slug":"/skills/document_generation_pdf/","permalink":"/docs/skills/document_generation_pdf/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_label":"Document Generation Pdf","sidebar_position":1}}');var s=i(74848),r=i(28453);const l={sidebar_label:"Document Generation Pdf",sidebar_position:1},a="\u270d\ufe0f Document Generation Pdf",o={},d=[{value:"Allowed Tools",id:"allowed-tools",level:2},{value:"References",id:"references",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Technology Selection",id:"technology-selection",level:2},{value:"pdf-lib vs Puppeteer vs LaTeX",id:"pdf-lib-vs-puppeteer-vs-latex",level:3},{value:"Common Anti-Patterns",id:"common-anti-patterns",level:2},{value:"Anti-Pattern 1: Using Puppeteer for Simple Form Filling",id:"anti-pattern-1-using-puppeteer-for-simple-form-filling",level:3},{value:"Anti-Pattern 2: Not Flattening Forms",id:"anti-pattern-2-not-flattening-forms",level:3},{value:"Anti-Pattern 3: Generating PDFs from HTML Without Page Breaks",id:"anti-pattern-3-generating-pdfs-from-html-without-page-breaks",level:3},{value:"Anti-Pattern 4: Not Handling Signature Fields",id:"anti-pattern-4-not-handling-signature-fields",level:3},{value:"Anti-Pattern 5: Storing Filled PDFs Without Encryption",id:"anti-pattern-5-storing-filled-pdfs-without-encryption",level:3},{value:"Production Checklist",id:"production-checklist",level:2},{value:"When to Use vs Avoid",id:"when-to-use-vs-avoid",level:2},{value:"References",id:"references-1",level:2},{value:"Scripts",id:"scripts",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"\ufe0f-document-generation-pdf",children:"\u270d\ufe0f Document Generation Pdf"})}),"\n",(0,s.jsx)(n.p,{children:'Generate, fill, and assemble PDF documents at scale. Handles legal forms, contracts, invoices, certificates. Supports form filling (pdf-lib), template rendering (Puppeteer, LaTeX), digital signatures (DocuSign), and document assembly. Use for legal tech, HR automation, invoice generation. Activate on "PDF generation", "form filling", "document automation", "digital signatures". NOT for simple PDF viewing, basic file conversion, or OCR text extraction.'}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"allowed-tools",children:"Allowed Tools"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Read, Write, Edit, Bash(npm:*, latex*)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./references/document-assembly",children:"Document Assembly"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./references/pdf-lib-guide",children:"pdf-lib Guide"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"./references/puppeteer-templates",children:"Puppeteer PDF Templates"})}),"\n"]}),"\n",(0,s.jsx)(n.h1,{id:"document-generation--pdf-automation",children:"Document Generation & PDF Automation"}),"\n",(0,s.jsx)(n.p,{children:"Expert in generating, filling, and assembling PDF documents programmatically for legal, HR, and business workflows."}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,s.jsxs)(n.p,{children:["\u2705 ",(0,s.jsx)(n.strong,{children:"Use for"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Legal form automation (expungement, immigration, contracts)"}),"\n",(0,s.jsx)(n.li,{children:"Invoice/receipt generation at scale"}),"\n",(0,s.jsx)(n.li,{children:"Certificate creation (completion, participation, awards)"}),"\n",(0,s.jsx)(n.li,{children:"Contract assembly from templates"}),"\n",(0,s.jsx)(n.li,{children:"Government form filling (IRS, court filings)"}),"\n",(0,s.jsx)(n.li,{children:"Multi-document packet creation"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["\u274c ",(0,s.jsx)(n.strong,{children:"NOT for"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Simple PDF viewing (use browser or pdf.js)"}),"\n",(0,s.jsx)(n.li,{children:"Basic file conversion (use online tools)"}),"\n",(0,s.jsx)(n.li,{children:"OCR text extraction (use Tesseract.js or AWS Textract)"}),"\n",(0,s.jsx)(n.li,{children:"PDF editing by hand (use Adobe Acrobat)"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"technology-selection",children:"Technology Selection"}),"\n",(0,s.jsx)(n.h3,{id:"pdf-lib-vs-puppeteer-vs-latex",children:"pdf-lib vs Puppeteer vs LaTeX"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feature"}),(0,s.jsx)(n.th,{children:"pdf-lib"}),(0,s.jsx)(n.th,{children:"Puppeteer"}),(0,s.jsx)(n.th,{children:"LaTeX"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Form filling"}),(0,s.jsx)(n.td,{children:"\u2705 Native"}),(0,s.jsx)(n.td,{children:"\u274c Complex"}),(0,s.jsx)(n.td,{children:"\u274c No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Template rendering"}),(0,s.jsx)(n.td,{children:"\u274c No"}),(0,s.jsx)(n.td,{children:"\u2705 HTML/CSS"}),(0,s.jsx)(n.td,{children:"\u2705 Templates"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Performance (1000 PDFs)"}),(0,s.jsx)(n.td,{children:"5s"}),(0,s.jsx)(n.td,{children:"60s"}),(0,s.jsx)(n.td,{children:"30s"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"File size"}),(0,s.jsx)(n.td,{children:"Small"}),(0,s.jsx)(n.td,{children:"Medium"}),(0,s.jsx)(n.td,{children:"Small"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Signature fields"}),(0,s.jsx)(n.td,{children:"\u2705 Yes"}),(0,s.jsx)(n.td,{children:"\u274c No"}),(0,s.jsx)(n.td,{children:"\u274c No"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Best for"}),(0,s.jsx)(n.td,{children:"Government forms"}),(0,s.jsx)(n.td,{children:"Invoices, reports"}),(0,s.jsx)(n.td,{children:"Academic papers"})]})]})]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Timeline"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"2000s: LaTeX for academic documents"}),"\n",(0,s.jsx)(n.li,{children:"2010: PDFKit (Node.js) for generation"}),"\n",(0,s.jsx)(n.li,{children:"2017: Puppeteer for HTML \u2192 PDF"}),"\n",(0,s.jsx)(n.li,{children:"2019: pdf-lib for pure JS form filling"}),"\n",(0,s.jsx)(n.li,{children:"2024: pdf-lib is gold standard for forms"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Decision tree"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Need to fill existing form? \u2192 pdf-lib\nNeed complex layouts? \u2192 Puppeteer (HTML/CSS)\nNeed academic formatting? \u2192 LaTeX\nNeed to merge PDFs? \u2192 pdf-lib\nNeed digital signatures? \u2192 pdf-lib + DocuSign API\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-anti-patterns",children:"Common Anti-Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-1-using-puppeteer-for-simple-form-filling",children:"Anti-Pattern 1: Using Puppeteer for Simple Form Filling"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Novice thinking"}),": \"I'll use Puppeteer for everything, it's versatile\""]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": 12x slower, 10x more memory, can't preserve form fields."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c Puppeteer for simple form filling (SLOW!)\nimport puppeteer from 'puppeteer';\n\nasync function fillForm(data: FormData): Promise<Buffer> {\n  const browser = await puppeteer.launch();\n  const page = await browser.newPage();\n\n  // Load PDF in browser\n  await page.goto(`file://${pdfPath}`);\n\n  // Somehow fill form fields? (hacky)\n  await page.evaluate((data) => {\n    // Can't easily access PDF form fields from DOM\n    // Would need to convert PDF \u2192 HTML first\n  }, data);\n\n  const pdf = await page.pdf();\n  await browser.close();\n\n  return pdf;\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Browser overhead (200MB+ RAM per instance)"}),"\n",(0,s.jsx)(n.li,{children:"Can't access native PDF form fields"}),"\n",(0,s.jsx)(n.li,{children:"Loses interactive form capabilities"}),"\n",(0,s.jsx)(n.li,{children:"12x slower than pdf-lib"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Correct approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 pdf-lib for form filling (FAST!)\nimport { PDFDocument } from 'pdf-lib';\n\nasync function fillForm(templatePath: string, data: FormData): Promise<Uint8Array> {\n  // Load existing PDF form\n  const existingPdfBytes = await fs.readFile(templatePath);\n  const pdfDoc = await PDFDocument.load(existingPdfBytes);\n\n  // Get form\n  const form = pdfDoc.getForm();\n\n  // Fill text fields\n  form.getTextField('applicant_name').setText(data.name);\n  form.getTextField('case_number').setText(data.caseNumber);\n  form.getTextField('date_of_birth').setText(data.dob);\n\n  // Fill checkboxes\n  if (data.hasPriorConvictions) {\n    form.getCheckBox('prior_convictions').check();\n  }\n\n  // Fill dropdowns\n  form.getDropdown('state').select(data.state);\n\n  // Flatten form (make non-editable)\n  form.flatten();\n\n  // Save\n  return await pdfDoc.save();\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Performance comparison"})," (1000 PDFs):"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Puppeteer: 60 seconds, 4GB RAM"}),"\n",(0,s.jsx)(n.li,{children:"pdf-lib: 5 seconds, 200MB RAM"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Timeline context"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"2017: Puppeteer released, everyone used it for PDFs"}),"\n",(0,s.jsx)(n.li,{children:"2019: pdf-lib released, proper form handling"}),"\n",(0,s.jsx)(n.li,{children:"2024: pdf-lib is standard for government forms"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-2-not-flattening-forms",children:"Anti-Pattern 2: Not Flattening Forms"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Users can edit filled forms, causing data inconsistencies."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c Don't flatten - form stays editable\nconst pdfDoc = await PDFDocument.load(existingPdfBytes);\nconst form = pdfDoc.getForm();\n\nform.getTextField('name').setText('John Doe');\n\nconst pdfBytes = await pdfDoc.save();\n// User can open PDF and change \"John Doe\" to anything!\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"User can modify official documents"}),"\n",(0,s.jsx)(n.li,{children:"Data doesn't match database"}),"\n",(0,s.jsx)(n.li,{children:"Violates document integrity"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Correct approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Flatten form after filling\nconst pdfDoc = await PDFDocument.load(existingPdfBytes);\nconst form = pdfDoc.getForm();\n\nform.getTextField('name').setText('John Doe');\n\n// Flatten (convert fields to static text)\nform.flatten();\n\nconst pdfBytes = await pdfDoc.save();\n// User can't edit filled values \u2705\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"When NOT to flatten"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Draft documents (user needs to review/edit)"}),"\n",(0,s.jsx)(n.li,{children:"Multi-step workflows (partial completion)"}),"\n",(0,s.jsx)(n.li,{children:"Templates for users to fill manually"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-3-generating-pdfs-from-html-without-page-breaks",children:"Anti-Pattern 3: Generating PDFs from HTML Without Page Breaks"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Novice thinking"}),': "HTML \u2192 PDF is easy with Puppeteer"']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Content splits mid-sentence across pages."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c No page break control\nconst html = `\n  <div class=\"contract\">\n    <h1>Mutual Agreement</h1>\n    <p>Long paragraph that might split across pages...</p>\n    <section>\n      <h2>Terms and Conditions</h2>\n      <ol>\n        <li>Term 1 that could get cut off...</li>\n        <li>Term 2...</li>\n      </ol>\n    </section>\n  </div>\n`;\n\nconst pdf = await page.pdf({ format: 'A4' });\n// Result: Ugly page breaks in middle of sections\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Correct approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Explicit page break control with CSS\nconst html = `\n  <style>\n    @media print {\n      .page-break { page-break-after: always; }\n      .avoid-break { page-break-inside: avoid; }\n\n      h1, h2, h3 {\n        page-break-after: avoid;\n        page-break-inside: avoid;\n      }\n\n      section {\n        page-break-inside: avoid;\n      }\n    }\n  </style>\n\n  <div class=\"contract\">\n    <section class=\"avoid-break\">\n      <h1>Mutual Agreement</h1>\n      <p>This entire section stays together...</p>\n    </section>\n\n    <div class=\"page-break\"></div>\n\n    <section class=\"avoid-break\">\n      <h2>Terms and Conditions</h2>\n      <ol>\n        <li>Term 1</li>\n        <li>Term 2</li>\n      </ol>\n    </section>\n  </div>\n`;\n\nconst pdf = await page.pdf({\n  format: 'A4',\n  printBackground: true,\n  margin: {\n    top: '1in',\n    right: '1in',\n    bottom: '1in',\n    left: '1in'\n  }\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"CSS print properties"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"page-break-before: always"})," - Force new page before element"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"page-break-after: always"})," - Force new page after element"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"page-break-inside: avoid"})," - Keep element together"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-4-not-handling-signature-fields",children:"Anti-Pattern 4: Not Handling Signature Fields"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Signature fields aren't clickable in generated PDFs."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c Add signature as image (not a real signature field)\nconst pdfDoc = await PDFDocument.load(existingPdfBytes);\n\nconst signatureImage = await pdfDoc.embedPng(signaturePngBytes);\nconst page = pdfDoc.getPage(0);\n\npage.drawImage(signatureImage, {\n  x: 100,\n  y: 100,\n  width: 200,\n  height: 50\n});\n\nawait pdfDoc.save();\n// Not a real signature field - can't be signed digitally\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Not legally recognized (just an image)"}),"\n",(0,s.jsx)(n.li,{children:"Can't use DocuSign/Adobe Sign"}),"\n",(0,s.jsx)(n.li,{children:"No signature metadata (who, when)"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Correct approach 1"}),": Create signature field (for DocuSign)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Create signature field for electronic signing\nconst pdfDoc = await PDFDocument.load(existingPdfBytes);\nconst form = pdfDoc.getForm();\n\n// Create signature field\nconst signatureField = form.createTextField('applicant_signature');\nsignatureField.addToPage(pdfDoc.getPage(0), {\n  x: 100,\n  y: 100,\n  width: 200,\n  height: 50\n});\n\n// Mark as signature field (metadata)\nsignatureField.updateWidgets({\n  borderWidth: 1,\n  borderColor: { type: 'RGB', red: 0, green: 0, blue: 0 }\n});\n\nawait pdfDoc.save();\n// DocuSign can now detect and fill this field \u2705\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Correct approach 2"}),": DocuSign API integration"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Send to DocuSign for e-signature\nimport { ApiClient, EnvelopesApi } from 'docusign-esign';\n\nasync function sendForSignature(pdfBytes: Uint8Array, signerEmail: string) {\n  const apiClient = new ApiClient();\n  apiClient.setBasePath('https://demo.docusign.net/restapi');\n\n  const envelopesApi = new EnvelopesApi(apiClient);\n\n  const envelope = {\n    emailSubject: 'Please sign: Expungement Petition',\n    documents: [{\n      documentBase64: Buffer.from(pdfBytes).toString('base64'),\n      name: 'Petition.pdf',\n      fileExtension: 'pdf',\n      documentId: '1'\n    }],\n    recipients: {\n      signers: [{\n        email: signerEmail,\n        name: 'John Doe',\n        recipientId: '1',\n        tabs: {\n          signHereTabs: [{\n            documentId: '1',\n            pageNumber: '1',\n            xPosition: '100',\n            yPosition: '100'\n          }]\n        }\n      }]\n    },\n    status: 'sent'\n  };\n\n  return await envelopesApi.createEnvelope(accountId, { envelopeDefinition: envelope });\n}\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"anti-pattern-5-storing-filled-pdfs-without-encryption",children:"Anti-Pattern 5: Storing Filled PDFs Without Encryption"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Problem"}),": Sensitive legal documents stored in plain text."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Wrong approach"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u274c Save PDF to disk unencrypted\nconst pdfBytes = await pdfDoc.save();\nawait fs.writeFile(`./documents/${caseId}.pdf`, pdfBytes);\n// Sensitive data accessible to anyone with file system access\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Why wrong"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Legal/medical data exposed"}),"\n",(0,s.jsx)(n.li,{children:"HIPAA/GDPR violations"}),"\n",(0,s.jsx)(n.li,{children:"Data breach liability"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Correct approach 1"}),": Encrypt at rest"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Encrypt PDF with user password\nconst pdfBytes = await pdfDoc.save({\n  userPassword: generateSecurePassword(),\n  ownerPassword: process.env.PDF_OWNER_PASSWORD,\n  permissions: {\n    printing: 'highResolution',\n    modifying: false,\n    copying: false,\n    annotating: false,\n    fillingForms: false,\n    contentAccessibility: true,\n    documentAssembly: false\n  }\n});\n\nawait fs.writeFile(`./documents/${caseId}.pdf`, pdfBytes);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Correct approach 2"}),": Store in encrypted storage (S3 with SSE)"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Upload to S3 with server-side encryption\nimport { S3Client, PutObjectCommand } from '@aws-sdk/client-s3';\n\nconst s3Client = new S3Client({ region: 'us-east-1' });\n\nawait s3Client.send(new PutObjectCommand({\n  Bucket: 'expungement-documents',\n  Key: `cases/${caseId}/petition.pdf`,\n  Body: pdfBytes,\n  ServerSideEncryption: 'AES256',\n  Metadata: {\n    caseId: caseId,\n    documentType: 'petition',\n    generatedAt: new Date().toISOString()\n  },\n  ACL: 'private'  // Not publicly accessible\n}));\n\n// Store S3 URL in database (encrypted)\nawait db.documents.insert({\n  case_id: caseId,\n  s3_url: encrypt(`s3://expungement-documents/cases/${caseId}/petition.pdf`),\n  created_at: new Date()\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Compliance requirements"}),":"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"HIPAA: Encryption at rest + in transit, access logging"}),"\n",(0,s.jsx)(n.li,{children:"GDPR: Right to deletion, data minimization"}),"\n",(0,s.jsx)(n.li,{children:"State bar rules: Attorney-client privilege protection"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"production-checklist",children:"Production Checklist"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u25a1 Form fields filled correctly (test with validation)\n\u25a1 Forms flattened after filling (non-editable)\n\u25a1 Page breaks controlled (no mid-sentence splits)\n\u25a1 Signature fields created (for DocuSign/Adobe Sign)\n\u25a1 PDFs encrypted at rest (S3 SSE or user password)\n\u25a1 Access logged (who viewed/downloaded)\n\u25a1 Auto-deletion scheduled (retention policy)\n\u25a1 Fonts embedded (cross-platform compatibility)\n\u25a1 File size optimized (&lt;5MB per document)\n\u25a1 Batch generation tested (1000+ PDFs)\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"when-to-use-vs-avoid",children:"When to Use vs Avoid"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Scenario"}),(0,s.jsx)(n.th,{children:"Appropriate?"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Fill 50+ government forms"}),(0,s.jsx)(n.td,{children:"\u2705 Yes - automate with pdf-lib"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Generate invoices from template"}),(0,s.jsx)(n.td,{children:"\u2705 Yes - Puppeteer from HTML"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Create certificates at scale"}),(0,s.jsx)(n.td,{children:"\u2705 Yes - pdf-lib or LaTeX"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Assemble multi-doc packets"}),(0,s.jsx)(n.td,{children:"\u2705 Yes - pdf-lib merge"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"View PDFs in browser"}),(0,s.jsx)(n.td,{children:"\u274c No - use pdf.js or browser"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Edit PDF by hand"}),(0,s.jsx)(n.td,{children:"\u274c No - use Adobe Acrobat"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Extract text with OCR"}),(0,s.jsx)(n.td,{children:"\u274c No - use Tesseract/Textract"})]})]})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"references-1",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/references/pdf-lib-guide.md"})," - Form filling, field types, flattening, encryption"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/references/puppeteer-templates.md"})," - HTML templates, page breaks, styling for print"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"/references/document-assembly.md"})," - Merging PDFs, packet creation, watermarks"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"scripts",children:"Scripts"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scripts/form_filler.ts"})," - Fill PDF forms from JSON data, batch processing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"scripts/document_assembler.ts"})," - Merge multiple PDFs, add cover pages, watermarks"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"This skill guides"}),": PDF generation | Form filling | Document automation | Digital signatures | pdf-lib | Puppeteer | LaTeX | DocuSign"]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>a});var t=i(96540);const s={},r=t.createContext(s);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);