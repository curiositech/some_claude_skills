"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[47382],{1782:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"skills/react_performance_optimizer/references/bundle-optimization","title":"Bundle Optimization Strategies","description":"Comprehensive guide to reducing JavaScript bundle size for faster load times.","source":"@site/docs/skills/react_performance_optimizer/references/bundle-optimization.md","sourceDirName":"skills/react_performance_optimizer/references","slug":"/skills/react_performance_optimizer/references/bundle-optimization","permalink":"/docs/skills/react_performance_optimizer/references/bundle-optimization","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Bundle Optimization Strategies","sidebar_label":"Bundle Optimization Strategies","sidebar_position":1}}');var r=s(74848),l=s(28453);const t={title:"Bundle Optimization Strategies",sidebar_label:"Bundle Optimization Strategies",sidebar_position:1},a="Bundle Optimization Strategies",d={},o=[{value:"Why Bundle Size Matters",id:"why-bundle-size-matters",level:2},{value:"Current State Analysis",id:"current-state-analysis",level:2},{value:"Step 1: Measure Your Bundle",id:"step-1-measure-your-bundle",level:3},{value:"Step 2: Set Targets",id:"step-2-set-targets",level:3},{value:"Strategy 1: Code Splitting",id:"strategy-1-code-splitting",level:2},{value:"Route-Based Splitting (Easiest Win)",id:"route-based-splitting-easiest-win",level:3},{value:"Component-Based Splitting",id:"component-based-splitting",level:3},{value:"Vendor Splitting",id:"vendor-splitting",level:3},{value:"Strategy 2: Tree Shaking",id:"strategy-2-tree-shaking",level:2},{value:"Use ES Modules (ESM)",id:"use-es-modules-esm",level:3},{value:"Import Only What You Need",id:"import-only-what-you-need",level:3},{value:"Configure Babel for Tree Shaking",id:"configure-babel-for-tree-shaking",level:3},{value:"Strategy 3: Replace Heavy Dependencies",id:"strategy-3-replace-heavy-dependencies",level:2},{value:"Common Swaps",id:"common-swaps",level:3},{value:"Example: Replace moment.js with date-fns",id:"example-replace-momentjs-with-date-fns",level:3},{value:"Example: Replace axios with fetch",id:"example-replace-axios-with-fetch",level:3},{value:"Strategy 4: Externalize Large Dependencies",id:"strategy-4-externalize-large-dependencies",level:2},{value:"Strategy 5: Remove Unused Code",id:"strategy-5-remove-unused-code",level:2},{value:"Analyze with Bundle Analyzer",id:"analyze-with-bundle-analyzer",level:3},{value:"Example: Remove Unused Polyfills",id:"example-remove-unused-polyfills",level:3},{value:"Remove Development-Only Code",id:"remove-development-only-code",level:3},{value:"Strategy 6: Optimize Images and Assets",id:"strategy-6-optimize-images-and-assets",level:2},{value:"Use Next-Gen Formats",id:"use-next-gen-formats",level:3},{value:"Lazy Load Images",id:"lazy-load-images",level:3},{value:"Inline Small Assets",id:"inline-small-assets",level:3},{value:"Strategy 7: Compression",id:"strategy-7-compression",level:2},{value:"Enable Gzip/Brotli",id:"enable-gzipbrotli",level:3},{value:"Pre-compress at Build Time",id:"pre-compress-at-build-time",level:3},{value:"Strategy 8: Minification",id:"strategy-8-minification",level:2},{value:"Terser (Webpack Default)",id:"terser-webpack-default",level:3},{value:"CSS Minification",id:"css-minification",level:3},{value:"Strategy 9: Dynamic Imports for Features",id:"strategy-9-dynamic-imports-for-features",level:2},{value:"Strategy 10: Prefetch/Preload Strategic Resources",id:"strategy-10-prefetchpreload-strategic-resources",level:2},{value:"Prefetch Next Page",id:"prefetch-next-page",level:3},{value:"Preload Critical Resources",id:"preload-critical-resources",level:3},{value:"Real-World Example",id:"real-world-example",level:2},{value:"Problem: 2.5MB Bundle",id:"problem-25mb-bundle",level:3},{value:"Production Checklist",id:"production-checklist",level:2},{value:"Resources",id:"resources",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"bundle-optimization-strategies",children:"Bundle Optimization Strategies"})}),"\n",(0,r.jsx)(n.p,{children:"Comprehensive guide to reducing JavaScript bundle size for faster load times."}),"\n",(0,r.jsx)(n.h2,{id:"why-bundle-size-matters",children:"Why Bundle Size Matters"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact on User Experience"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"100KB bundle (gzipped) \u2192 ~1s load on 3G"}),"\n",(0,r.jsx)(n.li,{children:"500KB bundle (gzipped) \u2192 ~5s load on 3G"}),"\n",(0,r.jsx)(n.li,{children:"Every 100KB adds ~1s to Time to Interactive"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Business Impact"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pinterest: -40% load time \u2192 +15% conversions"}),"\n",(0,r.jsx)(n.li,{children:"AutoAnything: -50% load time \u2192 +12-13% sales"}),"\n",(0,r.jsx)(n.li,{children:"BBC: Every 1s slower \u2192 -10% users"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"current-state-analysis",children:"Current State Analysis"}),"\n",(0,r.jsx)(n.h3,{id:"step-1-measure-your-bundle",children:"Step 1: Measure Your Bundle"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Next.js\nnpm run build\n\n# Webpack\nnpx webpack --profile --json > stats.json\nnpx webpack-bundle-analyzer stats.json\n\n# Vite\nnpm run build\n# Check dist/ folder size\n"})}),"\n",(0,r.jsx)(n.h3,{id:"step-2-set-targets",children:"Step 2: Set Targets"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Bundle Size (gzipped)"}),(0,r.jsx)(n.th,{children:"Rating"}),(0,r.jsx)(n.th,{children:"Action"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"<100KB"}),(0,r.jsx)(n.td,{children:"\u2705 Excellent"}),(0,r.jsx)(n.td,{children:"Maintain"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"100-300KB"}),(0,r.jsx)(n.td,{children:"\u26a0\ufe0f Good"}),(0,r.jsx)(n.td,{children:"Monitor"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"300-500KB"}),(0,r.jsx)(n.td,{children:"\ud83d\udd34 Large"}),(0,r.jsx)(n.td,{children:"Optimize"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:">500KB"}),(0,r.jsx)(n.td,{children:"\ud83d\udea8 Critical"}),(0,r.jsx)(n.td,{children:"Immediate action"})]})]})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-1-code-splitting",children:"Strategy 1: Code Splitting"}),"\n",(0,r.jsx)(n.h3,{id:"route-based-splitting-easiest-win",children:"Route-Based Splitting (Easiest Win)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Before"})," (single bundle):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import Home from './pages/Home';\nimport About from './pages/About';\nimport Dashboard from './pages/Dashboard';  // 500KB\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"After"})," (split by route):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { lazy, Suspense } from 'react';\n\nconst Home = lazy(() => import('./pages/Home'));\nconst About = lazy(() => import('./pages/About'));\nconst Dashboard = lazy(() => import('./pages/Dashboard'));\n\nfunction App() {\n  return (\n    <Suspense fallback={<Loading />}>\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/about\" element={<About />} />\n        <Route path=\"/dashboard\" element={<Dashboard />} />\n      </Routes>\n    </Suspense>\n  );\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": Main bundle: 800KB \u2192 300KB (500KB lazy-loaded)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"component-based-splitting",children:"Component-Based Splitting"}),"\n",(0,r.jsx)(n.p,{children:"Split heavy components that aren't always shown:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { lazy, Suspense } from 'react';\n\n// \u274c Always loaded (even if modal never opens)\nimport PDFViewer from './PDFViewer';  // 200KB\n\n// \u2705 Loaded on demand\nconst PDFViewer = lazy(() => import('./PDFViewer'));\n\nfunction App() {\n  const [showPDF, setShowPDF] = useState(false);\n\n  return (\n    <div>\n      <button onClick={() => setShowPDF(true)}>View PDF</button>\n\n      {showPDF && (\n        <Suspense fallback={<Spinner />}>\n          <PDFViewer url=\"/document.pdf\" />\n        </Suspense>\n      )}\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"When to split"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Modals/dialogs"}),"\n",(0,r.jsx)(n.li,{children:"Admin panels"}),"\n",(0,r.jsx)(n.li,{children:"Charts/visualizations"}),"\n",(0,r.jsx)(n.li,{children:"Rich text editors"}),"\n",(0,r.jsx)(n.li,{children:"Video players"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"vendor-splitting",children:"Vendor Splitting"}),"\n",(0,r.jsx)(n.p,{children:"Separate third-party code from your app code:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"webpack.config.js"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        // Vendor chunk (rarely changes)\n        vendor: {\n          test: /[\\\\/]node_modules[\\\\/]/,\n          name: 'vendors',\n          chunks: 'all',\n        },\n        // Common code shared across pages\n        common: {\n          minChunks: 2,\n          priority: -10,\n          reuseExistingChunk: true,\n        },\n      },\n    },\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Benefit"}),": Vendor bundle cached long-term (changes infrequently)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-2-tree-shaking",children:"Strategy 2: Tree Shaking"}),"\n",(0,r.jsx)(n.h3,{id:"use-es-modules-esm",children:"Use ES Modules (ESM)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u274c CommonJS"})," (entire library imported):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const _ = require('lodash');  // 500KB\n_.debounce(() => {}, 300);\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u2705 ES Modules"})," (only imported function included):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import { debounce } from 'lodash-es';  // ~5KB\ndebounce(() => {}, 300);\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": 500KB \u2192 5KB (99% reduction)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"import-only-what-you-need",children:"Import Only What You Need"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u274c Whole library"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import * as MUI from '@mui/material';  // 300KB\n\nfunction App() {\n  return <MUI.Button>Click</MUI.Button>;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\u2705 Specific imports"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import Button from '@mui/material/Button';  // 50KB\n\nfunction App() {\n  return <Button>Click</Button>;\n}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"configure-babel-for-tree-shaking",children:"Configure Babel for Tree Shaking"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:".babelrc"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "presets": [\n    ["@babel/preset-env", {\n      "modules": false  // Don\'t transform ES modules\n    }]\n  ]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Without ",(0,r.jsx)(n.code,{children:'"modules": false'}),", Babel converts ESM to CommonJS, breaking tree-shaking."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-3-replace-heavy-dependencies",children:"Strategy 3: Replace Heavy Dependencies"}),"\n",(0,r.jsx)(n.h3,{id:"common-swaps",children:"Common Swaps"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Old Library"}),(0,r.jsx)(n.th,{children:"Size"}),(0,r.jsx)(n.th,{children:"New Library"}),(0,r.jsx)(n.th,{children:"Size"}),(0,r.jsx)(n.th,{children:"Savings"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"moment.js"}),(0,r.jsx)(n.td,{children:"288KB"}),(0,r.jsx)(n.td,{children:"date-fns"}),(0,r.jsx)(n.td,{children:"28KB"}),(0,r.jsx)(n.td,{children:"90%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"lodash"}),(0,r.jsx)(n.td,{children:"500KB"}),(0,r.jsx)(n.td,{children:"lodash-es"}),(0,r.jsx)(n.td,{children:"5KB*"}),(0,r.jsx)(n.td,{children:"99%*"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"axios"}),(0,r.jsx)(n.td,{children:"50KB"}),(0,r.jsx)(n.td,{children:"native fetch"}),(0,r.jsx)(n.td,{children:"0KB"}),(0,r.jsx)(n.td,{children:"100%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"react-router-dom"}),(0,r.jsx)(n.td,{children:"45KB"}),(0,r.jsx)(n.td,{children:"wouter"}),(0,r.jsx)(n.td,{children:"1.2KB"}),(0,r.jsx)(n.td,{children:"97%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"recharts"}),(0,r.jsx)(n.td,{children:"400KB"}),(0,r.jsx)(n.td,{children:"victory-native"}),(0,r.jsx)(n.td,{children:"50KB"}),(0,r.jsx)(n.td,{children:"87%"})]})]})]}),"\n",(0,r.jsx)(n.p,{children:"* When importing only needed functions"}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"example-replace-momentjs-with-date-fns",children:"Example: Replace moment.js with date-fns"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Before"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import moment from 'moment';  // 288KB\n\nconst formatted = moment(date).format('MMM DD, YYYY');\nconst relative = moment(date).fromNow();\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"After"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import { format, formatDistanceToNow } from 'date-fns';  // 28KB\n\nconst formatted = format(date, 'MMM dd, yyyy');\nconst relative = formatDistanceToNow(date, { addSuffix: true });\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": -260KB (-90%)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"example-replace-axios-with-fetch",children:"Example: Replace axios with fetch"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Before"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import axios from 'axios';  // 50KB\n\nconst response = await axios.get('/api/users');\nconst data = response.data;\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"After"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"// Native fetch (0KB)\nconst response = await fetch('/api/users');\nconst data = await response.json();\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": -50KB (-100%)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Note"}),": For complex use cases, consider ",(0,r.jsx)(n.code,{children:"ky"})," (5KB) as lightweight axios alternative"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-4-externalize-large-dependencies",children:"Strategy 4: Externalize Large Dependencies"}),"\n",(0,r.jsx)(n.p,{children:"Move rarely-changing libraries to CDN:"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"index.html"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- React from CDN --\x3e\n<script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"><\/script>\n<script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"><\/script>\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"webpack.config.js"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  externals: {\n    react: 'React',\n    'react-dom': 'ReactDOM',\n  },\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": Bundle size: 500KB \u2192 450KB (React now loaded from CDN)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Trade-offs"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Smaller bundle"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 CDN caching across sites"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Extra HTTP request"}),"\n",(0,r.jsx)(n.li,{children:"\u274c Dependency on CDN availability"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-5-remove-unused-code",children:"Strategy 5: Remove Unused Code"}),"\n",(0,r.jsx)(n.h3,{id:"analyze-with-bundle-analyzer",children:"Analyze with Bundle Analyzer"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npx webpack-bundle-analyzer stats.json\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Look for"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Libraries you don't remember installing"}),"\n",(0,r.jsx)(n.li,{children:"Multiple versions of same library"}),"\n",(0,r.jsx)(n.li,{children:"Test utilities in production bundle"}),"\n",(0,r.jsx)(n.li,{children:"Polyfills for features you don't use"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"example-remove-unused-polyfills",children:"Example: Remove Unused Polyfills"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Before"})," (polyfills for IE11):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"import 'core-js/stable';  // 200KB\nimport 'regenerator-runtime/runtime';  // 50KB\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"After"})," (modern browsers only):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:'// Remove polyfills\n// Assume target: "es2020" in tsconfig.json\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": -250KB if targeting modern browsers"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"remove-development-only-code",children:"Remove Development-Only Code"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:".babelrc"})," (production):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "plugins": [\n    ["transform-remove-console", { "exclude": ["error", "warn"] }]\n  ]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"webpack.config.js"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  plugins: [\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify('production')\n    })\n  ]\n};\n"})}),"\n",(0,r.jsx)(n.p,{children:"This removes PropTypes, debug logs, and dev warnings."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-6-optimize-images-and-assets",children:"Strategy 6: Optimize Images and Assets"}),"\n",(0,r.jsx)(n.h3,{id:"use-next-gen-formats",children:"Use Next-Gen Formats"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Format"}),(0,r.jsx)(n.th,{children:"Size"}),(0,r.jsx)(n.th,{children:"Browser Support"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"PNG"}),(0,r.jsx)(n.td,{children:"100KB"}),(0,r.jsx)(n.td,{children:"All"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"JPEG"}),(0,r.jsx)(n.td,{children:"50KB"}),(0,r.jsx)(n.td,{children:"All"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"WebP"}),(0,r.jsx)(n.td,{children:"30KB"}),(0,r.jsx)(n.td,{children:"96%"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"AVIF"}),(0,r.jsx)(n.td,{children:"20KB"}),(0,r.jsx)(n.td,{children:"89%"})]})]})]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Implementation"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<picture>\n  <source srcset="image.avif" type="image/avif">\n  <source srcset="image.webp" type="image/webp">\n  <img src="image.jpg" alt="Fallback">\n</picture>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"lazy-load-images",children:"Lazy Load Images"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:'function ImageGallery({ images }) {\n  return (\n    <div>\n      {images.map(img => (\n        <img\n          key={img.id}\n          src={img.url}\n          loading="lazy"  // Native lazy loading\n          alt={img.alt}\n        />\n      ))}\n    </div>\n  );\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": Initial page load doesn't download off-screen images"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"inline-small-assets",children:"Inline Small Assets"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"webpack.config.js"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"module.exports = {\n  module: {\n    rules: [\n      {\n        test: /\\.(png|jpg|gif|svg)$/,\n        type: 'asset',\n        parser: {\n          dataUrlCondition: {\n            maxSize: 8 * 1024  // Inline if &lt;8KB\n          }\n        }\n      }\n    ]\n  }\n};\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Benefit"}),": Small images become base64 data URLs (no extra HTTP requests)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-7-compression",children:"Strategy 7: Compression"}),"\n",(0,r.jsx)(n.h3,{id:"enable-gzipbrotli",children:"Enable Gzip/Brotli"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Server config"})," (nginx):"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-nginx",children:"# Gzip\ngzip on;\ngzip_types text/plain text/css application/json application/javascript;\ngzip_min_length 1000;\n\n# Brotli (better compression)\nbrotli on;\nbrotli_types text/plain text/css application/json application/javascript;\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": 500KB bundle \u2192 100KB gzipped (80% reduction)"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Brotli vs Gzip"}),": Brotli ~20% smaller than Gzip for text"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"pre-compress-at-build-time",children:"Pre-compress at Build Time"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Generate .gz and .br files at build\nnpx webpack --mode production\ngzip -k dist/*.js\nbrotli dist/*.js\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Benefit"}),": Server doesn't compress on-the-fly (faster response)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-8-minification",children:"Strategy 8: Minification"}),"\n",(0,r.jsx)(n.h3,{id:"terser-webpack-default",children:"Terser (Webpack Default)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"webpack.config.js"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const TerserPlugin = require('terser-webpack-plugin');\n\nmodule.exports = {\n  optimization: {\n    minimize: true,\n    minimizer: [\n      new TerserPlugin({\n        terserOptions: {\n          compress: {\n            drop_console: true,  // Remove console.log\n            drop_debugger: true,\n          },\n          mangle: true,  // Shorten variable names\n        },\n      }),\n    ],\n  },\n};\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"css-minification",children:"CSS Minification"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"npm install -D css-minimizer-webpack-plugin\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"webpack.config.js"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"const CssMinimizerPlugin = require('css-minimizer-webpack-plugin');\n\nmodule.exports = {\n  optimization: {\n    minimizer: [\n      '...',  // Keep existing minimizers\n      new CssMinimizerPlugin(),\n    ],\n  },\n};\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-9-dynamic-imports-for-features",children:"Strategy 9: Dynamic Imports for Features"}),"\n",(0,r.jsx)(n.p,{children:"Split features that not all users need:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"function App() {\n  const [showAdmin, setShowAdmin] = useState(false);\n\n  const loadAdminPanel = async () => {\n    // Only load admin code when needed\n    const { AdminPanel } = await import('./AdminPanel');\n    setShowAdmin(true);\n  };\n\n  return (\n    <div>\n      {user.isAdmin && (\n        <button onClick={loadAdminPanel}>Open Admin</button>\n      )}\n\n      {showAdmin && <AdminPanel />}\n    </div>\n  );\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Impact"}),": Admin code (200KB) not loaded for regular users"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"strategy-10-prefetchpreload-strategic-resources",children:"Strategy 10: Prefetch/Preload Strategic Resources"}),"\n",(0,r.jsx)(n.h3,{id:"prefetch-next-page",children:"Prefetch Next Page"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typescript",children:"import { lazy, Suspense } from 'react';\n\nconst Dashboard = lazy(() => import('./Dashboard'));\n\nfunction Home() {\n  useEffect(() => {\n    // Prefetch dashboard during idle time\n    const link = document.createElement('link');\n    link.rel = 'prefetch';\n    link.href = '/dashboard.js';\n    document.head.appendChild(link);\n  }, []);\n\n  return <div>Home</div>;\n}\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Benefit"}),": Dashboard loads instantly when user navigates to it"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"preload-critical-resources",children:"Preload Critical Resources"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<head>\n  \x3c!-- Load critical font before anything else --\x3e\n  <link rel="preload" href="/fonts/main.woff2" as="font" type="font/woff2" crossorigin>\n\n  \x3c!-- Preload critical CSS --\x3e\n  <link rel="preload" href="/critical.css" as="style">\n</head>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"real-world-example",children:"Real-World Example"}),"\n",(0,r.jsx)(n.h3,{id:"problem-25mb-bundle",children:"Problem: 2.5MB Bundle"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Before"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Main bundle:     2.5MB (uncompressed)\nGzipped:         650KB\nTime to Interactive: 8 seconds on 3G\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Issues Found"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Entire app in one bundle (no code splitting)"}),"\n",(0,r.jsx)(n.li,{children:"moment.js (288KB) for simple date formatting"}),"\n",(0,r.jsx)(n.li,{children:"Lodash CommonJS import (500KB)"}),"\n",(0,r.jsx)(n.li,{children:"Chart library always loaded (400KB)"}),"\n",(0,r.jsx)(n.li,{children:"Multiple polyfills (250KB)"}),"\n",(0,r.jsx)(n.li,{children:"No compression"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Fixes Applied"}),":"]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Route-based code splitting \u2192 -800KB"}),"\n",(0,r.jsx)(n.li,{children:"Replace moment.js with date-fns \u2192 -260KB"}),"\n",(0,r.jsx)(n.li,{children:"Use lodash-es with tree shaking \u2192 -495KB"}),"\n",(0,r.jsx)(n.li,{children:"Lazy load chart component \u2192 -400KB"}),"\n",(0,r.jsx)(n.li,{children:"Remove unnecessary polyfills \u2192 -250KB"}),"\n",(0,r.jsx)(n.li,{children:"Enable Brotli compression \u2192 80% reduction"}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"After"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"Main bundle:     250KB (uncompressed)\nBrotli:          50KB\nTime to Interactive: 1.2 seconds on 3G\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Result"}),": 8s \u2192 1.2s (85% faster)"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"production-checklist",children:"Production Checklist"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u25a1 Routes code-split with React.lazy\n\u25a1 Heavy components lazy-loaded\n\u25a1 Tree-shakeable imports (ES modules)\n\u25a1 Replaced heavy dependencies (moment \u2192 date-fns)\n\u25a1 Removed unused code (bundle analyzer checked)\n\u25a1 Compression enabled (Brotli > Gzip)\n\u25a1 Images optimized and lazy-loaded\n\u25a1 Source maps not shipped to production\n\u25a1 Minification enabled (Terser for JS, CSSMini for CSS)\n\u25a1 Bundle analyzed (no duplicate dependencies)\n\u25a1 Target: Main bundle &lt;300KB gzipped\n\u25a1 Target: TTI &lt;3 seconds on 3G\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://github.com/webpack-contrib/webpack-bundle-analyzer",children:"webpack-bundle-analyzer"})}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://bundlephobia.com/",children:"Bundlephobia"})," - Find library sizes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://bundle.js.org/",children:"Bundle.js.org"})," - Compare bundle sizes"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://caniuse.com/",children:"Can I Use"})," - Check browser support"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>a});var i=s(96540);const r={},l=i.createContext(r);function t(e){const n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);