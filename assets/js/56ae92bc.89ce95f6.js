"use strict";(globalThis.webpackChunkwebsite=globalThis.webpackChunkwebsite||[]).push([[26308],{28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>r});var i=t(96540);const s={},a=i.createContext(s);function l(e){const n=i.useContext(a);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),i.createElement(a.Provider,{value:n},e.children)}},75423:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>l,metadata:()=>i,toc:()=>f});const i=JSON.parse('{"id":"skills/pwa_expert/references/offline-handling","title":"Offline Handling","description":"Offline Page","source":"@site/docs/skills/pwa_expert/references/offline-handling.md","sourceDirName":"skills/pwa_expert/references","slug":"/skills/pwa_expert/references/offline-handling","permalink":"/docs/skills/pwa_expert/references/offline-handling","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"title":"Offline Handling","sidebar_label":"Offline Handling","sidebar_position":4}}');var s=t(74848),a=t(28453);const l={title:"Offline Handling",sidebar_label:"Offline Handling",sidebar_position:4},r="Offline Handling",o={},f=[{value:"Offline Page",id:"offline-page",level:2},{value:"useOnlineStatus Hook",id:"useonlinestatus-hook",level:2},{value:"Offline Banner Component",id:"offline-banner-component",level:2},{value:"Offline-First Data Pattern",id:"offline-first-data-pattern",level:2}];function c(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",pre:"pre",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"offline-handling",children:"Offline Handling"})}),"\n",(0,s.jsx)(n.h2,{id:"offline-page",children:"Offline Page"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// app/offline/page.tsx\nexport default function OfflinePage() {\n  return (\n    <div className="min-h-screen flex items-center justify-center p-4 bg-leather-950">\n      <div className="text-center max-w-md">\n        <div className="text-6xl mb-4">\ud83d\udce1</div>\n        <h1 className="font-bitter text-2xl text-leather-100 mb-2">\n          You\'re Offline\n        </h1>\n        <p className="text-leather-400 mb-6">\n          Check your connection and try again. Your saved data is still available.\n        </p>\n        <button\n          onClick={() => window.location.reload()}\n          className="px-6 py-3 bg-ember-500 hover:bg-ember-600\n                     text-white rounded-lg font-medium"\n        >\n          Try Again\n        </button>\n      </div>\n    </div>\n  );\n}\n'})}),"\n",(0,s.jsx)(n.h2,{id:"useonlinestatus-hook",children:"useOnlineStatus Hook"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// hooks/useOnlineStatus.ts\n'use client';\n\nimport { useState, useEffect } from 'react';\n\nexport function useOnlineStatus() {\n  const [isOnline, setIsOnline] = useState(true);\n\n  useEffect(() => {\n    // Set initial state\n    setIsOnline(navigator.onLine);\n\n    const handleOnline = () => setIsOnline(true);\n    const handleOffline = () => setIsOnline(false);\n\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  return isOnline;\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"offline-banner-component",children:"Offline Banner Component"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// components/OfflineBanner.tsx\n'use client';\n\nimport { useOnlineStatus } from '@/hooks/useOnlineStatus';\n\nexport function OfflineBanner() {\n  const isOnline = useOnlineStatus();\n\n  if (isOnline) return null;\n\n  return (\n    <div className=\"fixed top-0 left-0 right-0 bg-amber-600 text-white\n                    py-2 px-4 text-center text-sm z-50\">\n      You're offline. Some features may be unavailable.\n    </div>\n  );\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"offline-first-data-pattern",children:"Offline-First Data Pattern"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// hooks/useOfflineData.ts\nimport { useState, useEffect } from 'react';\nimport { useOnlineStatus } from './useOnlineStatus';\n\nexport function useOfflineData<T>(\n  key: string,\n  fetcher: () => Promise<T>\n) {\n  const [data, setData] = useState<T | null>(null);\n  const [loading, setLoading] = useState(true);\n  const isOnline = useOnlineStatus();\n\n  useEffect(() => {\n    async function loadData() {\n      // Try localStorage first\n      const cached = localStorage.getItem(key);\n      if (cached) {\n        setData(JSON.parse(cached));\n        setLoading(false);\n      }\n\n      // Fetch fresh data if online\n      if (isOnline) {\n        try {\n          const fresh = await fetcher();\n          setData(fresh);\n          localStorage.setItem(key, JSON.stringify(fresh));\n        } catch (error) {\n          console.error('Fetch failed:', error);\n        }\n      }\n\n      setLoading(false);\n    }\n\n    loadData();\n  }, [key, isOnline, fetcher]);\n\n  return { data, loading, isOnline };\n}\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);