<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-skills/sobriety_tools_guardian/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Sobriety Tools Guardian | Some Skills</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://someclaudeskills.com/img/og-image.png"><meta data-rh="true" name="twitter:image" content="https://someclaudeskills.com/img/og-image.png"><meta data-rh="true" property="og:url" content="https://someclaudeskills.com/docs/skills/sobriety_tools_guardian"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Sobriety Tools Guardian | Some Skills"><meta data-rh="true" name="description" content="Performance optimization and continuous improvement for sobriety.tools recovery app. Use for load time optimization, offline capability, crisis detection, performance monitoring, automated issue detection. Activate on &quot;sobriety.tools&quot;, &quot;recovery app perf&quot;, &quot;crisis detection&quot;, &quot;offline meetings&quot;, &quot;HALT check-in&quot;, &quot;sponsor contacts&quot;. NOT for general Next.js help, unrelated Cloudflare Workers, or non-recovery apps."><meta data-rh="true" property="og:description" content="Performance optimization and continuous improvement for sobriety.tools recovery app. Use for load time optimization, offline capability, crisis detection, performance monitoring, automated issue detection. Activate on &quot;sobriety.tools&quot;, &quot;recovery app perf&quot;, &quot;crisis detection&quot;, &quot;offline meetings&quot;, &quot;HALT check-in&quot;, &quot;sponsor contacts&quot;. NOT for general Next.js help, unrelated Cloudflare Workers, or non-recovery apps."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://someclaudeskills.com/docs/skills/sobriety_tools_guardian"><link data-rh="true" rel="alternate" href="https://someclaudeskills.com/docs/skills/sobriety_tools_guardian" hreflang="en"><link data-rh="true" rel="alternate" href="https://someclaudeskills.com/docs/skills/sobriety_tools_guardian" hreflang="x-default"><link key="docusaurus-plugin-plausible-preconnect" rel="preconnect" href="https://plausible.io">
<script key="docusaurus-plugin-plausible-script" async defer="defer" data-domain="someclaudeskills.com" src="https://plausible.io/js/plausible.js"></script>
<script key="docusaurus-plugin-plausible-custom-events">window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script><link rel="stylesheet" href="/assets/css/styles.c412cc57.css">
<script src="/assets/js/runtime~main.6b7ecfba.js" defer="defer"></script>
<script src="/assets/js/main.5e380d0d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","light"),document.documentElement.setAttribute("data-theme-choice","light"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><link rel="preload" as="image" href="/img/covers/1999-lofi.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="Some Skills" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="Some Skills" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Some Skills</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Skills</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/skills">üéØ Browse All Skills</a></li><li><a class="dropdown__link" href="/favorites">‚≠ê My Favorites</a></li><li><a class="dropdown__link" href="/submit-skill">üí° Got an Idea?</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Explore</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/artifacts">üé® Examples &amp; Artifacts</a></li><li><a class="dropdown__link" href="/mcps">üîå MCP Servers</a></li><li><a class="dropdown__link" href="/ecosystem">üåê Ecosystem</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Learn</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/guides/claude-skills-guide">üìñ Getting Started</a></li><li><a class="dropdown__link" href="/docs/intro">üìö Documentation</a></li></ul></div><a class="navbar__item navbar__link navbar-cta-button" href="/submit-skill">‚ú® Add Your Own</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/contact">Hire Me</a><a href="https://github.com/erichowens/some_claude_skills" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="winampShade_N4ee"><div class="titleGrip_Pn5S" title="Double-click for surprise"><div class="gripLines_fCYZ"><span></span><span></span><span></span></div></div><div class="miniArt_ELe6"><img src="/img/covers/1999-lofi.png" alt=""></div><div class="miniVis_f7J7"><div class="visBar_hDkl" style="height:2px"></div><div class="visBar_hDkl" style="height:2px"></div><div class="visBar_hDkl" style="height:2px"></div><div class="visBar_hDkl" style="height:2px"></div><div class="visBar_hDkl" style="height:2px"></div></div><div class="trackCounter_CbRA">01/29</div><div class="trackDisplay_nKjA clickable_lD5b" title="Click to open full player"><div class="marqueeContainer_oQSz"><span class="marqueeText_hBJT">Charli XCX &amp; Troye Sivan<!-- --> - <!-- -->1999 (Lo-Fi)<!-- --> ***</span></div></div><div class="timeDisplay_x4hC">0:00</div><div class="modeButtons_pY8m"><button class="modeBtn_LAu4" title="Shuffle Off"><span class="btnIcon_gEsP">üîÄ</span></button><button class="modeBtn_LAu4" title="Repeat: off"><span class="btnIcon_gEsP">‚Üª</span></button></div><div class="skinSwitcher_wYz6"><button class="skinBtn_wfp4" title="Change skin"><span class="btnIcon_gEsP">üé®</span></button></div><div class="transportButtons_Z10B"><button class="transportBtn__koJ" title="Previous"><span class="btnIcon_gEsP">‚èÆ</span></button><button class="transportBtn__koJ ctaGlow_w3RI" title="Play"><span class="btnIcon_gEsP">‚ñ∂</span><span class="ctaHint_RkE5">Hit Play!</span></button><button class="transportBtn__koJ" title="Stop"><span class="btnIcon_gEsP">‚èπ</span></button><button class="transportBtn__koJ" title="Next"><span class="btnIcon_gEsP">‚è≠</span></button></div><div class="seekBar_X4AZ"><div class="seekFill_cC65" style="width:0%"></div><div class="seekThumb_Rt_U" style="left:0%"></div></div><div class="volumeBar_kkhw" title="Volume: 70%"><div class="volumeFill_ktGw" style="width:70%"></div><div class="volumeThumb_Tde0" style="left:70%"></div></div><button class="expandBtn_CBoV expandCta_n0HA" title="Expand Player"><span>‚ñº</span></button></div><div class="theme-picker navbar-theme-picker"><div class="theme-picker__hotdog">üå≠</div><button class="theme-picker__btn"><span class="theme-picker__icon">üé®</span><span class="theme-picker__label">Theme</span><span class="theme-picker__arrow">‚ñº</span></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><main class="docMainContainer_TBSr docMainContainerEnhanced_lQrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><div class="win31-doc-content"><header><h1>Sobriety Tools Guardian</h1></header>
<p><strong>Mission</strong>: Keep sobriety.tools fast enough to save lives. A fentanyl addict in crisis has seconds, not minutes. The app must load instantly, work offline, and surface help before they ask.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="why-performance-is-life-or-death">Why Performance Is Life-or-Death<a href="#why-performance-is-life-or-death" class="hash-link" aria-label="Direct link to Why Performance Is Life-or-Death" title="Direct link to Why Performance Is Life-or-Death" translate="no">‚Äã</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">CRISIS TIMELINE:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">0-30 seconds:  User opens app in distress</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">30-60 seconds: Looking for sponsor number or meeting</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">60-120 seconds: Decision point - call someone or use</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2+ minutes:    If still searching, may give up</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EVERY SECOND OF LOAD TIME = LIVES AT RISK</span><br></span></code></pre></div></div>
<p><strong>Core truth</strong>: This isn&#x27;t a business app. Slow performance isn&#x27;t &quot;bad UX&quot; - it&#x27;s abandonment during crisis. The user staring at a spinner might be deciding whether to live or die.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="stack-specific-optimization-knowledge">Stack-Specific Optimization Knowledge<a href="#stack-specific-optimization-knowledge" class="hash-link" aria-label="Direct link to Stack-Specific Optimization Knowledge" title="Direct link to Stack-Specific Optimization Knowledge" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="architecture-know-this-cold">Architecture (Know This Cold)<a href="#architecture-know-this-cold" class="hash-link" aria-label="Direct link to Architecture (Know This Cold)" title="Direct link to Architecture (Know This Cold)" translate="no">‚Äã</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Next.js 15 (static export) ‚Üí Cloudflare Pages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üì</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Supabase (PostgREST + PostGIS)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üì</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Cloudflare Workers:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - meeting-proxy (KV cached, geohash-based)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - meeting-harvester (hourly cron)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  - claude-api (AI features)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="critical-performance-paths">Critical Performance Paths<a href="#critical-performance-paths" class="hash-link" aria-label="Direct link to Critical Performance Paths" title="Direct link to Critical Performance Paths" translate="no">‚Äã</a></h3>
<p><strong>1. Meeting Search (MUST be &lt;500ms)</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User location ‚Üí Geohash (3-char ~150km cell)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí KV cache lookup (edge, ~5ms)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí Cache HIT: Return immediately</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí Cache MISS: Supabase RPC find_current_meetings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ‚Üí PostGIS ST_DWithin query</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ‚Üí Store in KV, return</span><br></span></code></pre></div></div>
<p><strong>Bottleneck</strong>: Cold Supabase queries. <strong>Fix</strong>: Pre-warm top 30 metros via /warm endpoint.</p>
<p><strong>2. Sponsor/Contact List (MUST be &lt;200ms)</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User opens contacts ‚Üí Local IndexedDB first</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí Show cached contacts instantly</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí Background sync with Supabase</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí Update UI if changes</span><br></span></code></pre></div></div>
<p><strong>Anti-pattern</strong>: Waiting for network before showing contacts. In crisis, show stale data immediately.</p>
<p><strong>3. Check-in Flow (MUST be &lt;100ms to first input)</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Open check-in ‚Üí Pre-rendered form shell</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí Load previous patterns async</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ‚Üí Submit optimistically</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="offline-first-requirements-non-negotiable">Offline-First Requirements (NON-NEGOTIABLE)<a href="#offline-first-requirements-non-negotiable" class="hash-link" aria-label="Direct link to Offline-First Requirements (NON-NEGOTIABLE)" title="Direct link to Offline-First Requirements (NON-NEGOTIABLE)" translate="no">‚Äã</a></h3>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Service Worker must cache:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CRISIS_CRITICAL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;/contacts&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic">// Sponsor phone numbers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;/safety-plan&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// User&#x27;s safety plan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;/meetings?saved=true&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Saved meetings list</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token string" style="color:#e3116c">&#x27;/crisis&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">             </span><span class="token comment" style="color:#999988;font-style:italic">// Crisis resources page</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// These MUST work with zero network:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 1. View sponsor contacts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 2. View safety plan</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 3. View saved meetings (even if stale)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 4. Record check-in (sync when online)</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="crisis-detection-patterns">Crisis Detection Patterns<a href="#crisis-detection-patterns" class="hash-link" aria-label="Direct link to Crisis Detection Patterns" title="Direct link to Crisis Detection Patterns" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="journal-sentiment-signals">Journal Sentiment Signals<a href="#journal-sentiment-signals" class="hash-link" aria-label="Direct link to Journal Sentiment Signals" title="Direct link to Journal Sentiment Signals" translate="no">‚Äã</a></h3>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// RED FLAGS (surface help proactively):</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">CRISIS_INDICATORS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  anger_spike</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;HALT angry score jumps 3+ points&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ex_mentions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Mentions ex-partner 3+ times in week&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  isolation</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;No check-ins for 3+ days after daily streak&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  time_distortion</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Check-ins at unusual hours (2-5am)&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  negative_spiral</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Consecutive declining mood scores&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// When detected: Surface sponsor contact, safety plan link</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// DO NOT: Be preachy or alarming. Gentle nudge only.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="check-in-analysis">Check-in Analysis<a href="#check-in-analysis" class="hash-link" aria-label="Direct link to Check-in Analysis" title="Direct link to Check-in Analysis" translate="no">‚Äã</a></h3>
<div class="language-sql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-sql codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">-- Detect concerning patterns</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">SELECT</span><span class="token plain"> user_id</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">angry_score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> avg_anger</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">angry_score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> FILTER </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> created_at </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3 days&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> recent_anger</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">COUNT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> FILTER </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> EXTRACT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">HOUR</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> created_at</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">BETWEEN</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">AND</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">as</span><span class="token plain"> late_night_checkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">FROM</span><span class="token plain"> daily_checkins</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> created_at </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;30 days&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">GROUP</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">BY</span><span class="token plain"> user_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">HAVING</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">angry_score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> FILTER </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">WHERE</span><span class="token plain"> created_at </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">NOW</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">INTERVAL</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;3 days&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       </span><span class="token function" style="color:#d73a49">AVG</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">angry_score</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-monitoring--logging">Performance Monitoring &amp; Logging<a href="#performance-monitoring--logging" class="hash-link" aria-label="Direct link to Performance Monitoring &amp; Logging" title="Direct link to Performance Monitoring &amp; Logging" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-metrics-to-track">Key Metrics to Track<a href="#key-metrics-to-track" class="hash-link" aria-label="Direct link to Key Metrics to Track" title="Direct link to Key Metrics to Track" translate="no">‚Äã</a></h3>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Client-side (log to analytics)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PERF_METRICS</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ttfb</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Time to First Byte&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  fcp</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;First Contentful Paint&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  lcp</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Largest Contentful Paint&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tti</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Time to Interactive&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// App-specific critical paths</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  contacts_visible</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Time until sponsor list renders&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  meeting_results</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Time until first meeting card shows&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  checkin_interactive</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;Time until check-in form accepts input&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Log slow paths</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">contactsVisibleTime </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">500</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">logPerf</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;contacts_slow&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> duration</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> contactsVisibleTime</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> network</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> navigator</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">connection</span><span class="token operator" style="color:#393A34">?.</span><span class="token plain">effectiveType </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="automated-performance-regression-detection">Automated Performance Regression Detection<a href="#automated-performance-regression-detection" class="hash-link" aria-label="Direct link to Automated Performance Regression Detection" title="Direct link to Automated Performance Regression Detection" translate="no">‚Äã</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># scripts/perf-audit.sh - Run in CI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">lighthouse https://sobriety.tools/meetings --output=json --output-path=./perf.json</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">SCORE=$(jq &#x27;.categories.performance.score&#x27; perf.json)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">if (( $(echo &quot;$SCORE &lt; 0.9&quot; | bc -l) )); then</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  echo &quot;Performance regression: $SCORE&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Create GitHub issue automatically</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">fi</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="automated-issue-detection--filing">Automated Issue Detection &amp; Filing<a href="#automated-issue-detection--filing" class="hash-link" aria-label="Direct link to Automated Issue Detection &amp; Filing" title="Direct link to Automated Issue Detection &amp; Filing" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="background-performance-scanner">Background Performance Scanner<a href="#background-performance-scanner" class="hash-link" aria-label="Direct link to Background Performance Scanner" title="Direct link to Background Performance Scanner" translate="no">‚Äã</a></h3>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Run hourly via Cloudflare Worker cron</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">performanceAudit</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> checks </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">checkMeetingCacheHealth</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">checkSupabaseQueryTimes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">checkStaticAssetSizes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">checkServiceWorkerCoverage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> issues </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token builtin">Promise</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">all</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">checks</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> problems </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> issues</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">flat</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">filter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">i </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> i</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">severity </span><span class="token operator" style="color:#393A34">===</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;high&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> problem </span><span class="token keyword" style="color:#00009f">of</span><span class="token plain"> problems</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createGitHubIssue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      title</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">[Auto] Perf: </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">problem</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">title</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      body</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> problem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">description </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;\n\n&#x27;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> problem</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">suggestedFix</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      labels</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;performance&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;automated&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-anti-patterns">Common Anti-Patterns<a href="#common-anti-patterns" class="hash-link" aria-label="Direct link to Common Anti-Patterns" title="Direct link to Common Anti-Patterns" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="1-network-blocking-contact-display">1. Network-Blocking Contact Display<a href="#1-network-blocking-contact-display" class="hash-link" aria-label="Direct link to 1. Network-Blocking Contact Display" title="Direct link to 1. Network-Blocking Contact Display" translate="no">‚Äã</a></h3>
<p><strong>Symptom</strong>: Contacts page shows spinner while fetching
<strong>Problem</strong>: User in crisis sees loading state instead of sponsor number
<strong>Solution</strong>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// WRONG</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> contacts </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;contacts&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fetchContacts</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// RIGHT</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> contacts </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useQuery</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;contacts&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> fetchContacts</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function-variable function" style="color:#d73a49">initialData</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCachedContacts</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// IndexedDB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  staleTime</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">Infinity</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// Never refetch automatically</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="2-uncached-meeting-searches">2. Uncached Meeting Searches<a href="#2-uncached-meeting-searches" class="hash-link" aria-label="Direct link to 2. Uncached Meeting Searches" title="Direct link to 2. Uncached Meeting Searches" translate="no">‚Äã</a></h3>
<p><strong>Symptom</strong>: Every search hits Supabase
<strong>Problem</strong>: 200-500ms latency on every search
<strong>Solution</strong>: Geohash-based KV caching (already implemented in meeting-proxy)</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="3-large-bundle-blocking-interactivity">3. Large Bundle Blocking Interactivity<a href="#3-large-bundle-blocking-interactivity" class="hash-link" aria-label="Direct link to 3. Large Bundle Blocking Interactivity" title="Direct link to 3. Large Bundle Blocking Interactivity" translate="no">‚Äã</a></h3>
<p><strong>Symptom</strong>: High TTI despite fast TTFB
<strong>Problem</strong>: JavaScript bundle blocks main thread
<strong>Solution</strong>:</p>
<div class="language-typescript codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-typescript codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Lazy load non-critical features</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> JournalAI </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dynamic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./JournalAI&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> ssr</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> Charts </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">dynamic</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;./Charts&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">loading</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">ChartSkeleton </span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="4-synchronous-check-in-submission">4. Synchronous Check-in Submission<a href="#4-synchronous-check-in-submission" class="hash-link" aria-label="Direct link to 4. Synchronous Check-in Submission" title="Direct link to 4. Synchronous Check-in Submission" translate="no">‚Äã</a></h3>
<p><strong>Symptom</strong>: Button stays disabled during network request
<strong>Problem</strong>: User thinks it didn&#x27;t work, closes app
<strong>Solution</strong>: Optimistic UI + background sync queue</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="performance-optimization-checklist">Performance Optimization Checklist<a href="#performance-optimization-checklist" class="hash-link" aria-label="Direct link to Performance Optimization Checklist" title="Direct link to Performance Optimization Checklist" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="before-every-deploy">Before Every Deploy<a href="#before-every-deploy" class="hash-link" aria-label="Direct link to Before Every Deploy" title="Direct link to Before Every Deploy" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Bundle size delta &lt; 5KB</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->No new synchronous network calls in critical paths</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Lighthouse performance score &gt;= 90</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Offline mode tested (disable network in DevTools)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="weekly-audit">Weekly Audit<a href="#weekly-audit" class="hash-link" aria-label="Direct link to Weekly Audit" title="Direct link to Weekly Audit" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Review slow query logs in Supabase</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Check KV cache hit rate (should be &gt;80%)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Analyze Real User Metrics (RUM) for P95 load times</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test on 3G throttled connection</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="monthly-deep-dive">Monthly Deep Dive<a href="#monthly-deep-dive" class="hash-link" aria-label="Direct link to Monthly Deep Dive" title="Direct link to Monthly Deep Dive" translate="no">‚Äã</a></h3>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Profile React renders (why did this re-render?)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Audit third-party scripts</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Review and prune unused dependencies</li>
<li class="task-list-item"><input type="checkbox" disabled=""> <!-- -->Test crisis flows end-to-end on real device</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="scripts-available">Scripts Available<a href="#scripts-available" class="hash-link" aria-label="Direct link to Scripts Available" title="Direct link to Scripts Available" translate="no">‚Äã</a></h2>
<table><thead><tr><th>Script</th><th>Purpose</th></tr></thead><tbody><tr><td><code>scripts/perf-audit.ts</code></td><td>Run Lighthouse + custom checks, file issues</td></tr><tr><td><code>scripts/cache-health.ts</code></td><td>Check KV cache hit rates and staleness</td></tr><tr><td><code>scripts/crisis-path-test.ts</code></td><td>Automated test of crisis-critical flows</td></tr><tr><td><code>scripts/bundle-analyzer.ts</code></td><td>Track bundle size over time</td></tr></tbody></table>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="integration-points">Integration Points<a href="#integration-points" class="hash-link" aria-label="Direct link to Integration Points" title="Direct link to Integration Points" translate="no">‚Äã</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="with-meeting-harvester">With meeting-harvester<a href="#with-meeting-harvester" class="hash-link" aria-label="Direct link to With meeting-harvester" title="Direct link to With meeting-harvester" translate="no">‚Äã</a></h3>
<ul>
<li class="">After harvest, warm cache for top metros</li>
<li class="">Monitor harvest duration and meeting counts</li>
<li class="">Alert if harvest fails (stale data = wrong meeting times)</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="with-check-in-system">With check-in system<a href="#with-check-in-system" class="hash-link" aria-label="Direct link to With check-in system" title="Direct link to With check-in system" translate="no">‚Äã</a></h3>
<ul>
<li class="">Analyze patterns for crisis detection</li>
<li class="">Track submission success rate</li>
<li class="">Monitor offline queue depth</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="with-contactssponsors">With contacts/sponsors<a href="#with-contactssponsors" class="hash-link" aria-label="Direct link to With contacts/sponsors" title="Direct link to With contacts/sponsors" translate="no">‚Äã</a></h3>
<ul>
<li class="">Ensure offline availability</li>
<li class="">Track time-to-display</li>
<li class="">Monitor sync failures</li>
</ul>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="when-to-escalate">When to Escalate<a href="#when-to-escalate" class="hash-link" aria-label="Direct link to When to Escalate" title="Direct link to When to Escalate" translate="no">‚Äã</a></h2>
<p><strong>File GitHub issue immediately if:</strong></p>
<ul>
<li class="">Lighthouse score drops below 85</li>
<li class="">P95 meeting search &gt; 1 second</li>
<li class="">Contacts page has any loading state &gt; 200ms</li>
<li class="">Service Worker fails to cache crisis pages</li>
<li class="">Any user-reported &quot;couldn&#x27;t load&quot; during crisis hours (evenings/weekends)</li>
</ul>
<p><strong>This is a recovery app. Performance isn&#x27;t a feature - it&#x27;s the difference between someone getting help and someone dying alone.</strong></p></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"></nav></div></div><div class="col col--3"><div class="toc-wrapper-with-references"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#why-performance-is-life-or-death" class="table-of-contents__link toc-highlight">Why Performance Is Life-or-Death</a></li><li><a href="#stack-specific-optimization-knowledge" class="table-of-contents__link toc-highlight">Stack-Specific Optimization Knowledge</a><ul><li><a href="#architecture-know-this-cold" class="table-of-contents__link toc-highlight">Architecture (Know This Cold)</a></li><li><a href="#critical-performance-paths" class="table-of-contents__link toc-highlight">Critical Performance Paths</a></li><li><a href="#offline-first-requirements-non-negotiable" class="table-of-contents__link toc-highlight">Offline-First Requirements (NON-NEGOTIABLE)</a></li></ul></li><li><a href="#crisis-detection-patterns" class="table-of-contents__link toc-highlight">Crisis Detection Patterns</a><ul><li><a href="#journal-sentiment-signals" class="table-of-contents__link toc-highlight">Journal Sentiment Signals</a></li><li><a href="#check-in-analysis" class="table-of-contents__link toc-highlight">Check-in Analysis</a></li></ul></li><li><a href="#performance-monitoring--logging" class="table-of-contents__link toc-highlight">Performance Monitoring &amp; Logging</a><ul><li><a href="#key-metrics-to-track" class="table-of-contents__link toc-highlight">Key Metrics to Track</a></li><li><a href="#automated-performance-regression-detection" class="table-of-contents__link toc-highlight">Automated Performance Regression Detection</a></li></ul></li><li><a href="#automated-issue-detection--filing" class="table-of-contents__link toc-highlight">Automated Issue Detection &amp; Filing</a><ul><li><a href="#background-performance-scanner" class="table-of-contents__link toc-highlight">Background Performance Scanner</a></li></ul></li><li><a href="#common-anti-patterns" class="table-of-contents__link toc-highlight">Common Anti-Patterns</a><ul><li><a href="#1-network-blocking-contact-display" class="table-of-contents__link toc-highlight">1. Network-Blocking Contact Display</a></li><li><a href="#2-uncached-meeting-searches" class="table-of-contents__link toc-highlight">2. Uncached Meeting Searches</a></li><li><a href="#3-large-bundle-blocking-interactivity" class="table-of-contents__link toc-highlight">3. Large Bundle Blocking Interactivity</a></li><li><a href="#4-synchronous-check-in-submission" class="table-of-contents__link toc-highlight">4. Synchronous Check-in Submission</a></li></ul></li><li><a href="#performance-optimization-checklist" class="table-of-contents__link toc-highlight">Performance Optimization Checklist</a><ul><li><a href="#before-every-deploy" class="table-of-contents__link toc-highlight">Before Every Deploy</a></li><li><a href="#weekly-audit" class="table-of-contents__link toc-highlight">Weekly Audit</a></li><li><a href="#monthly-deep-dive" class="table-of-contents__link toc-highlight">Monthly Deep Dive</a></li></ul></li><li><a href="#scripts-available" class="table-of-contents__link toc-highlight">Scripts Available</a></li><li><a href="#integration-points" class="table-of-contents__link toc-highlight">Integration Points</a><ul><li><a href="#with-meeting-harvester" class="table-of-contents__link toc-highlight">With meeting-harvester</a></li><li><a href="#with-check-in-system" class="table-of-contents__link toc-highlight">With check-in system</a></li><li><a href="#with-contactssponsors" class="table-of-contents__link toc-highlight">With contacts/sponsors</a></li></ul></li><li><a href="#when-to-escalate" class="table-of-contents__link toc-highlight">When to Escalate</a></li></ul></div></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Skills</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/skills">Browse Skills</a></li><li class="footer__item"><a class="footer__link-item" href="/submit-skill">Submit a Skill</a></li><li class="footer__item"><a class="footer__link-item" href="/ecosystem">Ecosystem</a></li><li class="footer__item"><a class="footer__link-item" href="/artifacts">Examples</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/intro">Documentation</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/erichowens/some_claude_skills" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.anthropic.com/claude" target="_blank" rel="noopener noreferrer" class="footer__link-item">Anthropic Claude<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/erich-owens-01a38446/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/erichowens" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made by Erich Owens | Ex-Meta ML Engineer | ¬© 2026 | Windows 3.1 aesthetic by design.</div></div></div></footer></div>
</body>
</html>